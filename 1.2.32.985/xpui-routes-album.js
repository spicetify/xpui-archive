"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3840],{78232:(e,a,s)=>{s.d(a,{a:()=>r});var i=s(8004),l=s(33062),n=s(2488);const r=({children:e})=>(0,n.jsx)(i.a,{variant:"bodySmall",className:l.c.pretitle,children:e})},85552:(e,a,s)=>{s.d(a,{I:()=>u});var i=s(96651),l=s(51528),n=s(92280),r=s(80060),t=s(97124),o=s(94231),c=s(83336),d=s(2488);const u=({children:e,action:a,uri:s})=>{const u=(0,n.A)(),m=(0,t.c)();let g;const h=()=>{const e={triggerId:c.o,triggerAction:{type:a}};o.F.set((a=>({...a,...e}))),m.storeAction(r.us,{operation:l.aG.ADD,uris:[s]})};try{g=i.Children.only(e)}catch(a){return(0,d.jsx)(d.Fragment,{children:e})}return u?i.cloneElement(g,{onClick:h}):(0,d.jsx)(d.Fragment,{children:e})}},40424:(e,a,s)=>{s.r(a),s.d(a,{default:()=>aa});s(41260);var i=s(96651),l=s(10124),n=s.n(l),r=s(82504),t=s(4564),o=s(33220),c=s(8004),d=s(32040),u=s(71912),m=s(49232),g=s(91320),h=s(12100),b=s(35156),x=s(87832),p=s(25676),j=s(12980),y=s(1044),f=s(62688),k=s(73372),I=s(92376),v=s(62768),w=s(88272),A=s(99972);const L=new w.a("queryAlbumMerch","query","7b258651f4a220aeab4a0573edbd5cf7edd0acfa4d35de2f18b72235e3300ac4",null);var C=s(20404);const _="iEG0moJ3mt1_j9Lho7MA";var P=s(2488);const U=({albumName:e,albumURI:a})=>{const{data:s}=(i={uri:a},l={gcTime:5*A.y},(0,A.U)(L,i,l));var i,l;const n=s?.albumUnion&&"merch"in s.albumUnion?s?.albumUnion?.merch?.items:[];return n&&n?.length>0?(0,P.jsx)("div",{className:"contentSpacing",children:(0,P.jsx)("div",{className:_,children:(0,P.jsx)(C.A,{id:e,uri:a,merchItems:n,merchVariant:"Album page merch items"})})}):null};var S=s(60112),M=s(38292),R=s(10928),T=s(23052),N=s(11920),B=s(22480),E=s(52588),O=s(62692),F=s(40636),z=s(43619),V=s(89060),D=s(23568),q=s(556),Q=s(3844),W=s(24544),X=s(72144),G=s(26681),Y=s(10660),Z=s(50176),J=s(48856),K=s(85552),H=s(75480),$=s(7296),ee=s(13932),ae=s(83968),se=s(83496),ie=s(78e3),le=s(96692);const ne="n8Bz0c0v17whD3KfMdOk",re="zddjxV2lX9ukNM5QXloA",te="lVqlPjQLuQhK2flsxB78",oe="O_EguRjsZ4uI1hHamkOA",ce="jcaQQxoVnuuhtVwDJU1R",de="fLS8v3_EfBadEerbGVoR",ue="in4OjUTflcsoj9RUpf05",me="xaPiqLlyzjAbzAaXfU1y",ge="vveb4Rn0dK_r8YUM7L_n",he=i.memo((function({uri:e,togglePlay:a,isPlaying:s,isActive:l,spec:n,logger:r,backgroundColor:t,name:o,artists:c,isPlayable:d,sharingInfo:u}){const m=(0,$.w)(),g=(0,ee.O)(),b=(0,Q.u)(),j=(0,i.useMemo)((()=>n.actionBarFactory()),[n]),[y,f]=(0,Q.X)(e),k=(0,i.useCallback)((()=>{const i=(0,ae.Il)({isPlaying:s,isActive:l,spec:j.playButtonFactory(),logger:r,uri:e});a({loggingParams:i})}),[s,l,a,j,r,e]),I=(0,i.useCallback)((async()=>{let a;const s=j.saveButtonFactory();a=y?s.hitDislike({itemToBeDisliked:e}):s.hitLike({itemToBeLiked:e}),r.logInteraction(a),m({targetUri:e,intent:y?"unsave":"save",type:"click"});try{await f(!y)}catch{}}),[m,e,y,f,j,r]),w=(0,le.Y)(),A=(0,H.u)();return(0,P.jsx)(X.g,{backgroundColor:t,children:(0,P.jsxs)(G.i,{children:[(0,P.jsx)(v.e,{onClick:k,disabled:!d,isPlaying:s,size:A,uri:e}),w&&(0,P.jsx)(F.Ud,{spec:j,children:(0,P.jsx)(ie.I,{entityName:o,contextUri:e,activationPlacement:"bottomEnd",size:A})}),(0,P.jsx)(K.I,{uri:e,action:se.S_.SAVE_ALBUM,children:(0,P.jsx)(Y.O,{isAdded:!!y,onClick:I,disabled:!g&&!b?.getCapabilities().canModifyOffline,size:A})}),(0,P.jsx)(Z.W,{uri:e,isFollowing:!!y,onClick:(a,s)=>(0,ae.cN)(s,j.downloadButtonFactory(),r,e),onFollow:I,size:A}),(0,P.jsx)(x.pD,{onShow:()=>(0,ae.ni)(j,r),menu:(0,P.jsx)(p.k,{uri:e,artistUri:c?.[0]?.uri,sharingInfo:u}),children:(0,P.jsx)(J.g,{label:h._s.get("more.label.context",o),size:A})}),(0,P.jsx)("div",{className:ge,children:(0,P.jsx)(D.Q,{property:W.RT,renderNewExperience:()=>(0,P.jsx)(q.W,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]})})}));var be=s(92144);const xe=864e5,pe=365.25*xe;var je=s(78232),ye=s(4668),fe=s(90496),ke=s(38156),Ie=s(41956),ve=s(15700),we=s(15040);var Ae=s(77624),Le=s(71940),Ce=s(14788),_e=s(10156),Pe=s(92280),Ue=s(57800),Se=s(51160),Me=s(99640),Re=s(68964);var Te=s(47824),Ne=s(96560),Be=s(20356),Ee=s(78390),Oe=s(40068);const Fe="TCmZzqInstJMZjkHgnw3",ze="PeNI572tTpqsN23o3QhJ",Ve="oUsSfFiifMPXqW0kHjR6",De="XKvEMQZlPfPncTqiitM5",qe="GdbPVlmUCW0Q6ZZ0z0wh",Qe="Hu7O5y7x5c7wUYFbnIoS",We=i.memo((function(e){const{images:a,title:s,isOpen:l,onClose:n}=e,r=(0,i.useMemo)((()=>(0,Oe.C)(a,{desiredSize:1e4})),[a]);return r?(0,P.jsx)(Be.c,{className:Fe,isOpen:l,onRequestClose:n,animation:{modal:{base:De,afterOpen:qe,beforeClose:Qe}},animated:!0,children:(0,P.jsxs)("div",{style:{"--image-width":`${r.width}px`,"--image-height":`${r.height}px`},className:ze,children:[(0,P.jsx)(Ee.W,{loading:"eager",alt:s,src:r.url,className:Ve}),(0,P.jsx)(Ne.u,{onClick:n,semanticColor:"textBase",children:h._s.get("web-player.cover-art-modal.close")})]})}):null}));var Xe=s(44488),Ge=s(90484);const Ye=({releases:e})=>(0,P.jsx)(Xe.i,{children:e.map((e=>(0,P.jsx)(Ge.I,{role:"menuitem",to:(0,Ce.nX)(e.uri).toURLPath(!0),children:e.name},e.uri)))});var Ze=s(73635),Je=s(90128),Ke=s(88376);const He=i.lazy((()=>s.e(9076).then(s.bind(s,59076))));function $e(e){switch(e){case Je.s.Single:return h._s.get("single");case Je.s.Ep:return h._s.get("ep");case Je.s.Compilation:return h._s.get("compilation");case Je.s.Audiobook:return h._s.get("card.tag.audiobook");case Je.s.Album:default:return h._s.get("album")}}const ea=({uri:e,album:a})=>{const s=(0,o.IT)(),{spec:l,logger:I,UBIFragment:w}=(0,F.gp)(g.Y,{data:{uri:e}}),A=(0,i.useMemo)((()=>l.trackListFactory()),[l]),L=(0,i.useMemo)((()=>l.moreByArtistShelfFactory()),[l]),C=a.moreAlbumsByArtist,_=parseInt(new URLSearchParams((0,o.IT)().search).get("index")||"0",10),N=(0,M.y)(e),{usePlayContextItem:B,togglePlay:D,isPlaying:q,isActive:Q}=(0,E.I)({uri:N},{featureIdentifier:"album"}),W=(0,i.useCallback)(((e,a)=>{if(l){const e=l.headerFactory().artistNameFactory().hitUiNavigate({destination:a.creator.uri});I.logInteraction(e)}}),[I,l]),{isOpen:X,openModal:G,closeModal:Y}=(()=>{const[e,a]=(0,i.useState)(!1);return{isOpen:e,openModal:(0,i.useCallback)((()=>a(!0)),[]),closeModal:(0,i.useCallback)((()=>a(!1)),[])}})(),Z=(0,m.IP)(we.CGS,{loadingValue:!1})?{onClick:G,ariaLabel:h._s.get("web-player.album.open_coverart_modal")}:{},J=(0,i.useCallback)((()=>new URLSearchParams(s.search.slice(1)).get("highlight")||""),[s.search]),K=a.uri,H=a.name,$=a.albumType,ee=a.release?.date,ae=a.release?.precision,se=a.nrTracks,ie=a.images,le=a.extractedColors?.colorRaw.hex,ge=a.artists,Ne=a.isPlayable,Be=a.isCatalogueRestricted,Ee=a.copyright.items,Oe=a.courtesyLine,Fe=a.duration.durationMs,ze=a.duration.isEstimate,Ve=J(),De=(0,t.w1)(Re.cx),qe=De.overrides?.locale??h._s.getLocaleForTranslation(),Qe=(0,Te.W)({uri:e,type:"locale"}),Xe=(0,O.M7)({albumName:H,albumType:$,albumArtists:ge.map((e=>e.name)).join(h._s.getSeparator()),shouldLocalize:Qe,i18n:h._s});(0,R.aR)(le||null);const{albumILRAboveEnabled:Ge,albumILRBelowEnabled:Ze}=(()=>{const e=(0,ve.m)(),a=(0,o.IT)(),s=(0,m.IP)(we.aik),i=(0,ke.qs)(Ie.S.ILRAlbumAbove,a),l=(0,ke.qs)(Ie.S.ILRAlbumBelow,a);return e?{albumILRAboveEnabled:!l&&(i||s===we._Ok.ABOVE),albumILRBelowEnabled:!i&&(l||s===we._Ok.BELOW)}:{albumILRAboveEnabled:!1,albumILRBelowEnabled:!1}})(),Je=function(e){return(0,i.useMemo)((()=>{if(!e?.date)return null;if("day"===e.precision){const a=new Date(e.date),s=(new Date).getTime()-a.getTime(),i=s%pe;return i<3.5*xe||i>312552e5?Math.round(s/pe):null}return null}),[e])}(a.release),{isCompactMode:ea}=(0,S.Q7)(),aa=(e=>{const a=(0,Pe.A)(),s=(0,Ue.mg)(),l=(0,m.IP)(we.aik),n=(0,t.w1)(Re.Yf),r=(0,t.w1)(Me.SS);return(0,i.useCallback)((async()=>{if(!(0,Ce.MJ)(e))return;const i={category:"album_ilr_component_visible",action:"viewed",variant:l,label:"dwp",os:(0,Se.k)(),context:e,country:n?r:"",sp_t:(0,_e.Ij)("sp_t")};a?s.send((0,Le.O)(i)):s.send((0,Ae.E)(i))}),[e,r,s,a,n,l])})(e),{ref:sa,inView:ia}=(0,r.cD)({threshold:0});return(0,i.useEffect)((()=>{ia&&aa()}),[ia,aa]),(0,P.jsxs)("section",{className:ne,"data-testid":"album-page",children:[(0,P.jsx)(j.Q,{children:Xe}),null!==Je?(0,P.jsx)(i.Suspense,{fallback:null,children:(0,P.jsx)(He,{colorLight:a?.extractedColors?.colorLight.hex,colorDark:a?.extractedColors?.colorDark.hex,name:H,years:Je})}):null,(0,P.jsxs)(y.I1,{backgroundColor:le,children:[(0,P.jsxs)(f.E,{children:[(0,P.jsx)(v.e,{size:"medium",onClick:()=>D(),disabled:!Ne,isPlaying:q,uri:e}),(0,P.jsx)(k.e,{text:H,dragUri:e,dragLabel:H})]}),(0,P.jsx)(x.UF,{menu:(0,P.jsx)(p.k,{uri:a.uri,artistUri:ge?.[0]?.uri,sharingInfo:a.sharingInfo}),children:(0,P.jsx)(y.gR,{dragUri:K,images:ie,name:H,placeholderType:"album",...Z})}),(0,P.jsxs)(y.a8,{children:[(0,P.jsx)(je.a,{children:$e($)}),(0,P.jsx)(x.UF,{menu:(0,P.jsx)(p.k,{uri:a.uri,artistUri:ge?.[0]?.uri,sharingInfo:a.sharingInfo}),children:(0,P.jsx)(y.on,{dragUri:a.uri,dragLabel:a.name,scaleAtMinWidth:y.Gc,children:H})}),(0,P.jsx)(y.E1,{creators:ge,onCreatorClick:W,releaseDate:ee,releaseDatePrecision:ae,totalItems:se,durationMilliseconds:Fe,isEstimatedDuration:ze,hasTracks:!0})]})]}),(0,P.jsx)(he,{backgroundColor:le,uri:e,togglePlay:D,isPlaying:q,isActive:Q,spec:l,logger:I,sharingInfo:a.sharingInfo,name:a.name,artists:a.artists,isPlayable:a.isPlayable}),Be?(0,P.jsxs)("div",{className:re,children:[(0,P.jsx)(c.a,{as:"h2",variant:"bodyMediumBold",className:te,children:h._s.get("windowed.product-album-header")}),(0,P.jsx)("div",{className:oe,children:h._s.get("windowed.product-album-description")})]}):null,(0,P.jsxs)("div",{className:"contentSpacing",children:[(0,P.jsx)(w,{spec:A,children:(0,P.jsx)(be.m,{ariaLabel:H,nrTracks:(0,Ke.a)(a.discs)?a.discs.totalCount+se:se,discs:a.discs,albumUri:K,highlightUri:Ve,scrollToIndex:_,usePlayContextItem:B,initalTracks:a.items,isCompactMode:ea})}),(0,P.jsxs)("div",{className:ue,children:[(0,P.jsxs)("div",{children:[ee&&(0,P.jsx)(c.a,{as:"p",variant:"bodySmall",children:(0,V.iY)((0,V._z)(ee),qe,{year:"numeric",month:"long",day:"numeric"},ae)}),(0,P.jsx)(T.k,{copyrights:Ee,courtesyLine:Oe})]}),a.releases.items.length>0&&(0,P.jsx)(x.SM,{menu:(0,P.jsx)(Ye,{releases:a.releases.items}),children:(e,s,i)=>(0,P.jsxs)("button",{ref:i,className:de,type:"button",onClick:s,children:[(0,P.jsx)(c.a,{variant:"bodySmall",children:h._s.get("album-page.more-releases",a.releases.items.length)}),e?(0,P.jsx)(d.s,{size:"small"}):(0,P.jsx)(u.a,{size:"small"})]})})]})]}),Ge&&(0,P.jsx)("div",{className:n()("contentSpacing",me),"data-testid":"placeholder-album-ilr-above",children:(0,P.jsx)(ye.B,{subtitle:h._s.get("internal-link-recommender.based-on-this-album"),uri:a.uri,inViewRef:sa,entityType:z.s.ALBUM})}),(0,P.jsx)(U,{albumName:H,albumURI:K}),(0,P.jsxs)(P.Fragment,{children:[C?.length>0&&(0,P.jsx)("div",{className:"contentSpacing",children:(0,P.jsx)(w,{spec:L,children:(0,P.jsx)(fe.c,{index:0,id:"more-albums",className:ce,title:h._s.get("album-page.more-by-artist",ge?.[0]?.name),total:C.length,seeAllUri:`${ge?.[0]?.uri.replace("artist","app:artist")}:discography`,seeAllLabel:h._s.get("artist-page.show-discography"),alwaysShowSeeAll:!0,children:C.map(((e,a)=>(0,P.jsx)(b.u,{index:a,artists:ge,images:e.images||[],name:e.name,uri:e.uri,year:e.year,type:e.albumType,sharingInfo:e.sharingInfo},e.uri)))})})}),Ze&&(0,P.jsx)("div",{className:n()("contentSpacing",me),"data-testid":"placeholder-album-ilr-below",children:(0,P.jsx)(ye.B,{subtitle:h._s.get("internal-link-recommender.based-on-this-album"),uri:a.uri,inViewRef:sa,entityType:z.s.ALBUM})})]}),(0,P.jsx)(We,{title:Xe,isOpen:X,onClose:Y,images:ie})]})},aa=i.memo((function(){const{albumId:e}=(0,o.W4)(),a=`spotify:album:${e}`,{loading:s,error:i,data:l,canLoadOffline:n}=(0,Ze.g)(a);return s||!l?(0,P.jsx)(I.K,{hasError:null!==i,loadOffline:n,errorMessage:h._s.get("error.not_found.title.album")}):(0,P.jsx)(B.y,{surface:N.g.ALBUM,uris:[a],children:(0,P.jsx)(ea,{uri:a,album:l})})}))},38156:(e,a,s)=>{s.d(a,{qs:()=>i});s(41260);const i=(e,a)=>{const s=a?new URLSearchParams(a.search):void 0;return"1"===s?.get(e)}},41956:(e,a,s)=>{s.d(a,{S:()=>i});let i=function(e){return e.I18nSEO="i18nSEO",e.RTPTrackCredits="rtpv2p2",e.I18nAdditionalPages="i18nap",e.RichPlaylistPages="rpp",e.ILRAlbum="ilra",e.ILRAlbumAbove="ilraa",e.ILRAlbumBelow="ilrab",e.ILRShowVariantA="ilrs-a",e.ILRShowVariantB="ilrs-b",e.PlaylistInternalTrackLinks="pitl",e.PlaylistInternalTrackAndArtistLinks="pital",e.AlbumInternalTrackLinks="aitl",e.AlbumInternalTrackAndArtistLinks="aital",e}({})}}]);
//# sourceMappingURL=xpui-routes-album.js.map