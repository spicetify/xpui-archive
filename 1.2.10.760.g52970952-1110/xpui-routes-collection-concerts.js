"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5835],{61527:(e,t,n)=>{n.d(t,{Z:()=>f});var s=n(59496),a=n(46810),o=n(14950),r=n(89396),c=n(20567),i=n(94386),l=n(94686),d=n(41799);const m="MUiWCNTfb6FcSwVPvQ1V",g="UAk3bMhekwJTV_wIyfsT",u="X9w6LPfKsZHMCs38sVIQ",v="NXn5KjeUOjLGlAfS1Gao",h="N0wgFMDDvCiby4QB5kLJ",p="nloNe2BLRHjz9dxlwfLU",j="JzXND83mXvcEuntCNR34",x="GR08E4L_rOGljyQQX30R";var y=n(4637);const f=(0,s.memo)((e=>{const{concert:t,isVirtual:n,onClick:s}=e,{venue:f,location:N}=t,b=t.artists[0],I=(0,l.CH)(t.startDate.localDate);return(0,y.jsxs)(r.Link,{to:`/concert/${t.id}`,className:m,onClick:s,children:[b.imageUri&&(0,y.jsx)(c.Z,{children:(0,y.jsx)("div",{role:"img",className:x,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${b.imageUri})`}})}),(0,y.jsx)("time",{className:g,dateTime:t.startDate.localDate,children:(0,y.jsx)(a.D,{as:"h5",variant:"mestoBold",children:(0,l.jx)(I)})}),(0,y.jsxs)("div",{className:u,dir:"auto",children:[(0,y.jsxs)(a.D,{as:"h2",className:j,variant:"mesto",children:[(0,i.FO)(I)," • ",(0,l.hK)(I)]}),(0,y.jsx)(a.D,{as:"h2",variant:"cello",weight:"bold",className:v,children:(0,d.ij)(t)}),(0,y.jsx)("div",{className:h,children:(0,y.jsx)(a.D,{as:"h2",className:p,variant:"mesto","data-testid":"location-name",children:n?f:[f,N].join(o.ag.getSeparator())})})]})]})}))},61283:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ye});var s=n(59496),a=n(84875),o=n.n(a),r=n(61740),c=n(92053),i=n(76492),l=n(91369),d=n(11030),m=n(91930),g=n(20658),u=n(46810),v=n(6948),h=n(10854),p=n(14950),j=n(97126),x=n(81555),y=n(80206),f=n(30283),N=n(470),b=n(69544),I=n(81091),_=n(90815),k=n(54353),w=n(79359),C=n(58309),S=n(3831),D=n(93630),F=n(17697),O=n(69289),E=n(51958),G=n(58866),U=n(88211),L=n(89396),P=n(94686),H=n(41799);const M="cELOd04or4B6BbTbNWA7",T="CHJYbX33oDik9u4n4ohH",W="woQ0wEe6FL4lsGW05bsb",B="KTDREr8pDWjrmnzXzZ2z",R="UUTvdEOH2v_rejoXdl9Z",$="cBbTozR921ppaoNZP0Uh",Q="SNyyQ0t_VvlWzzB9li7v",A="lwO4iko6mhCUgZN1s9AW",K="akvZI06vqHOow1pOL29J",Z="WWZp3WM0maWJzl2qWEHE",z="YdkAHxbDekz9SiAxHG6M",J="AK37djOBJ2BuJOGuG1kQ",q="JfYURQbEA_ntMsMZV6tK",V="du0mOGaZfHg3hsHwRMIu",X="Rvzy4ltiiHIp9mvlxf0c";var Y=n(4637);const ee=(0,s.memo)((e=>{const{concert:t,position:n,modalSpec:a}=e,{id:o,venue:r,location:c}=t,i=t.startDate.localDate,l=(0,P.CH)(i),d="ONLINE"===t.category,m=(0,s.useMemo)((()=>a?.eventRowFactory({position:n,uri:`spotify:concert:${t.id}`})),[a,n,t]),g=(0,b.$P)();return(0,Y.jsxs)(L.Link,{to:`/concert/${t.id}`,className:A,onClick:()=>{m&&g.logInteraction(m.hitUiNavigate({destination:`/concert/${o}`}))},children:[(0,Y.jsxs)("div",{className:K,"aria-hidden":!0,children:[(0,Y.jsx)(u.D,{as:"h5",variant:"mestoBold",className:Z,children:(0,P.jw)(l)}),(0,Y.jsx)(u.D,{as:"h1",variant:"cello",className:z,children:(0,P.wf)(l)})]}),(0,Y.jsxs)("div",{className:J,children:[(0,Y.jsx)(u.D,{as:"div",variant:"violaBold",className:q,"data-testid":"event-title",children:(0,H.Yl)(t)}),(0,Y.jsx)(F.T,{children:(0,P.jx)(l)}),(0,Y.jsxs)(u.D,{as:"div",variant:"viola",className:V,children:[(0,P.FO)(l)," • ",(0,P.hK)(l)]}),(0,Y.jsx)(u.D,{as:"div",variant:"viola",className:X,"data-testid":"event-venue",children:d?r:[r,c].join(p.ag.getSeparator())})]})]},t.id)})),te=(0,s.memo)((e=>{const{event:t,locationName:n,onClose:a,feedSpec:o}=e,r=t?.concerts[0]?.concert,c=r?.artists[0],i=(0,s.useMemo)((()=>o?.groupedEventModalFactory({uri:c?.uri||""})),[o,c]),l=(0,b.$P)(),d=(0,b.Wi)(i);if(!t||!r||!c)return null;const m=()=>{i&&l.logInteraction(i.closeButtonFactory().hitUiHide()),a()};return(0,Y.jsx)(U.Z,{contentLabel:p.ag.get("live_events.label"),isOpen:!0,className:M,onRequestClose:m,children:(0,Y.jsxs)("section",{className:T,ref:d,children:[(0,Y.jsx)("div",{className:W,children:(0,Y.jsx)(ne,{"aria-label":p.ag.get("close"),iconOnly:O.k,buttonSize:"sm",onClick:m})}),(0,Y.jsxs)("div",{className:B,children:[(0,Y.jsx)(E.E,{height:"48",width:"48",className:R,src:c.imageUri}),(0,Y.jsxs)("div",{className:$,children:[(0,Y.jsx)(u.D,{as:"h3",variant:"cello",className:Q,"data-testid":"event-venue",children:c.name}),(0,Y.jsx)(u.D,{as:"h3",variant:"mesto","data-testid":"event-venue",children:`${p.ag.get("concerts.count_near_location",t.concerts.length,n)}`})]})]}),t.concerts.map(((e,t)=>(0,Y.jsx)(ee,{concert:e.concert,position:t,modalSpec:i},e.concert.id)))]})})}));var ne=(0,D.ZP)(G.o).withConfig({displayName:"ConcertFeedGroupedModal___StyledButtonTertiary",componentId:"sc-1o845wh-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"}),se=n(9102),ae=n(81607),oe=n(85980);const re=async()=>(await(0,oe.getSavedConcertsHub)(ae.b.getInstance())).body,ce=e=>{const[,{geonameId:t}]=e.queryKey;return(async e=>(await(0,oe.getConcertsForUser)(ae.b.getInstance(),e)).body)(t)},ie=e=>{const[,,{geonameId:t}]=e.queryKey;return(async(e=1,t)=>(await(0,oe.getAllConcerts)(ae.b.getInstance(),{page:e,geonameId:t})).body)(e.pageParam,t)},le=e=>{const[,,{geonameId:t}]=e.queryKey;return(async e=>(await(0,oe.getConcertsHub)(ae.b.getInstance(),void 0,e)).body)(t)},de=6e5,me=/^(\d+)/,ge=(e,t)=>{const n=(()=>{const{location:e}=(0,c.UO)(),[,t]=e?.match(me)||[];if(t)try{return parseInt(t,10)}catch(e){return}})(),[s]=(0,i.lr)(),a=s.get("filter")?.trim();return e?{type:"all",geonameId:n}:t&&"saved"===a?{type:"saved"}:{type:"recommended",geonameId:n}};var ue=n(5335),ve=n(49340),he=n(63459),pe=n(61527),je=n(20567);const xe="pU4WoqT8T6PmtjPbFtK0",ye="FC5Y_KFJ9rJyTpydqtOW",fe="AAYLcavkBdCuebn9AQxT",Ne="lYHCmxpdReachiOORWGo",be="JtKEdtTtcK7s6EpGecaC",Ie="myHDa69cI5CHC8fhIhkG",_e=(0,s.memo)((e=>{const{event:t,onClick:n}=e,a=(0,s.useCallback)((()=>n(t)),[t,n]),o=(0,P.CH)(t.openingDate),r=(0,P.CH)(t.closingDate),c=t.concerts[0].concert,i=c.artists[0];return(0,Y.jsxs)(G.o,{onClick:a,className:xe,component:"div",role:"button",children:[i.imageUri&&(0,Y.jsx)(je.Z,{children:(0,Y.jsx)("div",{role:"img",className:Ie,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${i.imageUri})`}})}),(0,Y.jsx)("time",{className:ye,dateTime:o.toISOString(),children:(0,Y.jsx)(u.D,{as:"h5",variant:"mestoBold",children:(0,P.Bc)(o,r)})}),(0,Y.jsxs)("div",{className:fe,dir:"auto",children:[(0,Y.jsx)(u.D,{as:"h2",variant:"cello",weight:"bold",className:Ne,children:(0,H.ij)(c)}),(0,Y.jsx)("div",{className:be,children:(0,Y.jsx)(u.D,{as:"h2",variant:"mesto","data-testid":"concerts-count",children:p.ag.get("concerts.count",t.concerts.length)})})]})]})})),ke=(0,s.memo)((e=>{const{event:t,position:n,sectionSpec:a,onOpenGroupedEvent:o}=e,r=t.concerts[0]?.concert,c=r?.id,i=r&&(0,he.g3)(r.id).toURI(),l=(0,b.$P)(),d=(0,s.useMemo)((()=>a?.eventCardFactory({identifier:c??"",position:n,uri:i??""})),[a,c,i,n]),m=(0,b.Wi)(d),g=e=>{o(e),d&&l.logInteraction(d.hitUiReveal())};if(t.concerts.length>1)return(0,Y.jsx)("div",{ref:m,children:(0,Y.jsx)(_e,{event:t,onClick:g})});return(0,Y.jsx)("div",{ref:m,children:(0,Y.jsx)(pe.Z,{concert:r,isVirtual:"online"===t.source,onClick:()=>{d&&l.logInteraction(d.hitUiNavigate({destination:i}))}})})}));var we=n(74599);const Ce="MVPegsivznZB6gdkcnkH",Se="MlK79hskRbFrN2OBjMkl",De="VxaXFH9Uq1NU0LtsVhIu",Fe="UDVDNa40iTSPS9uHCG7Q",Oe="ofURwIKv0qEXJGTraIis",Ee="RLoSoo6mmRgHfwNfLxAj",Ge="fN_lJHkYih9H3j9YSEzS",Ue="LOJZO2MnGW5dCIawF767",Le="tyc7QRlEJigVFIAeLGOB",Pe="PoljWhTLU3MKqIx2gSPY",He="ajxCNAuBJSgYfKUUBWBT",Me="WR2h2Li5XTrBn_Rdme_k",Te="WNhsvOyu4doInF525pLE",We="qSR4imCvzdznIQ4F2kBO",Be=(0,s.memo)((e=>{const{title:t="",identifier:n,position:a,events:o,feedSpec:r,onOpenGroupedEvent:c}=e,i=(0,s.useMemo)((()=>r?.eventSectionFactory({identifier:n,position:a})),[r,n,a]),l=(0,b.Wi)(i);return 0===o.length?null:(0,Y.jsx)("div",{className:Ce,ref:l,children:(0,Y.jsx)(we.ZP,{value:"headered-grid",index:a,children:(0,Y.jsx)(S.P,{total:o.length,title:t,showAll:!0,children:o.map(((e,t)=>{const n=e.concerts[0]?.concert;return(0,Y.jsx)(ke,{event:e,position:t,sectionSpec:i,onOpenGroupedEvent:c},n.id)}))})})})})),Re=(e,t)=>{if(!e)return"/concerts";const n=t?.normalize().replaceAll(/\W+/g,"-");return n?`/concerts/location/${e}-${n}`:`/concerts/location/${e}`},$e=10;const Qe=(0,s.memo)((e=>{const{eventGroups:t,locationName:n,isLoading:a,feedSpec:o,onOpenGroupedEvent:r}=e,c=(0,s.useMemo)((()=>o?.eventSectionFactory({identifier:"all",position:0})),[o]),i=(0,b.Wi)(c);return a?(0,Y.jsx)(C.h,{hasError:!1,errorMessage:""}):t?0===t.length||0===t[0].events.length?(0,Y.jsx)(w.u,{title:p.ag.get("concerts.error.no_concerts_found_title"),message:p.ag.get("concerts.error.no_concerts_found_message",n),renderInline:!0}):(0,Y.jsx)("div",{ref:i,children:t.map((e=>(0,Y.jsx)("div",{className:Te,children:(0,Y.jsx)(S.P,{total:e.events.length,title:p.ag.formatDate(new Date(`${e.date}T00:00:00`),{weekday:"long",day:"numeric",month:"long",year:"numeric"}),showAll:!0,children:e.events.map(((e,t)=>{const n=e.concerts[0]?.concert;return(0,Y.jsx)(ke,{event:e,position:t,sectionSpec:c,onOpenGroupedEvent:r},n.id)}))})},e.date)))}):null})),Ae=(0,s.memo)((e=>{const{geonameId:t,spec:n}=e,a=(0,c.s0)(),[o]=(0,i.lr)(),[r,l]=(0,s.useState)(),d=(0,ve.o)(),m=(0,s.useMemo)((()=>n?.headerFactory()),[n]),{data:g,isLoading:u,hasNextPage:v,isFetchingNextPage:h,fetchNextPage:j}=(e=>(0,se.useInfiniteQuery)(["concerts","all",{geonameId:e}],ie,{staleTime:de,keepPreviousData:!0,getNextPageParam:(e,t)=>{if(!(t.length>=50)&&0!==e.events.length)return t.length+1}}))(t),x=(e=>(0,se.useQuery)(["concerts","popular",{geonameId:e}],le,{staleTime:de,keepPreviousData:!0}))(t),y=(0,s.useMemo)((()=>function(e){if(0===e.length)return[];if(0===e[0].events.length)return[];const t=[];let n={date:e[0].events[0].openingDate.slice(0,$e),events:[]};for(const s of e)for(const e of s.events){const s=e.openingDate.slice(0,$e);n.date!==s&&(t.push(n),n={date:s,events:[]}),n.events.push(e)}return t.push(n),t}(g?.pages??[])),[g?.pages]),f=g?.pages[0]?.userLocation||p.ag.get("concerts.default_location"),N=e=>{l(e);const t=e.concerts[0]?.concert.artistUris[0];d({type:"click",intent:"open-grouped-live-event",targetUri:t})};return(0,Y.jsxs)("div",{children:[(0,Y.jsx)(k.$,{children:`${p.ag.get("concerts_shows_in")} ${f}`}),(0,Y.jsx)("div",{className:Ce,"data-testid":"location-selector",children:(0,Y.jsx)(ue.Z,{handleLocationChange:e=>{d({type:"click",intent:"change-live-events-location"}),e?.geonameId&&a({pathname:Re(e.geonameId,e.location),search:`?${o.toString()}`})},locationStr:f,headerSpec:m})}),(0,Y.jsx)(Qe,{isLoading:u,locationName:f,eventGroups:y,onOpenGroupedEvent:N,feedSpec:n}),v&&(0,Y.jsx)("div",{className:We,children:(0,Y.jsx)(_.P,{disabled:h,onClick:()=>{j()},children:p.ag.get("concerts.load_more")})}),x.data&&(0,Y.jsx)(Be,{title:p.ag.get("concerts_popular_near_you"),identifier:"popular",position:1,events:x.data.events,onOpenGroupedEvent:N,feedSpec:n}),(0,Y.jsx)(te,{event:r,locationName:f,feedSpec:n,onClose:()=>l(void 0)})]})})),Ke=(0,s.memo)((e=>{const{enableInterestedFeature:t=!1,isLoading:n,events:s,locationName:a,spec:o,onOpenGroupedEvent:r}=e;if(n)return(0,Y.jsx)(C.h,{hasError:!1,errorMessage:""});if(0===s.length)return(0,Y.jsx)(w.u,{title:p.ag.get("concerts.error.no_concerts_found_title"),message:p.ag.get("concerts.error.no_concerts_found_message",a),renderInline:!0});const c=(e=>{const t={popular:[],recommended:[],online:[]};return e.forEach((e=>{switch(e.source){case"recommendation":t.recommended.push(e);break;case"popular":t.popular.push(e);break;case"online":t.online.push(e)}})),t})(s);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(Be,{title:p.ag.get("concerts_upcoming_virtual_events"),identifier:"online",position:0,events:c.online,onOpenGroupedEvent:r,feedSpec:o}),(0,Y.jsx)(Be,{title:t?"":p.ag.get("concerts_recommended_for_you"),identifier:"recommended",position:1,events:c.recommended,onOpenGroupedEvent:r,feedSpec:o}),(0,Y.jsx)(Be,{title:p.ag.get("concerts_popular_near_you"),identifier:"popular",position:2,events:c.popular,onOpenGroupedEvent:r,feedSpec:o})]})}));var Ze=n(79750),ze=n(73471);const Je=(0,s.memo)((e=>{const{enableInterestedFeature:t=!1,geonameId:n,spec:a}=e,o=(0,c.s0)(),[r,i]=(0,s.useState)(),l=(0,ve.o)(),d=(0,s.useMemo)((()=>a.headerFactory()),[a]),{data:m,isLoading:g}=(e=>{const t=(0,se.useQueryClient)();return(0,se.useQuery)(["concerts",e],ce,{staleTime:de,keepPreviousData:!0,onSuccess(n){if(e.geonameId||!n.userLocationGeonameId)return;const s=parseInt(n.userLocationGeonameId,10),a=["concerts",{...e,geonameId:s}];t.setQueryData(a,(()=>n))}})})({geonameId:n}),u=m?.userLocation||p.ag.get("concerts.default_location");return((e={})=>{(0,se.useQuery)(["family-duo-concert-recommendations",e],Ze.P,{enabled:(0,v.W6)(ze.hj)})})({geonameId:e.geonameId}),(0,Y.jsxs)("div",{children:[(0,Y.jsx)(k.$,{children:`${p.ag.get("concerts_shows_in")} ${u}`}),(0,Y.jsx)("div",{className:Ce,"data-testid":"location-selector",children:(0,Y.jsx)(ue.Z,{handleLocationChange:e=>{l({type:"click",intent:"change-live-events-location"}),e?.geonameId&&o(Re(e.geonameId,e.location))},locationStr:u,headerSpec:d})}),(0,Y.jsx)(Ke,{enableInterestedFeature:t,isLoading:g,events:m?.events||[],locationName:u,spec:a,onOpenGroupedEvent:e=>{i(e);const t=e.concerts[0]?.concert.artistUris[0];l({type:"click",intent:"open-grouped-live-event",targetUri:t})}}),(0,Y.jsx)(te,{event:r,locationName:u,feedSpec:a,onClose:()=>i(void 0)})]})})),qe=(0,s.memo)((e=>{const{spec:t}=e,n=(0,se.useQuery)("savedConcerts",re,{keepPreviousData:!1});return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(k.$,{children:`${p.ag.get("live_events.label")}`}),n.data?.events.length?(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsx)(Be,{title:p.ag.get("concerts_upcoming"),identifier:"saved",position:0,events:n.data?.events,feedSpec:t,onOpenGroupedEvent:()=>{}})}):(0,Y.jsxs)("div",{className:Ue,children:[(0,Y.jsx)(u.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:He,children:p.ag.get("concerts_interested_in_live_events")}),(0,Y.jsx)(u.D,{as:"p",className:Me,children:p.ag.get("concerts_no_events_description")}),(0,Y.jsx)(L.default,{to:"/concerts",className:Le,children:(0,Y.jsx)(_.P,{as:"span",className:Pe,children:p.ag.get("concerts_browse_more_events")})})]})]})})),Ve=l.vI0,Xe={url:"https://tickets.spotifycdn.com/partner-assets/Hub%20header%20image/Desktop%20header%20IMG.png",width:2736,height:720},Ye=()=>{const{isAnonymous:e}=(0,r.v9)(N.Gg),t=(0,c.TH)(),n=t.pathname+t.search,a=(0,b.$P)(),l=(0,v.W6)(I.tp),{spec:_}=(0,b.fU)(h.y,{}),k=ge(e,l),w=(0,s.useMemo)((()=>_.headerFactory().liveEventsNavbarFactory({uri:n,reason:k.type})),[_,k,n]),C=(0,b.Wi)(w),S=(e,t)=>{const n=_.headerFactory().liveEventsNavbarFactory({uri:e,reason:t}).hitUiNavigate({destination:e});a.logInteraction(n)};return(0,Y.jsxs)("section",{className:Se,children:[(0,Y.jsxs)(x.gF,{size:x.fR.SMALL,backgroundColor:Ve,backgroundImages:[Xe],children:[(0,Y.jsx)(x.sP,{children:(0,Y.jsx)(x.xd,{children:p.ag.get("live_events.label")})}),(0,Y.jsx)(y.W,{children:(0,Y.jsx)(f.i,{text:p.ag.get("live_events.label")})})]}),(0,Y.jsxs)("div",{className:De,children:[(0,Y.jsx)(j.I,{backgroundColor:Ve}),!e&&l&&(0,Y.jsx)("div",{className:Oe,ref:C,children:(0,Y.jsx)(d.l,{list:(0,Y.jsx)("nav",{"aria-label":"live events navbar",children:(0,Y.jsxs)(m.F,{children:[(0,Y.jsx)(g.c,{id:"recommended_for_you_link",label:p.ag.get("concerts_recommended_for_you"),active:"recommended"===k.type,className:o()(Ge,{[Ee]:"recommended"===k.type}),component:i.rU,to:"/concerts",onClick:()=>S("/concerts","recommended"),sentenceCase:!0},0),(0,Y.jsx)(g.c,{id:"concerts_interested_link",label:p.ag.get("concerts_interested"),active:"saved"===k.type,className:o()(Ge,{[Ee]:"saved"===k.type}),component:i.rU,to:"/concerts?filter=saved",onClick:()=>S("/concerts?filter=saved","saved"),sentenceCase:!0},1)]})})})}),(0,Y.jsxs)("div",{className:Fe,children:["recommended"===k.type&&(0,Y.jsx)(Je,{geonameId:k.geonameId,spec:_,enableInterestedFeature:l}),"all"===k.type&&(0,Y.jsx)(Ae,{geonameId:k.geonameId,spec:_}),"saved"===k.type&&(0,Y.jsx)(qe,{spec:_}),(0,Y.jsx)(u.D,{variant:"finale",semanticColor:"textSubdued",children:p.ag.get("live_events.disclaimer")})]})]})]})}},79750:(e,t,n)=>{n.d(t,{g:()=>r,P:()=>o});var s=n(81607),a=n(11715);const o=async e=>{const[t,{geonameId:n}]=e.queryKey,o=await((e,t)=>e.build().withMethod("GET").withHost(a.gH).withPath("/concerts/").withEndpointIdentifier("/cooper/concerts").withQueryParameters({...t&&{geonameId:t}}).withoutMarket().send())(s.b.getInstance(),n);return o.body},r=async e=>{const[t,{artists:n}]=e.queryKey,o=await((e,t)=>e.build().withMethod("POST").withHost(a.gH).withPath("/followers/").withEndpointIdentifier("/cooper/followers").withHeaders([{key:"content-type",value:"application/json"},{key:"accept",value:"application/json"}]).withBody(JSON.stringify({artists:t})).withoutMarket().send())(s.b.getInstance(),n);return o.body}}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.js.map