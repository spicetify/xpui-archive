"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7521],{97284:(e,s,t)=>{t.d(s,{n:()=>D});var n=t(59496),i=t(84875),a=t.n(i),l=t(52529),r=t(89518),o=t(71817),c=t(2157),u=t(50834),d=t(85830),m=t(17956),x=t(3099);var h=t(44858),g=t(11945),p=t(68725);const j="BkpKedcdaMGbvgXMlmcg",b="muYk5XIwKmqR9iNibk_f",v="OEFWODerafYHGp09iLlA",f="m20ShRDiGGDpJ5LSABTi",y="Hvv0e7WKQ4kyftgSQJhg",C="yxf_6IsQEmHjijEBUMTP",k="oaNVBli46GtVjaQKB15g",N="JdlKTdpMquftpMwwegZo",w="Nts_ArOCGeROTDZND3M6",S="FvDsfgxSvLvL3q8d7nQv";var I=t(4637);const P=({items:e,activeItemId:s})=>(0,I.jsx)(g.v,{children:e.map((e=>e.disabled?(0,I.jsx)(p.s,{disabled:!0,role:"menuitemradio",className:C,onClick:e.handleClick,children:e.title},e.uri):(0,I.jsx)(p.s,{role:"menuitemradio",to:e.to,end:!0,"aria-checked":e.itemId===s,className:({isActive:e})=>a()(C,{[k]:e}),onClick:e.handleClick,children:e.title},e.uri)))});var q=t(93971);const D=(0,n.memo)((function({isCentered:e,links:s,landmarkLabel:t,className:i}){const g=(0,n.useRef)(null),[p,C]=(0,n.useState)([]),[D,E]=(0,n.useState)(0),[U,O]=(0,n.useState)([]),F=function(){const[e,s]=(0,n.useState)(window.innerWidth),{scrollNodeChildRef:t}=(0,n.useContext)(m.VX),i=(0,d.y1)((e=>{e?.width&&s(e.width)}),250);return(0,x.y)({refOrElement:t,observeOnly:"width",onResize:i}),e}()??1/0,{pathname:R}=(0,l.TH)(),T=s.find((e=>e.to===R));return(0,n.useEffect)((()=>{g.current&&E(g.current.clientWidth)}),[F]),(0,n.useEffect)((()=>{if(!g.current)return;const e=Array.from(g.current.children).map((e=>e.clientWidth));C(e)}),[s]),(0,n.useEffect)((()=>{if(!g.current)return;if(p.slice(0,-1).reduce(((e,s)=>e+s),0)<=D)return void O([]);const e=p.reduce(((e,s)=>e>s?e:s),0),s=[];let t=e;p.forEach(((e,n)=>{D>=t+e?t+=e:s.push(n)})),O(s)}),[D,p]),(0,I.jsx)("nav",{className:a()(i,j),"aria-label":t,children:(0,I.jsxs)("ul",{className:e?b:w,ref:g,children:[s.filter(((e,s)=>!U.includes(s))).map((e=>{const s=e?.render??(e=>e);return(0,I.jsx)(n.Fragment,{children:s((0,I.jsx)("li",{className:v,children:e.disabled?(0,I.jsx)("div",{className:N,children:(0,I.jsx)(r.D,{variant:"mestoBold",children:e.title})}):(0,I.jsx)(q.O,{end:!0,className:({isActive:e})=>a()(N,{[k]:e}),to:e.to,onClick:e.handleClick,children:(0,I.jsx)(r.D,{variant:"mestoBold",children:e.title})})}))},e.to)})),U.length||0===p.length?(0,I.jsx)("li",{className:v,children:(0,I.jsx)(h.xV,{renderInline:!0,menu:(0,I.jsx)(P,{items:s.filter(((e,s)=>U.includes(s))),activeItemId:T?.itemId}),children:(e,s,t)=>(0,I.jsxs)("button",{className:a()(f,{[y]:T}),type:"button",onClick:s,ref:t,children:[(0,I.jsx)(r.D,{variant:"mestoBold",children:T?T.title:u.ag.get("more")}),e?(0,I.jsx)(o.U,{iconSize:16,className:S,"aria-hidden":"true"}):(0,I.jsx)(c.i,{iconSize:16,className:S,"aria-hidden":"true"})]})})}):null]})})}))},58086:(e,s,t)=>{t.d(s,{I:()=>x});var n=t(72373),i=t(59496),a=t(50834),l=t(97284),r=t(92263),o=t(24823),c=t(29104);const u="vhW0kRN8JJD5UwW4TdXi";var d=t(4637);const m=()=>{const e=(0,c.Y)(),s=(0,i.useCallback)((e=>(0,d.jsx)(o.v,{placement:"bottomEnd",arrow:"topStart",title:a.ag.get("pick-and-shuffle.upsell.title.queue"),children:e})),[]),t=(0,i.useMemo)((()=>[{title:a.ag.get("playback-control.queue"),itemId:"queue",to:"/queue",uri:"spotify:app:queue",render:s,disabled:e},{title:a.ag.get("view.recently-played"),itemId:"history",to:"/history",uri:"spotify:app:history"}]),[e,s]);return(0,d.jsx)(r.w,{children:(0,d.jsx)(l.n,{className:u,links:t})})},x=({children:e})=>{const s=(0,n.nF)();return(0,d.jsxs)("section",{className:"contentSpacing",children:[e,s&&(0,d.jsx)(m,{})]})}},18519:(e,s,t)=>{t.r(s),t.d(s,{default:()=>he});var n=t(59496),i=t(84875),a=t.n(i),l=t(89518),r=t(70725),o=t(73438),c=t(50834),u=t(67497),d=t(47517),m=t(61525),x=t(40982),h=t(24106),g=t(13019),p=t(64641),j=t(13942),b=t(4637);const v=({onEndSession:e})=>{const[s,t]=(0,n.useState)(!1);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.P,{size:"small",onClick:()=>t(!0),children:c.ag.get("web-player.social-connect.end-session.end-session-button")}),(0,b.jsx)(j.Q,{isOpen:s,titleText:c.ag.get("web-player.social-connect.end-session.title"),confirmText:c.ag.get("web-player.social-connect.end-session.confirm"),cancelText:c.ag.get("web-player.social-connect.end-session.cancel"),onConfirm:async()=>{await e(),t(!1)},onClose:()=>t(!1),"aria-label":c.ag.get("web-player.social-connect.end-session.title")})]})};var f=t(63546);const y=()=>{const e=(0,f.g)();return(0,b.jsx)(p.P,{size:"small",onClick:e,children:c.ag.get("web-player.social-connect.invite-button")})},C=({onLeaveSession:e})=>{const[s,t]=(0,n.useState)(!1);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.P,{size:"small",onClick:()=>t(!0),children:c.ag.get("web-player.social-connect.leave-session.leave-session-button")}),(0,b.jsx)(j.Q,{isOpen:s,titleText:c.ag.get("web-player.social-connect.leave-session.title"),confirmText:c.ag.get("web-player.social-connect.leave-session.leave-session-button"),cancelText:c.ag.get("web-player.social-connect.leave-session.cancel"),onConfirm:async()=>{await e(),t(!1)},onClose:()=>t(!1),"aria-label":c.ag.get("web-player.social-connect.leave-session.leave-session-button")})]})};var k=t(7193),N=t(51710),w=t(45266);const S="aWQPeIBNMoU0Xqu1P_qo",I=e=>(0,b.jsx)(p.P,{...e,component:d.default}),P=({currentSession:e,username:s})=>{const{session_members:t}=e,n=t.length+2>3?t.length-3:0,i=(0,w.N)(e,s,{userFirst:!0});return(0,b.jsxs)(I,{size:"small",className:S,to:k.V.PARTICIPANTS_PAGE,children:[(0,b.jsx)(N.o,{users:i,maxSlots:3,withoutOverflowBadge:!0}),n>0&&(0,b.jsx)(l.D,{variant:"violaBold",semanticColor:"textBase",children:`+${n}`})]})},q="_2ooZqm3FPtNKsgn9Yks",D="PCn7b7Zs2xPSYseEvUPQ",E=({className:e,emptyStateComponent:s})=>{const{currentSession:t,deleteSession:n,leaveSession:i}=(0,g.A)(),a=(0,h.v9)((({session:e})=>e.user?.id));if(!t?.active)return s??null;const r=t.session_members.find((e=>e.id===t.session_owner_id));return(0,b.jsxs)("div",{className:e,children:[(0,b.jsx)("div",{className:q,children:(0,b.jsx)(l.D,{as:"h1",variant:"canon",semanticColor:"textBase",children:c.ag.get("web-player.social-connect.session-info.title",{host:r?.display_name??""})})}),(0,b.jsxs)("div",{className:D,children:[(0,b.jsx)(P,{currentSession:t,username:a}),(0,b.jsx)(y,{}),t.is_session_owner?(0,b.jsx)(v,{onEndSession:n}):(0,b.jsx)(C,{onLeaveSession:i})]})]})},U=e=>(0,b.jsx)(x.L,{onError:e=>{(0,m.vK)(e,"GroupSessionQueueHeader")},SuspenseFallback:()=>e.emptyStateComponent??null,children:(0,b.jsx)(E,{...e})});var O=t(35992),F=t(3701),R=t(71308),T=t(85730);const Q=({onClick:e})=>(0,b.jsx)(p.P,{onClick:e,buttonSize:"sm",children:c.ag.get("queue.clear-queue")});var _=t(17454),A=t(66863),L=t(51418),B=(t(17594),t(71126));const M="i9rTNwKyT_NMDghd8q65",$="DXBMXJD8Zoj4V8MxIVTB",G="UEtqSfWDubkNdPIaEkfA",z="I_Rc74Je7W4sk6KAVR05",W=n.memo((function({onClose:e,onConfirm:s,isOpen:t,itemCount:i}){const r=(0,n.useCallback)((t=>{s(),e(t)}),[s,e]),o=c.ag.get("queue.confirm-title",i);return(0,b.jsx)(B.Z,{shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,onRequestClose:e,contentLabel:o,isOpen:t,children:(0,b.jsxs)("div",{className:M,children:[(0,b.jsx)(l.D,{as:"h2",variant:"cello",className:$,children:o}),(0,b.jsx)(l.D,{as:"p",variant:"mesto",className:G,paddingBottom:_.g4,children:c.ag.get("queue.confirm-message")}),(0,b.jsxs)("div",{className:a()("encore-light-theme",z),children:[(0,b.jsx)(A.o,{onClick:e,children:c.ag.get("queue.cancel-button")}),(0,b.jsx)(L.D,{onClick:r,children:c.ag.get("queue.confirm-button")})]})]})})}));var X=t(20978),K=t(56388),H=t(70613),J=t(18535),V=t(94638),Y=t(33836),Z=t(79445),ee=t(7431),se=t(27147),te=t(10315);const ne=n.memo((function({tracks:e,ariaLabel:s,contextUri:t,currentlyPlayingContextUri:i=t,rowNumberOffset:a=0,section:l,usePlayContextItem:r}){const o=(0,V.o)(),u=(0,F.g)(),d=(0,n.useCallback)(((e,s)=>{o({intent:"remove-from-queue",type:"click"}),u.removeFromQueue(e).then(s)}),[u,o]),m=(0,n.useCallback)(((e,s)=>{if((0,Z.iw)(e)){const n=(0,se.X)(e.show?.images,{desiredSize:40});return(0,b.jsx)(te.p,{index:s,rowNumberOffset:a,imgUrl:n?.url||"",uri:(0,Y.$)(e),uid:e.uid??e.uri,contextUri:t,duration_ms:e.duration.milliseconds,name:e.name,artists:[],album:{name:e.show.name,uri:e.show.uri},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:te.j.EPISODE,section:l,usePlayContextItem:r,isAutoPlay:"autoplay"===e.provider},`${s}${a}${e.uid}`)}if((0,Z.G7)(e)){const n=(0,se.X)(e.images||void 0,{desiredSize:40});return(0,b.jsx)(te.p,{index:s,rowNumberOffset:a,imgUrl:n?.url||"",uri:(0,Y.$)(e),uid:e.uid??e.uri,contextUri:t,duration_ms:e.duration.milliseconds,name:e.name,artists:[],album:{name:e.book.name,uri:e.book.uri},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:te.j.CHAPTER,section:l,usePlayContextItem:r,isAutoPlay:"autoplay"===e.provider},`${s}${a}${e.uid}`)}if((0,Z.k6)(e)){const n=(0,se.X)(e.images||void 0,{desiredSize:40});return(0,b.jsx)(te.p,{index:s,rowNumberOffset:a,imgUrl:n?.url||"",uri:e.uri,uid:e.uid??e.uri,contextUri:t,duration_ms:e.duration.milliseconds,name:e.advertiser??e.title??c.ag.get("ad-formats.advertisement"),artists:[],album:{name:"",uri:""},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:te.j.AD,section:l,usePlayContextItem:r,isAutoPlay:"autoplay"===e.provider,isEnhanced:!1},`${s}${a}${e.uid}`)}if((0,Z.G_)(e)||(0,Z.RB)(e)){const n=(0,se.X)(e?.album?.images,{desiredSize:40}),o=e.type===ee.p.TRACK?e:null;return(0,b.jsx)(te.p,{index:s,rowNumberOffset:a,imgUrl:n?.url||"",uri:(0,Y.$)(e),uid:e.uid??e.uri,contextUri:t,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:o?.isExplicit??!1,isPlayable:!0,isMOGEFRestricted:o?.is19PlusOnly??!1,type:o?.isLocal?te.j.LOCAL:te.j.TRACK,section:l,usePlayContextItem:r,isAutoPlay:"autoplay"===e.provider,isEnhanced:(0,J.$)(e),trackContextUri:e.metadata?.context_uri??i},`${s}${a}${e.uid}`)}return(0,b.jsx)(H.Lb,{height:`${H.dN}px`})}),[a,t,i,l,r]),x=(0,n.useMemo)((()=>[H.QD.INDEX,H.QD.TITLE_AND_ARTIST,H.QD.ALBUM,H.QD.DURATION]),[]),h=(0,n.useCallback)((e=>e.uri),[]),g=(0,n.useCallback)((e=>e.uid??e.uri),[]);return(0,b.jsx)(H.Pv,{ariaLabel:s,tracks:e,nrTracks:e.length,onRemove:d,renderRow:m,resolveUri:h,resolveUid:g,columns:x})}));var ie=t(68466);const ae="rHpv7osDRvs3SUPMpQ_g",le="DG9CsoFIptJhAneKoo_F",re="jf2HafzDEI9jn7Yo05eM",oe="H3Puuvc2nV0GoZRrfpRS",ce="HckHyQocDDePWQL2baOY",ue=()=>{const{uri:e,description:s,current:t,nextUp:i,queued:m,isEmpty:x,hasQueuedTracks:h,hasNextTracks:g}=(0,ie.y)(),{spec:p,logger:j,UBIFragment:v}=(0,T.fU)(r.z,{data:{identifier:o.Wg.NOWPLAYING_QUEUE,uri:e??""}}),f=(0,n.useMemo)((()=>p.nowPlayingSectionFactory()),[p]),y=(0,n.useMemo)((()=>p.nextInQueueSectionFactory()),[p]),C=(0,n.useMemo)((()=>p.nextFromSectionFactory()),[p]),k=(0,F.g)(),[N,w]=(0,n.useState)(!1),S=(0,n.useCallback)((()=>{w(!1)}),[w]),I=(0,n.useCallback)((()=>{k.clearQueue(),w(!1)}),[k]),P=(0,n.useCallback)((()=>{let e;const s=y.clearQueueButtonFactory();m.length>0&&(e=s.hitRemoveItemsFromQueue({numberOfItemsToRemoveFromQueue:m.length}),j.logInteraction(e))}),[j,y,m.length]),q=(0,n.useCallback)((async()=>{P(),w(!0)}),[P]),{usePlayContextItem:D}=(0,R.n)({uri:e??""},{featureIdentifier:"queue"}),E=(0,n.useCallback)((async()=>{if(!g)return;const s=p.nextFromSectionFactory().queueContextLinkFactory().hitUiNavigate({destination:e??""});j.logInteraction(s)}),[g,j,p,e]);return x?(0,b.jsx)(X.Q,{}):(0,b.jsxs)("div",{className:ae,children:[(0,b.jsx)(u.$,{children:c.ag.get("queue.page-title")}),(0,b.jsx)(U,{className:le,emptyStateComponent:(0,b.jsx)(l.D,{as:"h1",variant:"canon",semanticColor:"textBase",className:le,children:c.ag.get("playback-control.queue")})}),t&&e&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.D,{as:"h2",variant:"balladBold",semanticColor:"textSubdued",children:c.ag.get("queue.now-playing")}),(0,b.jsx)(v,{spec:f,children:(0,b.jsx)(O.JL,{value:"now-playing",children:(0,b.jsx)(ne,{ariaLabel:c.ag.get("queue.now-playing"),tracks:[t],contextUri:e,section:K.h.NowPlaying,usePlayContextItem:D})})})]}),h&&e&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:a()(ce,re),children:[(0,b.jsx)(l.D,{as:"h2",variant:"balladBold",semanticColor:"textSubdued",children:c.ag.get("queue.next-in-queue")}),h&&(0,b.jsx)(Q,{onClick:q})]}),(0,b.jsx)(v,{spec:y,children:(0,b.jsx)(O.JL,{value:"next-in-queue",children:(0,b.jsx)(ne,{ariaLabel:c.ag.get("queue.next-in-queue"),tracks:m,rowNumberOffset:1,contextUri:"spotify:app:queue:NextInQueue",currentlyPlayingContextUri:e,section:K.h.NextInQueue,usePlayContextItem:D})})})]}),g&&e&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.D,{as:"h2",variant:"balladBold",semanticColor:"textSubdued",className:a()(re,"standalone-ellipsis-one-line"),children:s&&!(0,ie.X)(t)?(0,b.jsxs)(b.Fragment,{children:[c.ag.get("queue.next-from"),"Â ",(0,b.jsx)(d.Link,{className:oe,to:e,onClick:E,children:s})]}):c.ag.get("queue.next-up")}),(0,b.jsx)(v,{spec:C,children:(0,b.jsx)(O.JL,{value:"next-up",children:(0,b.jsx)(ne,{ariaLabel:c.ag.get("queue.next-up"),tracks:i,rowNumberOffset:1+(m?.length||0),contextUri:"spotify:app:queue:NextUp",currentlyPlayingContextUri:e,section:K.h.NextUp,usePlayContextItem:D})})})]}),(0,b.jsx)(W,{itemCount:m?.length||0,isOpen:N,onClose:S,onConfirm:I})]})};var de=t(58086),me=t(29104),xe=t(13511);const he=()=>(0,me.Y)()?(0,b.jsx)(xe.InstrumentedRedirect,{to:"/history"}):(0,b.jsx)(de.I,{children:(0,b.jsx)(n.Suspense,{fallback:null,children:(0,b.jsx)(ue,{})})})}}]);
//# sourceMappingURL=xpui-routes-queue-page.js.map