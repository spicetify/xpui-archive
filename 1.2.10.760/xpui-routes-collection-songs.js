"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7553],{19932:(e,t,a)=>{a.r(t),a.d(t,{default:()=>X});var r=a(59496),l=a(61740),n=a(92053),o=a(68325),s=a(90457),i=a(63459),c=a(14950),u=a(47970),d=a(1893),g=a(54353),m=a(79359),f=a(58309),h=a(65403),y=a(13091),p=a(80114),x=a(46906),k=a(3922),j=a(99664),b=a(19859),D=a(7808),F=a(16905),C=a(73880),E=a(14681),I=a(34604),S=a(35387),T=a(69544),w=a(14778),P=a(83025),v=a(10670),L=a(91763),A=a(4637);const R=r.memo((({tracklistDomRef:e})=>{const{spec:t,logger:a}=(0,T.fU)(P.createDesktopSearchBarEventFactory,{}),l=(0,r.useCallback)((()=>{a.logInteraction(t.filterFieldFactory().keyStrokeFilter())}),[a,t]),n=(0,r.useCallback)((()=>{a.logInteraction(t.filterFieldFactory().hitClearFilter())}),[a,t]),o=(0,r.useCallback)((()=>{a.logInteraction(t.sortButtonFactory().hitSort())}),[a,t]);return(0,A.jsxs)("div",{className:y.Z.searchBoxContainer,children:[(0,A.jsx)(r.Suspense,{fallback:null,children:(0,A.jsx)(v.K,{placeholder:c.ag.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:e,onFilter:l,onClear:n})}),(0,A.jsx)(L.l,{columns:k.P0,onSort:o})]})}));var U=a(30748),O=a(71914),_=a(470),B=a(48473),N=a(9102),Q=a(72102),M=a(45447),z=a(6813),G=a(21175),H=a(10896);const $=18e5;const q=r.lazy((()=>Promise.all([a.e(1814),a.e(2031),a.e(682)]).then(a.bind(a,12031)))),K=[x.QD.INDEX,x.QD.TITLE,x.QD.ALBUM,x.QD.ADDED_AT,x.QD.DURATION],V="your_library",W=({data:e,canFilter:t,canSort:a})=>{const{uri:l,name:i,totalLength:b}=e.metadata,E=(0,r.useRef)(null),P=b>0,v=b>0,L=(0,F.Y5)("#5038a0"),{filter:_}=(0,r.useContext)(p.fo),{sortState:N,setSortState:Q}=(0,r.useContext)(k.Gb),{spec:M,logger:z}=(0,T.fU)(s.createDesktopLikedSongsEventFactory,{data:{uri:l}}),G=r.useMemo((()=>M.headerFactory()),[M]),H=r.useMemo((()=>M.tracklistFactory()),[M]);(0,r.useEffect)((()=>{null===N.column&&Q({column:x.QD.ADDED_AT,order:x.kn.DESC})}),[N,Q]);const $=(0,n.ur)(),q=(0,n.TH)(),W="POP"!==$?new URLSearchParams(q.search).get("uri"):null,{isPlaying:Z,togglePlay:X,usePlayContextItem:Y,isActive:J}=(0,S.n)((0,C.I)(l,(0,w.w)(N),_),{featureIdentifier:V,referrerIdentifier:"your_library"}),ee=()=>{const e=(0,O.aK)({isPlaying:Z,isActive:J,spec:M.actionBarFactory().playButtonFactory(),logger:z,uri:l});X({loggingParams:e})},te=(0,r.useCallback)(((e,t)=>{const a=M.actionBarFactory().downloadButtonFactory();t===I.mc.ADD?z.logInteraction(a.hitDownload({itemToDownload:l})):t===I.mc.REMOVE?z.logInteraction(a.hitRemoveDownload({itemToRemoveFromDownloads:l})):t===I.mc.NO_PERMISSION&&z.logInteraction(a.hitUiReveal())}),[z,M,l]);return(0,A.jsxs)("section",{role:"presentation",className:y.Z.playlist,"data-testid":"playlist-page",children:[(0,A.jsx)(g.$,{children:c.ag.get("playlist.page-title",i)}),(0,A.jsx)(D.s,{metadata:e.metadata,isPlaying:Z,togglePlay:ee,backgroundColor:L,specLikedSongs:G}),(0,A.jsx)(u.o,{backgroundColor:L,children:(0,A.jsxs)(u.F,{children:[v?(0,A.jsx)(h.$,{onClick:ee,isPlaying:Z,size:"lg",uri:l,ariaPauseLabel:c.ag.get("playlist.a11y.pause",i),ariaPlayLabel:c.ag.get("playlist.a11y.play",i)}):null,e.metadata.totalLength>0&&(0,A.jsx)(B.v,{uri:l,renderEnabled:()=>(0,A.jsx)(j.v,{uri:l})}),(0,A.jsx)(d.o,{uri:l,canDownload:P,isFollowing:!0,onFollow:()=>{},size:d.q.md,onClick:te}),t&&a&&(0,A.jsx)(T.Nh,{spec:M.actionBarFactory(),children:(0,A.jsx)(R,{tracklistDomRef:E})})]})}),(0,A.jsx)("div",{className:"contentSpacing",children:b>0?(0,A.jsx)(r.Suspense,{fallback:(0,A.jsx)(f.h,{hasError:!1,errorMessage:c.ag.get("error.request-collection-tracks-failure")}),children:(0,A.jsx)(T.Nh,{spec:H,children:(0,A.jsx)(U.p,{nrTracks:b,columns:K,collectionUri:l,scrollToUri:W,usePlayContextItem:Y,outerDomRef:E,spec:H,initialItems:e.contents.items})})}):(0,A.jsx)(m.u,{message:c.ag.get("collection.empty-page.songs-subtitle"),title:c.ag.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:c.ag.get("collection.empty-page.songs-cta"),renderInline:!0,children:(0,A.jsx)(o.F,{"aria-hidden":"true"})})})]})},Z=r.memo((function({user:e,uri:t}){const{filter:a}=(0,r.useContext)(p.fo),{sortState:n}=(0,r.useContext)(k.Gb),o=function(e,t,a){const l=(0,r.useContext)(E.H),n=(0,N.useQueryClient)(),o=(0,Q.jP)((()=>["useLikedSongs",e,a]),[e,a]),{data:s}=(0,N.useQuery)(o(),(()=>l.getTracks(a)),{cacheTime:$,keepPreviousData:!0,refetchOnWindowFocus:!1}),i=(0,r.useCallback)((()=>{n.invalidateQueries(o())}),[n,o]);(0,z.b)(M.EW.UPDATE,i);const c=(0,H.I2)(t.id);return c&&s?{metadata:{uri:e,name:c.name,images:c.images,totalLength:s?.totalLength,unfilteredTotalLength:s.unfilteredTotalLength,owner:(0,G.V)(t)},contents:s}:null}(t,e,{offset:0,limit:25,sort:(0,w.w)(n),filter:a}),s=(0,r.useContext)(E.H).getCapabilities(),i=(0,l.v9)(_.n5),{isEnhanced:u}=(0,b.U)(`spotify:user:${i}:collection`);if(o){const e=(0,A.jsx)(W,{data:o,canFilter:s.canFilterTracksAndEpisodes&&o.metadata.unfilteredTotalLength>0,canSort:s.canSortTracksAndEpisodes&&o.metadata.unfilteredTotalLength>0});return(0,A.jsx)(B.v,{uri:o.metadata.uri,renderEnabled:()=>u?(0,A.jsx)(r.Suspense,{fallback:null,children:(0,A.jsx)(k.kz,{uri:o.metadata.uri,children:(0,A.jsx)(q,{metadata:{...o.metadata,collaborators:{count:1,items:[{isOwner:!0,user:o.metadata.owner,tracksAdded:o.metadata.totalLength}]}},capabilities:s,featureIdentifier:V})})}):e,renderDisabled:()=>e})}return(0,A.jsx)(f.h,{hasError:!1,errorMessage:c.ag.get("error.not_found.title.playlist"),loadOffline:s.canModifyOffline})})),X=()=>{const{user:e}=(0,l.v9)(_.Gg);if(null===e)return null;const t=(0,i.wG)(e.id).toURI();return(0,A.jsx)(k.kz,{uri:t,children:(0,A.jsx)(p.hz,{uri:t,children:(0,A.jsx)(Z,{uri:t,user:e})})})}},7808:(e,t,a)=>{a.d(t,{s:()=>r.s});var r=a(82930)}}]);
//# sourceMappingURL=xpui-routes-collection-songs.js.map