"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2355],{65485:(e,t,n)=>{n.d(t,{u:()=>p});var r=n(97500),i=n.n(r),a=n(78370),l=n(38641),s=n(43407),o=n(54509),c=n(91650),u=n(15514),d=n(12493),m=n(86070),p=function(e){var t=e.uri,n=e.src,r=e.playAriaLabel,p=e.onClick,f=e.isPlaying,v=e.isActive,b=e.isLocked,x=e.isEpisode,y=e.isVideo,h=e.spec,g=(0,o.W)(),j=(0,s.s)(),A=(0,a.YQ)((function(e){var n;if(g({type:"click",intent:f?"pause":"play"}),h){var r,i=h.playbackButtonFactory();r=v&&f?i.hitPause({itemToBePaused:t}):v&&!f?i.hitResume({itemToBeResumed:t}):i.hitPlay({itemToBePlayed:t}),n=j.logInteraction(r)}p(e,n)}),l.d,{leading:!0,trailing:!1});return(0,m.jsxs)("div",{className:d.A.rowImageWithPlay,children:[(0,m.jsx)(u.e,{src:n,isEpisode:x,isVideo:y}),(0,m.jsx)(c.x,{className:i()(d.A.rowPlayPauseButton,d.A.rowImagePlayPauseButton),iconClassName:d.A.rowPlayPauseIcon,onClick:A,isPlaying:f,isLocked:b,playAriaLabel:r})]})}},14604:(e,t,n)=>{n.r(t),n.d(t,{ThisIsTourCard:()=>d,default:()=>d,useThisisPlaylistExtensionQuery:()=>v});var r=n(54925),i=n(34848),a=n(59081),l=n(7104),s=n(43407),o=n(22865),c=n(12732),u=n(86070);const d=function(e){var t=e.artistImageUrl,n=e.artistName,d=e.artistConcertsUri,m=e.spec,p=(0,s.s)(),f=(0,o.t)(m.concertsCardFactory({identifier:n,uri:d,reason:"This is On Tour phase 1 MVP"}));return t&&n&&d?(0,u.jsxs)("section",{ref:f,className:"contentSpacing",children:[(0,u.jsx)(r.E,{as:"h1",variant:"bodyMediumBold",semanticColor:"textBase",children:a.Ru.get("concerts")}),(0,u.jsx)("div",{className:c.A.cards,children:(0,u.jsxs)("div",{className:c.A.tourCard,"data-testid":"on-tour-card",children:[(0,u.jsx)("img",{className:c.A.cardImage,src:t,alt:""}),(0,u.jsxs)("div",{className:c.A.cardContent,children:[(0,u.jsx)(r.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",className:c.A.subtitle,children:a.Ru.get("concerts_on_tour")}),(0,u.jsx)(r.E,{as:"h1",variant:"bodyMediumBold",className:c.A.title,semanticColor:"textBase",children:n}),(0,u.jsx)(l.default,{to:d,className:c.A.cardLink,children:(0,u.jsx)(i.n,{as:"span",size:"small",onClick:function(){var e=m.concertsCardFactory({identifier:n,uri:d,reason:"This is On Tour phase 1 MVP"}).hitUiNavigate({destination:d});p.logInteraction(e)},className:c.A.cardButton,children:a.Ru.get("concerts_see_all_events")})})]})]})})]}):null};var m=n(37686),p=n(28937),f=new m.l("thisisPlaylistExtension","query","c3c3145aca9849ce8f4d742f9d4dc3be4d945717ce66347d1b3710b8a06749b6",null),v=function(e,t){return(0,p.I)(f,e,t)}},97592:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Fa});var r=n(93209),i=n(26017),a=(n(98168),n(94238),n(93752),n(6990),n(60850),n(67560),n(84008),n(21256),n(10459),n(83892),n(69645),n(39782),n(49932),n(9981),n(61689),n(36490),n(51168),n(88402),n(93902),n(7410),n(49604),n(50252),n(22081),n(13903),n(3794),n(92063),n(32440),n(52767),n(41859),n(4207),n(64334),n(9433),n(26308),n(84815),n(30758)),l=n(45976),s=n(61022),o=n(54925),c=n(1409),u=n(90059),d=n(78221),m=n(59081),p=n(77045),f=(n(54436),n(79443),n(64992),n(57703)),v=(n(60905),n(63619),n(41679),n(81443),n(74457),n(6844),n(77458),n(50247),n(88190),n(81226)),b=(n(11141),n(2264),n(86070)),x=function(e,t,n){return{event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(t),lineitem_id:String(n),creative_id:String(t),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}},y=function(e){var t=e.clickTracking,n=e.clickThrough,r=e.thirdPartyImpression,s=e.impression,c=e.logoUrl,u=e.advertiserName,d=e.creativeId,p=e.lineItemId,v=(0,l.wA)(),y=(0,a.useState)(!1),h=(0,i.A)(y,2),g=h[0],j=h[1];return(0,a.useEffect)((function(){return v((0,f.tb)()),v((0,f.i2)(x("event_viewed",d,p))),function(){v((0,f.zV)())}}),[v,d,p]),(0,b.jsxs)("div",{className:"sponsor-container",children:[(0,b.jsx)(o.E,{variant:"marginal",className:"sponsor-text","data-ta-id":"sponsor-text",children:m.Ru.get("playlist.presented_by",u)}),(0,b.jsxs)("div",{className:"sponsor-logo",children:[(0,b.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:n,onClick:function(){v((0,f.i2)(x("event_clicked",d,p))),j(!0)},children:(0,b.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:c,alt:u,"data-ta-id":"sponsor-logo"})}),(0,b.jsx)("img",{className:"sponsor-logo__imp-pixel",src:s,alt:""}),r&&(0,b.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:r,alt:""}),g&&(0,b.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:t,alt:""})]})]})};function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=function(e){var t=e.playlistUri,n=(0,l.wA)(),r=(0,l.d4)((function(e){return e.ads.sponsoredPlaylist.previewAd||e.ads.sponsoredPlaylist.sponsoredPlaylist.get(t)}));return(0,a.useEffect)((function(){r||n((0,f.uP)(t))}),[n,t,r]),r?(0,b.jsx)("div",{children:(0,b.jsx)(y,g({},r))}):null},A=function(e){var t=e.playlistUri,n=(0,l.wA)(),r=(0,l.d4)((function(e){return e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships")})),i=(0,l.d4)((function(e){return e.ads.sponsoredPlaylist.previewAd}));(0,a.useEffect)((function(){r||n((0,f.uU)())}),[n,r]);var s=i||r&&function(e,t){var n=Date.now()/1e3,r=e.split(":"),i=r[r.length-1];return t.some((function(e){var t=e.playlistId,r=e.endTime,a=e.startTime;return t===i&&n>=a&&n<(r||n+1)}))}(t,r);return s?(0,b.jsx)(j,{playlistUri:t}):null},R=n(91297),k=n(85107),C=n(10203),O=n(32303),T=n(179);const P="hOOwEKqNuXrNvOCB1SgZ",S="csEdkIN9z2LjJIuZraqz";var E=function(e){var t=e.uri,n=(0,T.A)(t),r=(0,i.A)(n,2),l=r[0],c=r[1],u=(0,s.Zp)(),d=(0,a.useCallback)((function(){c(!1),u("/",{replace:!0})}),[u,c]);return(0,b.jsxs)("div",{className:P,children:[(0,b.jsx)(C.b,{size:"xxlarge"}),(0,b.jsxs)("div",{className:S,children:[(0,b.jsx)(o.E,{as:"p",variant:"titleSmall",children:m.Ru.get("forbidden-page.title")}),(0,b.jsx)(o.E,{as:"p",variant:"bodySmall",children:m.Ru.get("forbidden-page.description")})]}),l&&(0,b.jsx)(O.$,{colorSet:"invertedLight",onClick:d,children:m.Ru.get("remove_from_your_library")})]})},w=n(46317),I=n(48716),N=n(79260),L=n(30405),_=n(60120),U=n(35960),D=n(88212),M=n(14604),B=n(89077),F=n(69760),V=n(54509),z=n(73576),q=n(66959),W=n(78370),$=n(43724),H=n(74530),K=n(83451),Q=n(48719),G=["meta+v"];var Y=n(59767),J=n(19919),X=n(13147),Z=n(10397),ee=n(71658),te=n(17941),ne=n(28937),re=n(97150),ie=(n(38858),n(62172),n(2489)),ae=n(83602),le=n(84838),se=(0,v.A)((0,v.A)((0,v.A)((0,v.A)((0,v.A)((0,v.A)({},le.n.TITLE,["title","original_index"]),le.n.ADDED_BY,["added_by","original_index"]),le.n.ADDED_AT,["added_at","album_title","album_artist_name","album_disc_number","album_track_number","original_index"]),le.n.ARTIST,["artist_name","album_title","album_disc_number","album_track_number","original_index"]),le.n.ALBUM,["album_title","album_disc_number","album_track_number","original_index"]),le.n.DURATION,["duration","album_title","album_disc_number","album_track_number","original_index"]);function oe(e,t){void 0!==t&&(e.metadata||(e.metadata={}),e.metadata[ie.W.SORTING_CRITERIA]=function(e){var t=e.field,n=e.order,r=se[t];if(void 0===r||n!==ae.x.ASC&&n!==ae.x.DESC)throw new Error("Invalid sort params!");return r.map((function(e,t){return n?"".concat(e," ").concat(t>0?ae.x.ASC:n):e})).join(",")}(t))}var ce=n(84791),ue=(0,v.A)({},ce.Hh.TEXT,"text"),de=(0,v.A)({},ce.tl.CONTAINS,"=^#");function me(e,t){void 0!==(null==t?void 0:t.value)&&(e.metadata||(e.metadata={}),e.metadata[ie.W.FILTERING_PREDICATE]=function(e){var t=e.field,n=e.operator,r=e.value;if(t!==ce.Hh.TEXT||n!==ce.tl.CONTAINS)throw new Error("Invalid filter params!");var i=ue[t],a=de[n];return"".concat(i," ").concat(a,' "').concat(r,'"')}(t))}var pe=n(21746),fe=n(51097),ve=n(28480),be=n(82035),xe=n(17175),ye=n(95514),he=n(16247),ge=n.n(he),je=n(48291),Ae=n(30278);n(85367),n(96358),n(5280);function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ke=[],Ce=function(e){var t,n=(null===(t=ke.find((function(t){return t.key===e})))||void 0===t?void 0:t.heights)||{},r=(0,a.useCallback)((function(t){if(e){var n=ke.findIndex((function(t){return t.key===e}));-1===n?ke.push({key:e,heights:t}):(ke[n].heights=t,ke.push(ke.splice(n,1)[0])),ke.length>10&&ke.shift()}}),[e]),i=(0,a.useRef)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n));return(0,a.useEffect)((function(){return function(){r(i.current)}}),[r]),i.current},Oe=function(e,t){for(var n=[],r=e,i=t;r>0;){var a=Math.ceil(r/i);n.push({first:e-r,nrItems:a}),r-=a,i--}return n};function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Se=function e(t){var n,r,i=t.itemsInNode,a=t.renderItem,l=t.renderPlaceholder,s=t.estimatedHeight,o=t.scrollNodeRef,c=t.nrRowsOverscan,u=void 0===c?10:c,d=t.nrInitialInView,m=void 0===d?0:d,p=t.firstIndex,f=t.heights,v=t.fanOut,x=void 0===v?2:v,y=(0,Ae.Wx)({root:o.current,rootMargin:"".concat(u*s,"px 0px"),initialInView:p<m}),h=y.ref,g=y.inView,j=y.entry,A="".concat(p,"-").concat(i);null!==(n=f[A])&&void 0!==n||(f[A]=s*i),null!=j&&null!==(r=j.boundingClientRect)&&void 0!==r&&r.height&&(f[A]=j.boundingClientRect.height);var R=f[A];return 0===i?null:g?1===i?(0,b.jsx)("div",{ref:h,role:"presentation",children:a(p,R)}):(0,b.jsx)("div",{ref:h,role:"presentation",children:Oe(i,x).map((function(n,r){var i=n.first,a=n.nrItems;return(0,b.jsx)(e,Pe(Pe({},t),{},{itemsInNode:a,firstIndex:p+i}),r)}))}):(0,b.jsx)("div",{ref:h,role:"presentation",children:l("".concat(R,"px"))})},Ee=function(e){var t=Ce(e.persistanceKey);return(0,b.jsx)(Se,Pe(Pe({},e),{},{itemsInNode:e.totalCount,firstIndex:0,heights:t,nrInitialInView:e.nrInitialInView}))},we=n(39049),Ie=n(33093),Ne=n(9867),Le=n(17450),_e=n(88666),Ue=n(21581),De=(n(51725),n(61369),n(23099),n(97500)),Me=n.n(De),Be=n(61429),Fe=n(34848),Ve=n(56142),ze=n(76558),qe=n(11156),We=n(60828),$e=n(36092),He=n(83800),Ke=n(7104),Qe=n(51372),Ge=n(31332),Ye=n(29729),Je=n(10681),Xe=n(55074),Ze=n(98111),et=n(9800),tt=n(84747),nt=n(53313),rt=n(66301),it=n(43407),at=n(21132),lt=n(12074),st=n(74030),ot=n(78041),ct=n(80049),ut=n(21560),dt=n(39418),mt=n(81260),pt="small";const ft="ci11tAmTK1LnxThQkXPy",vt="_2sJPwAAp1wY1Ftke6iFe",bt="yuNzasMLs7hvemHI4d8Q",xt="abYR6tZoE7BdzThmWTb0",yt="GOcKQxqNMhGzbGiAXBig",ht="yFQjuDAhri_egM1pwn70";var gt=["breakpoint","className","showSeparator"];function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var At=(0,a.memo)((function(e){var t=e.breakpoint,n=e.className,r=e.showSeparator,i=(0,Le.A)(e,gt);return(0,b.jsx)(ut.v,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:Me()(n,ft,(0,v.A)({},ht,r)),hoverBackgroundColor:"backgroundTintedHighlight",activeBackgroundColor:"backgroundTintedBase",layout:t===pt?"regular":"wide",hoverAnimationDuration:"0ms",horizontalGap:t===pt?"12px":"16px",paddingBlockStart:"12px",paddingBlockEnd:"12px"},i))})),Rt=n(49674),kt=n(8218),Ct=function(e){var t=e.description,n=e.children;return(0,b.jsxs)("div",{className:xt,children:[t&&(0,b.jsx)(Rt.v,{lineClamp:2,as:"div",dir:"auto",children:(0,b.jsx)(kt.q,{asTextContent:!0,html:t})}),n]})},Ot=n(23401),Tt=function(e){var t=e.isPlaying,n=e.onClickPlay,r=e.name,i=e.authorName,a=e.isLocked,l=e.children;return(0,b.jsxs)("div",{className:yt,children:[(0,b.jsx)("div",{className:vt,children:l}),(0,b.jsx)(Ot.R,{size:"small",version:Ot.H.secondary,onClick:n,isPlaying:t,ariaPlayLabel:m.Ru.get("tracklist.a11y.play",r,i),ariaPauseLabel:m.Ru.get("tracklist.a11y.pause",r,i),locked:a})]})},Pt=n(78227),St=n(85262),Et=n(34757),wt=function(e){var t=e.images,n=e.breakpoint,r=e.type,i=e.name,a=(0,Et._)(),l=n===pt?St.Qe.SIZE_64:St.Qe.SIZE_112;return(0,b.jsx)(Pt.b,{fadeIn:!0,images:a(t,St.BZ[l]),shape:Pt.u.ROUNDED_CORNERS,size:l,iconSize:n===pt?"medium":"xlarge",type:r,title:i,loadingMode:"eager"})},It=n(93482),Nt=function(e){var t=e.children;return(0,b.jsx)(It.d,{lineClamp:2,as:"div",dir:"auto",children:t})},Lt=n(34293);const _t="dK79XxAEu3SEKJ2jS_Qy",Ut="guiUbDD6Ga8Qpatq2jQ8";var Dt=function(e){var t=e.isExplicit,n=e.children;return(0,b.jsxs)("div",{className:_t,children:[t&&(0,b.jsx)(Lt.g,{}),(0,b.jsx)(o.E,{variant:"bodySmall",className:Ut,children:n})]})};const Mt="CFz0rei5rsfsZuplXVIQ",Bt="H9T7R8VeiGcSbjXU0ZRX",Ft="BppGH6orIYP2gVU_WhVG";var Vt=["book","contextUri","featureIdentifier","sharingInfo","uid","rating","isRecommendation","canRemove","showSeparator"];function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wt=(0,a.memo)((function(e){var t,n,r=e.book,l=e.contextUri,c=e.featureIdentifier,u=e.sharingInfo,p=e.uid,f=e.rating,x=e.isRecommendation,y=void 0!==x&&x,h=e.canRemove,g=void 0!==h&&h,j=e.showSeparator,A=void 0!==j&&j,R=(0,Le.A)(e,Vt),k=r.name,C=r.description,O=r.isLocked,P=r.isExplicit,S=r.images,E=r.type,w=r.uri,I=r.authorName,N=r.consumptionCapExplanation,L=r.durationMs,_=r.topics,U=void 0===_?[]:_,D=r.signifierText,M=(0,it.s)(),B=(0,be.r)(qe.m,{data:{position:0,uri:w}}).spec,F=(0,re.P)({uri:w},{featureIdentifier:c}),V=F.isPlaying,z=F.isActive,q=F.togglePlay,W=(0,s.Zp)(),$=(0,d.o_)(w).toURLPath(!0),H=(0,Je.x)(l).addItems,K=(0,mt.y)()===dt.E.SMALL?"small":"large",Q=function(e){var t,n=(0,et.L)(),r=(0,Xe.jE)(),l=(0,a.useRef)(null),s=(0,a.useRef)(0),o=(0,tt.o)((function(t){var n,r;return(null==t?void 0:t.context.uri)===e&&null!==(n=null==t||null===(r=t.item)||void 0===r?void 0:r.uri)&&void 0!==n?n:null})),c=(0,nt.S)(1e4,(function(e){var t;return(null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===o})),u=(0,i.A)(c,1)[0],d=(0,Ze.I)({queryKey:["useShowPlayedState",e],queryFn:(t=(0,ye.A)(ge().mark((function t(){var r;return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.getShowPlayedState(e),s.current=u,t.abrupt("return",r);case 3:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)}),refetchOnWindowFocus:!1}),m=d.data;return(0,a.useEffect)((function(){l.current&&o!==l.current&&r.invalidateQueries({queryKey:["useShowPlayedState",e]}),l.current=o}),[o,r,e]),(0,a.useMemo)((function(){return m&&n.capabilities.canGetShowPlayedState?{state:m.state,playPositionMilliseconds:m.playPositionMilliseconds+u-s.current}:null}),[m,n,u])}(w),G=(0,T.A)(w),J=(0,i.A)(G,2),X=J[0],Z=J[1],ee=(0,Ge.T)(w),te=K===pt?"small":"medium",ne=(0,a.useCallback)((function(){M.logInteraction(B.addButtonFactory().hitAddToPlaylist({playlist:l,itemToBeAdded:w})),H([w],{after:"end"})}),[M,B,l,w,H]),ie=(0,a.useCallback)((function(){if(O&&!N)W($);else{var e=(0,Y.$I)({isPlaying:V,isActive:z,spec:B.playButtonFactory(),logger:M,uri:w});q({loggingParams:e})}}),[N,z,O,V,M,W,B,q,w,$]),ae=(0,a.useCallback)((function(){var e,t;M.logInteraction(B.genreLinkFactory({uri:null!==(e=U[0].uri)&&void 0!==e?e:""}).hitUiNavigate({destination:null!==(t=U[0].uri)&&void 0!==t?t:""}))}),[M,B,U]),le=(0,b.jsx)(Nt,{children:k}),se=(0,b.jsx)(Ct,{description:C,children:(0,b.jsxs)(Dt,{isExplicit:!!P,children:[!0===(null==f?void 0:f.showAverage)&&void 0!==f.average&&(0,b.jsxs)("span",{children:[(0,b.jsx)(Be.j,{size:"xsmall",className:Mt}),m.Ru.formatNumber(f.average,{maximumFractionDigits:1})]}),(null===(t=U.at(0))||void 0===t?void 0:t.title)&&(0,b.jsx)(Ke.Link,{className:Bt,to:null!==(n=U[0].uri)&&void 0!==n?n:"",onClick:ae,children:U[0].title}),L&&(0,b.jsx)(at.j,{isPlaying:!1,fullyPlayed:(null==Q?void 0:Q.state)===rt.H7.Completed,durationMs:L,position:null==Q?void 0:Q.playPositionMilliseconds})]})}),oe=(0,b.jsx)(He.p,{uri:w,uid:p,contextUri:l,includeGoToAudiobook:!0,canBeRemovedFromPlaylist:g}),ce=!O&&!!!N,ue=y?null:(0,b.jsxs)(Tt,{isPlaying:V,onClickPlay:ie,isLocked:O&&!N,name:k,authorName:I,children:[(0,b.jsx)(lt.M,{className:Me()((0,v.A)({},bt,X)),isAdded:X,onClick:function(){X?M.logInteraction(B.saveToLibraryButtonFactory().hitRemoveLike({itemNoLongerLiked:w})):M.logInteraction(B.saveToLibraryButtonFactory().hitLike({itemToBeLiked:w})),Z(!X)},size:te,isAudiobook:!0,condensedAll:!0}),(0,b.jsx)(st.I,{className:Me()((0,v.A)({},bt,(0,Qe.X)(ee))),uri:w,onClick:function(e,t){t===Ye.NV.ADD&&M.logInteraction(B.downloadButtonFactory().hitDownload({itemToDownload:w}))},size:te,canDownload:ce,condensedAll:!0}),(0,b.jsx)(ct.w,{uri:w,sharingInfo:null!=u?u:null,interactionData:{intent:"share",type:"click"},size:te,onClick:function(){var e;M.logInteraction(B.shareButtonFactory().hitShare({entityToBeShared:w,shareId:null!==(e=null==u?void 0:u.shareId)&&void 0!==e?e:""}))},condensedAll:!0}),(0,b.jsx)(We.b,{menu:oe,children:(0,b.jsx)(ot.e,{label:m.Ru.get("more.label.context",k),size:te,onClick:function(){M.logInteraction(B.contextMenuButtonFactory().hitUiReveal())},condensedAll:!0})})]}),de=(0,b.jsx)(wt,{images:S,name:k,type:E,breakpoint:K}),me=D?(0,b.jsx)(o.E,{as:"div",variant:"bodySmall",semanticColor:"textBrightAccent",children:D}):null,pe=y?(0,b.jsx)(Fe.n,{size:"small",onClick:ne,children:m.Ru.get("playlist.extender.button.add")}):null,fe=(0,b.jsxs)(Ve.j,{hasTextSeparator:!0,children:[(0,b.jsxs)(b.Fragment,{children:[y&&O&&(0,b.jsx)(ze.u,{semanticColor:"textSubdued",title:m.Ru.get("mwp.header.content.unavailable"),size:"xsmall",className:Ft}),m.Ru.get("card.tag.audiobook")]}),I]});return(0,b.jsx)($e.h,{menu:oe,onShow:function(){M.logInteraction(B.secondaryHitUiReveal())},children:(0,b.jsx)(At,qt({breakpoint:K,id:"book-".concat(w),media:de,pretitle:me,title:le,body:se,subtitle:fe,footer:ue,trailing:pe,onClick:function(){M.logInteraction(B.hitUiNavigate({destination:w})),W($)},showSeparator:A},R))})})),$t=n(55089),Ht=n(94810),Kt=n(96792),Qt=(0,a.createContext)({getReference:function(){return null},setReference:function(){}}),Gt=function(e){var t=e.children,n=(0,a.useRef)(null),r=(0,a.useCallback)((function(){return n.current}),[]),i=(0,a.useCallback)((function(e){n.current=e}),[]);return(0,b.jsx)(Qt.Provider,{value:{getReference:r,setReference:i},children:t})};function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xt=function(e,t,n){var r=e.name,i=e.uri,s=e.uid,o=(0,a.useContext)(_.cL).sortState.order!==Kt.H.NONE,c=(0,F.P)({itemIds:[s],itemUris:[i],itemMimeTypes:[$t.fl.AUDIOBOOKS],dragLabelText:r,contextUri:t}),u=c.draggable,d=c.onDragStart,m=(0,a.useContext)(Qt),f=m.setReference,b=m.getReference,x=(0,a.useCallback)((function(e){f({uri:i,uid:s}),d(e)}),[d,f,s,i]),y=(0,l.wA)(),h=(0,a.useContext)(pe.w),g=(0,a.useCallback)((function(e,n){var r=e[$t.fl.AUDIOBOOKS];if(r){var a=b();a?n===Ue.Nz.BEFORE?h.move(t,[a],{before:{uri:i,uid:s}}):h.move(t,[a],{after:{uri:i,uid:s}}):n===Ue.Nz.BEFORE?y((0,p.io)(t,r,{before:{uri:i,uid:s}})):y((0,p.io)(t,r,{after:{uri:i,uid:s}})),f(null)}}),[t,y,b,h,f,s,i]),j=n&&!o?[$t.fl.AUDIOBOOKS]:[];return Jt(Jt({},(0,Ht.A)({uri:i,id:s,allowedMimeTypesByDropPosition:(0,v.A)((0,v.A)({},Ue.Nz.BEFORE,j),Ue.Nz.AFTER,j),onDrop:g})),{},{onDragStart:x,draggable:u})};const Zt="bg5inM_sdkHpYWiFf7Id",en="DyW2LAm9YDcCkcdM0eeP";var tn=["className","dropPosition","draggable"];function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var an=function(){return(0,b.jsx)("div",{className:en})},ln=(0,a.memo)((function(e){var t=e.item,n=e.contextUri,r=e.canEdit,i=void 0!==r&&r,a=e.canRemove,l=void 0!==a&&a,s=e.index,o=Xt(t,n,i),c=o.className,u=o.dropPosition,d=o.draggable,m=(0,Le.A)(o,tn);return(0,b.jsxs)(_e.W,{className:c,"aria-posinset":s,reRunOnDOMUpdate:!0,children:[u===Ue.Nz.BEFORE&&(0,b.jsx)(an,{}),(0,b.jsx)(Wt,rn({book:t,contextUri:n,featureIdentifier:"playlist",sharingInfo:t.sharingInfo,uid:t.uid,rating:t.rating,canRemove:l,className:c,draggable:d,showSeparator:0!==s},m)),u===Ue.Nz.AFTER&&(0,b.jsx)(an,{})]})})),sn=n(56023);function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var un=function(e){var t=e.contextUri,n=e.initialItems,r=e.nrItems,l=e.canEdit,o=e.canRemove,c=e.ariaLabel,u=(0,a.useContext)(pe.w),d=(0,Z.v7)(),m=(0,a.useContext)(L.g).filter,p=(0,a.useContext)(_.cL).sortState,f=(0,sn.$)(p,m).contentsOptions,v=(0,U.z1)(),x=(0,i.A)(v,2)[1],y=(0,a.useCallback)(function(){var e=(0,ye.A)(ge().mark((function e(n,r){var i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getContents(t,cn(cn({},f),{},{offset:n,limit:r}));case 2:return i=e.sent,a=i.items.map((function(e){return null===e?null:(0,Ie.pW)(e)?e:null})),e.abrupt("return",cn(cn({},i),{},{items:a}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[u,f,t]),h=(0,we.E)({nrItems:r,fetch:y,limit:50,initialItems:n}),g=h.getItem,j=h.nrValidItems,A=h.invalidateCache;(0,a.useLayoutEffect)((function(){x(j)}),[j,x]),(0,Ne.H)(t,A);var R=(0,a.useCallback)((function(e){return(0,b.jsx)("div",{style:{height:e}})}),[]),k=(0,a.useCallback)((function(e,n){var r=g(e);return r?(0,b.jsx)(ln,{contextUri:t,item:r,canEdit:l,canRemove:o,index:e},r.uri):R("".concat(n,"px"))}),[l,o,t,g,R]),C="POP"===(0,s.wQ)()?0:10;return(0,b.jsx)("div",{className:Zt,children:(0,b.jsx)(je.R,{firstInteractiveIsWrapper:!0,"aria-label":c,"aria-rowcount":j,"aria-colcount":6,children:(0,b.jsx)(Gt,{children:(0,b.jsx)(Ee,{totalCount:j,estimatedHeight:200,renderItem:k,renderPlaceholder:R,scrollNodeRef:d,nrRowsOverscan:10,persistanceKey:t,nrInitialInView:C})})})})},dn=n(1619),mn=n(54839),pn=n(24003),fn=n(44090),vn=n(57431),bn=n(46824),xn=n(23235),yn=n(19269),hn=n(34478),gn=n(41485),jn=n(93928),An=n(30710),Rn=n(87440),kn=n(2856),Cn=n(29833),On=n(82323),Tn=n(95597),Pn=n(33204),Sn=n(5811),En=n(75266),wn=function(e){return e.DOWN="DOWN",e.UP="UP",e.EQUAL="EQUAL",e.NEW="NEW",e}({}),In=n(12493),Nn=(0,v.A)((0,v.A)((0,v.A)((0,v.A)({},wn.DOWN,(function(){return(0,b.jsx)(Pn.y,{size:"small",className:In.A.statusChangeDown})})),wn.UP,(function(){return(0,b.jsx)(Sn.J,{size:"small",className:In.A.statusChangeUp})})),wn.NEW,(function(){return(0,b.jsx)(En.Z,{className:In.A.notificationDot})})),wn.EQUAL,(function(){return null})),Ln=function(e){var t=e.status,n=e.number,r=Nn[t];return(0,b.jsxs)("div",{className:Me()(In.A.rowChartStatus),children:[(0,b.jsx)(o.E,{variant:"bodyMedium",children:n}),(0,b.jsx)(r,{})]})},_n=n(18001),Un=n(15514),Dn=n(70403),Mn=n(86637),Bn=n(46241),Fn=n(35509),Vn=n(17649),zn=n(27317),qn=n(59133),Wn=n(35805),$n=n(7183),Hn=n(91080),Kn=a.memo((function(e){var t=e.uri,n=e.name,r=e.duration_ms,i=e.artists,a=e.album,l=e.isMOGEFRestricted,s=e.isExplicit,o=e.isPlayable,c=e.uid,u=e.index,d=e.contextUri,p=e.imgUrl,f=e.statusChange,v=e.playCount,x=e.usePlayContextItem,y=e.isCompactMode,h=(0,be.r)(mn.i,{data:{position:u,reason:"",uri:t}}).spec,g=(0,dn.w)(),j=(0,bn.c)(),A=x({uid:c,uri:t,index:u}),R=A.isActive,k=A.isPlaying,C=A.triggerPlay,O=A.togglePlay,T=(0,Ge.T)(t),P=(0,Rn.g)(t,o),S=(0,jn.b)({downloadAvailability:T,isExplicit:s,isMOGEFRestricted:l}),E=S.badges,w=S.hasBadges,I=(null==i?void 0:i.map((function(e){return e.name})).join(m.Ru.getSeparator()))||"";return(0,b.jsx)(hn.pZ,{value:"row",index:u,children:(0,b.jsx)($e.h,{menu:(0,b.jsx)(kn.P,{uri:t,albumUri:null==a?void 0:a.uri,artists:i}),children:(0,b.jsx)(Hn.w,{uri:t,contextUri:d,index:u,onTriggerPlay:function(e,t){C({loggingParams:t})},isActive:R,ariaRowIndex:u+1,isPlayable:P,ageRestricted:l,dragMetadata:{name:n,createdBy:I},allowedDropTypes:[],spec:h,isCompactMode:y,children:g.map((function(e,l){var s=(0,fn.y)(l,e,g);return(0,b.jsx)(s,{ariaColIndex:l,children:function(){var l;switch(e){case Kt.$.INDEX:return(0,b.jsx)(Bn.$,{uri:t,className:In.A.rowMarkerChartStatus,playAriaLabel:m.Ru.get("tracklist.a11y.play",n,I),onClick:function(e,t){O({loggingParams:t})},isPlaying:k,isActive:R,spec:h,children:f?(0,b.jsx)(Ln,{number:u+1,status:f}):(0,b.jsx)(Vn.a,{children:u+1})});case Kt.$.TITLE_AND_ARTIST:case Kt.$.TITLE_AND_AUTHOR:return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Un.e,{src:p}),(0,b.jsxs)(Dn.l,{children:[(0,b.jsx)($n.p,{titleText:n,children:n}),w&&(0,b.jsxs)(Tn.P,{children:[E.download&&(0,b.jsx)(xn._,{}),E.explicit&&(0,b.jsx)(Lt.g,{}),E.nineteen&&(0,b.jsx)(yn.q,{className:In.A.nineteen,size:16})]}),(0,b.jsx)(qn.p,{children:(0,b.jsx)(On.l,{artists:i,spec:h})})]})]});case Kt.$.TITLE:return(0,b.jsxs)(Mn.q,{children:[j?(0,b.jsx)(Ke.default,{to:t,className:In.A.rowTitle,"data-testid":"internal-track-link",children:(0,b.jsx)($n.p,{titleText:n,children:n})}):(0,b.jsx)($n.p,{titleText:n,children:n}),w&&(0,b.jsxs)(Tn.P,{children:[E.download&&(0,b.jsx)(xn._,{}),E.explicit&&(0,b.jsx)(Lt.g,{}),E.nineteen&&(0,b.jsx)(yn.q,{className:In.A.nineteen,size:16}),E.hasAssociatedVideo&&(0,b.jsx)(vn.l,{})]})]});case Kt.$.ARTIST:case Kt.$.AUTHOR:return(0,b.jsx)(Wn.Y,{children:i&&(0,b.jsx)(pn.E,{artists:i,spec:h})});case Kt.$.PLAYS:return(0,b.jsx)(zn.Y,{playcount:v});case Kt.$.ALBUM_OR_PODCAST:case Kt.$.ALBUM:return(0,b.jsx)(Cn.g,{uri:a.uri,name:a.name,creatorUri:null==i||null===(l=i[0])||void 0===l?void 0:l.uri,spec:h,children:a.name});case Kt.$.DURATION:return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(An.d,{uri:t,spec:h}),(0,b.jsx)(_n.P,{duration:r}),(0,b.jsx)(Fn.Y,{menu:(0,b.jsx)(kn.P,{uri:t,albumUri:null==a?void 0:a.uri,artists:i}),label:m.Ru.get("more.label.track",n,I),spec:h})]});case Kt.$.ADDED_BY:case Kt.$.ADDED_AT:case Kt.$.RELEASE_DATE:case Kt.$.ACTIONS:case Kt.$.ALBUM_OR_SHOW:case Kt.$.EVENT_DATE:case Kt.$.EVENT_INFO:case Kt.$.CONCERT_DATE:case Kt.$.CONCERT_VENUE:case Kt.$.ADD:return null;default:(0,gn.d)(e)}return null}()},"column-".concat(l))}))})})})}),(function(e,t){return e.uri===t.uri&&e.isCompactMode===t.isCompactMode})),Qn=n(99517),Gn=n(39437),Yn={column:null,order:Kt.H.NONE},Jn=a.memo((function(e){var t=e.ariaLabel,n=e.nrTracks,r=e.playlistUri,i=e.scrollToUid,l=e.usePlayContextItem,s=e.tracklistDomRef,o=e.sortableColumns,c=e.isCompactMode,u=void 0!==c&&c,d=(0,a.useContext)(pe.w),m=(0,a.useContext)(L.g),p=m.filter,f=m.setFilter,v=(0,a.useRef)(null),x=(0,a.useCallback)((function(){v.current&&v.current.update()}),[]);(0,Ne.H)(r,x);var y=(0,a.useContext)(_.cL),h=y.sortState,g=y.setSortState,j=(0,a.useCallback)((function(e){g((0,N.So)(e,h))}),[h,g]);(0,a.useEffect)((function(){g(Yn),f("")}),[r,f,g]),(0,a.useEffect)((function(){v.current&&i&&v.current.scrollToItem({uid:i})}),[i]);var A=(0,a.useCallback)(function(){var e=(0,ye.A)(ge().mark((function e(t,n){var i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getContents(r,{offset:t,limit:n,sort:(0,N.Xt)(h),filter:p,decorateFormatListData:!0});case 2:return i=e.sent,e.abrupt("return",{items:i.items,totalLength:i.totalLength});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[r,d,h,p]),R=(0,a.useCallback)((function(e,t){var n,i,a,s=(0,Gn.g)(null===(n=e.album)||void 0===n?void 0:n.images,{desiredSize:40,desiredLabel:"small"});return(0,b.jsx)(Kn,{index:t,contextUri:r,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:(null==s?void 0:s.url)||"",statusChange:null===(i=e.formatListAttributes)||void 0===i?void 0:i.status,playCount:parseInt((null===(a=e.formatListAttributes)||void 0===a?void 0:a.rank)||"0",10),usePlayContextItem:l,isCompactMode:u},t+e.uri)}),[r,l,u]),k=(0,dn.w)(),C=(0,a.useCallback)((function(e){return{uri:e.uri,uid:e.uid}}),[]);return(0,b.jsx)(hn.pZ,{value:"chart-tracklist",children:(0,b.jsx)(Qn.S4,{ariaLabel:t,hasHeaderRow:!0,columns:k,sortableColumns:o,sortState:h,onSort:j,renderRow:R,resolveItem:C,nrTracks:n,fetchTracks:A,limit:100,canFetchAllTracks:d.getCapabilities().canFetchAllTracks,outerRef:v,outerDomRef:s,columnPersistenceKey:"chart-tracklist",isCompactMode:u,className:In.A.chartTrackList},r)})})),Xn=n(94331),Zn=n(4906),er=n(26697),tr=n(67693);function nr(e,t){return e.build().withHost(er.QU).withPath("/views/recommendations-in-free-tier-playlist-source").withQueryParameters({signal:"playlistURI:".concat(t),limit:"10"}).withEndpointIdentifier("/views/{viewId}").send()}var rr=n(22030),ir=n(42715);const ar="BagEpNps_J8R2QuHRZMa",lr="bjB8WZd0Ev30ZFbiScDm";var sr=(0,a.memo)((function(e){var t=e.uri,n=(0,a.useContext)(Z.bi).scrollNodeRef,r=(0,Ae.Wx)({initialInView:!1,rootMargin:"128px 100%",root:n.current}),l=r.ref,s=function(e,t){var n,r=(0,tr.Z)(nr,[e],{enabled:t,staleTime:36e5,gcTime:72e5}).data;return null==r||null===(n=r.body.content)||void 0===n?void 0:n.items}(t,r.inView),o=(0,a.useRef)(null),c=function(e){var t=(0,ir.x)("mlt-height",300),n=(0,i.A)(t,2),r=n[0],l=n[1],s=(0,a.useCallback)((function(){var t,n=null===(t=e.current)||void 0===t||null===(t=t.getBoundingClientRect())||void 0===t?void 0:t.height;n&&l(n)}),[e,l]);return(0,rr.w)({refOrElement:e,observeOnly:"height",onResize:s,observeOnMount:!0}),r}(o);return 0===(null==s?void 0:s.length)?null:(0,b.jsx)("div",{className:ar,style:{"--last-height":"".concat(c,"px")},ref:l,children:s&&(0,b.jsx)(Zn.p,{id:"0JQ5DAob0LgAOAm50K90Od",index:0,title:m.Ru.get("web-player.playlist.more-like-this.section-header-title"),total:s.length,elementRef:o,className:lr,children:s.map((function(e,t){var n,r;return(0,b.jsx)(Xn.B,{index:t,uri:e.uri,name:e.name,authorName:null!==(n=null===(r=e.owner)||void 0===r?void 0:r.display_name)&&void 0!==n?n:null,description:null,images:e.images},e.uri)}))})})})),or=n(87238),cr=n(27672),ur=n(35138),dr=n(93187),mr=n(43909),pr=n(45462),fr=n(73690),vr=n(77700),br=n(51995),xr=n(530),yr=n(90997),hr=n(13234),gr=n(63713),jr=n(81874),Ar=n(82737),Rr=n(19006),kr=n(42552),Cr={bottomEnd:kr.dw.topStart,top:kr.dw.bottom},Or=function(e){var t=e.visible,n=e.onHide,r=e.placement,i=e.children,a=e.label,l=(0,c.NC)(xe.rW);return(0,b.jsx)(Ar.W,{placement:r,withPortal:!0,overlay:t&&(0,b.jsx)("div",{className:Me()({"circular-sp-vietnamese":l}),children:(0,b.jsx)(Rr.A,{arrow:Cr[r],colorSet:"announcement",onClose:n,children:a})}),children:i})},Tr=n(50047),Pr=n(35699),Sr=function(e){return e.xs="small",e.sm="medium",e.md="large",e}(Sr||{}),Er=function(e){var t=e.uri,n=e.label,r=e.onClick,i=e.size,a=void 0===i?Sr.md:i,l=(0,Pr.J)({uri:t,permissionLevel:"CONTRIBUTOR"}).onCopyLink,s=(0,Tr.R)(),o=s.toggleActivationVisible,c=s.setToggleActivationVisible;return(0,b.jsx)(Or,{visible:o,onHide:function(){return c(!1)},label:m.Ru.get("web-player.playlist.invite-collaborators.message"),placement:"bottomEnd",children:(0,b.jsx)(jr.Zp,{label:n,children:(0,b.jsx)(hr.H,{onClick:function(e){null==r||r(e),null==l||l()},iconOnly:gr.h,size:a,"aria-hidden":"true","aria-label":n,condensed:!0})})})},wr=n(78028),Ir=n(19008),Nr=n(64299),Lr=a.memo((function(e){var t=e.metadata,n=e.tracklistDomRef,i=e.sortableColumns,l=t.hasSpotifyAudiobooks||!1,s=(0,be.r)(wr.E,{}),o=s.spec,c=s.logger,u=(0,a.useCallback)((function(){c.logInteraction(o.filterFieldFactory().keyStrokeFilter())}),[c,o]),d=(0,a.useCallback)((function(){c.logInteraction(o.filterFieldFactory().hitClearFilter())}),[c,o]);return(0,b.jsxs)("div",{className:I.A.searchBoxContainer,children:[(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsx)(Ir.S,{placeholder:m.Ru.get("playlist.search_in_playlist"),onFilter:u,onClear:d,clearOnEscapeInElementRef:n})}),(0,b.jsx)(Nr.d,{columns:(0,r.A)(i),isBooklist:l})]})})),_r=n(29767),Ur=n(48575),Dr=a.memo((function(e){var t=e.playlist,n=e.capabilities,r=e.spec,l=e.isPlaying,s=e.isActive,o=e.togglePlay,u=e.isBooklist,d=e.isConcert,p=void 0!==d&&d,f=e.backgroundColor,v=e.tracklistDomRef,x=e.sortableColumns,y=t.metadata,h=y.uri,g=y.name,j=y.unfilteredTotalLength,A=y.isOwnedBySelf,R=y.canPlay,k=y.isPublished,C=y.totalLength,O=(0,z.n)(),P=(0,it.s)(),S=(0,a.useMemo)((function(){return r.shuffleButtonContainerFactory()}),[r]),E=n.canFilter&&j>0,w=n.canSort&&j>0,N=j>0,L=(0,c.NC)(J.McC,{loadingValue:!1}),_=(0,Ur.X)(),U=(0,T.A)(h),D=(0,i.A)(U,2),M=D[0],B=D[1],F=(0,V.W)(),q=(0,a.useCallback)((0,ye.A)(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F({targetUri:h,intent:M?"unsave":"save",type:"click"}),e.prev=1,e.next=4,B(!M);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])}))),[M,F,B,h]),W=(0,a.useCallback)((function(){var e=r.shareButtonFactory().hitShare({entityToBeShared:h,shareId:""});P.logInteraction(e)}),[r,P,h]),$=(0,a.useCallback)((function(){var e,t=r.heartButtonFactory();e=M?t.hitUnfollow({itemToBeUnfollowed:h}):t.hitFollow({itemToBeFollowed:h}),P.logInteraction(e),q()}),[r,q,M,P,h]),H=(0,xr.j)(),K=E&&w;return(0,b.jsx)(or.E,{backgroundColor:f,children:(0,b.jsxs)(cr.S,{children:[R&&!u?(0,b.jsx)(fr.D,{onClick:o,isPlaying:l,size:H,uri:h,ariaPlayLabel:m.Ru.get("playlist.a11y.play",g),ariaPauseLabel:m.Ru.get("playlist.a11y.pause",g)}):null,_&&C>0&&!u&&(0,b.jsx)(yr.r,{spec:S,children:(0,b.jsx)(br.Y,{shuffleContext:_r.b.playlistActionBar,entityName:g,contextUri:h,isActive:s,activationPlacement:"bottomEnd",size:H})}),A?null:(0,b.jsx)(mr.e,{children:(0,b.jsx)(lt.M,{isAdded:!!M,onClick:$,size:H})}),!u&&(0,b.jsx)(ur.f,{uri:h,isFollowing:!!M,canDownload:N,onClick:function(e,t){return(0,Y.Qv)(t,r.downloadButtonFactory(),P,h)},onFollow:q,size:H}),(0,b.jsx)(pr.u,{property:J.G6N,renderNewExperience:function(){var e;return null!==(e=t.metadata.permissions)&&void 0!==e&&e.canAdministratePermissions&&O&&(!u||L)?(0,b.jsx)(Er,{onClick:W,label:m.Ru.get("permissions.invite-collaborators",g),uri:h,size:H}):null}}),(p||u)&&(0,b.jsx)(ct.w,{uri:h,sharingInfo:null,interactionData:{intent:"share",type:"click",itemIdSuffix:p?"concerts-near-you/share":"booklist/share"},onClick:W,size:H}),(0,b.jsx)(We.b,{onShow:function(){return(0,Y.R2)(r,P)},menu:(0,b.jsx)(dr.W,{uri:h,isPublished:k}),children:(0,b.jsx)(ot.e,{label:m.Ru.get("more.label.context",g),size:H})}),K?(0,b.jsx)(yr.r,{spec:r,children:(0,b.jsx)(Lr,{metadata:t.metadata,tracklistDomRef:v,sortableColumns:x})}):(0,b.jsx)("div",{className:I.A.leadingSlot,children:(0,b.jsx)(pr.u,{property:J.mA2,renderNewExperience:function(){return(0,b.jsx)(vr.g,{options:[],onSelect:function(){},selected:null,enableViewModeMenu:!0})}})})]})})})),Mr=n(14124),Br=n(22865),Fr=function(e){var t=(0,it.s)(),n=(0,a.useMemo)((function(){return e.spec.promoCardFactory()}),[e.spec]),r=(0,Br.t)(n);return(0,b.jsxs)("div",{className:I.A.concertsFooter,children:[(0,b.jsx)(Ke.default,{to:"/concerts",className:I.A.ctaLink,onClick:function(){var e=n.hitUiNavigate({destination:"spotify:app:concerts"});t.logInteraction(e)},children:(0,b.jsxs)("div",{className:I.A.promoRow,ref:r,children:[(0,b.jsx)(o.E,{as:"h2",variant:"bodyMediumBold",className:I.A.promoTitle,children:m.Ru.get("concerts.find_more")}),(0,b.jsx)(Mr.v,{as:"span",selected:!0,children:m.Ru.get("concerts.find_nearby")}),(0,b.jsx)("img",{className:I.A.promoImage,alt:"",src:"https://i.scdn.co/image/ab676d63000076a0dbdb7dc2499cbb9ef096518d"})]})}),(0,b.jsx)("div",{className:I.A.disclaimerContainer,children:(0,b.jsx)(o.E,{as:"div",variant:"marginal",semanticColor:"textSubdued",children:m.Ru.get("concerts_near_you.playlist_disclaimer")})})]})},Vr=n(74319),zr=n(13360),qr=n(84140),Wr=(n(48224),n(53921)),$r="multiUserAttributionDisplayNamesV2";function Hr(e){return(0,Ie.Jy)(e)||(0,Ie.xp)(e)}function Kr(e){return(0,Ie.Jy)(e)||(0,Ie.xp)(e)||(0,Ie.pW)(e)}var Qr=a.memo((function(e){var t=e.ariaLabel,n=e.nrTracks,s=e.playlistUri,o=e.playlistName,u=e.isMixedMedia,f=e.isLive,v=e.isBlend,x=e.isConcert,y=e.isBooklist,h=e.canEdit,g=e.scrollToUid,j=e.feedbackPath,A=e.deleteFeedbackPath,R=e.usePlayContextItem,k=e.tracklistRef,C=e.tracklistDomRef,O=e.canRemove,T=e.spec,P=e.initialItems,S=e.isCompactMode,E=void 0!==S&&S,w=e.sortableColumns,I=e.hasSpotifyAudiobooks,D=(0,it.s)(),M=(0,c.NC)(J.LX5),B=(0,a.useContext)(pe.w),F=(0,a.useContext)(L.g).filter,V=(0,a.useContext)(_.cL),z=V.sortState,q=V.setSortState,W=(0,a.useRef)((function(){})),$=(0,a.useState)([]),H=(0,i.A)($,2),K=H[0],Q=H[1],G=(0,l.wA)(),Y=(0,dn.w)(),X=(0,a.useCallback)((function(){null!=k&&k.current&&k.current.update()}),[k]);(0,Ne.H)(s,X);var Z=(0,a.useCallback)((function(e,t){q((0,N.So)(e,z)),D.logInteraction(T.columnHeaderFactory({identifier:e,position:t||0}).hitSort())}),[q,z,D,T]),ee=(0,a.useCallback)((function(e){W.current(),B.remove(s,e)}),[B,s]),te=(0,a.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];O&&(W.current=t,e.length>1&&!n?Q(e):ee(e))}),[O,ee]);(0,a.useEffect)((function(){null!=k&&k.current&&g&&k.current.scrollToItem({uid:g})}),[g,k]);var ne=(0,a.useCallback)(function(){var e=(0,ye.A)(ge().mark((function e(t,n){var r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getContents(s,{offset:t,limit:n,sort:(0,N.Xt)(z),filter:F,decorateFormatListData:!!j||f||v});case 2:return r=e.sent,e.abrupt("return",{items:r.items,totalLength:r.totalLength});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[s,B,z,F,j,f,v]),re=(0,a.useCallback)((function(e,t,n){if(null!=k&&k.current){var r=k.current.getRows()[t];r&&(D.logInteraction(T.dragSort()),n===Hn.Y.Before?B.move(s,e,{before:r}):B.move(s,e,{after:r}))}}),[k,D,T,B,s]),ie=(0,a.useCallback)((function(e,t,n){if(null!=k&&k.current){var r=k.current.getRows()[t];r&&(D.logInteraction(T.dragAddToPlaylist({playlist:s,itemToBeAdded:e[0]})),n===Hn.Y.Before?G((0,p.io)(s,e,{before:{uri:r.uri,uid:r.uid}})):G((0,p.io)(s,e,{after:{uri:r.uri,uid:r.uid}})))}}),[k,D,T,s,G]),ae=(0,a.useCallback)((function(e,t){var n,i,a,l,c,m,p,f,g,k,C,T,P,S=null;if((0,Ie.xp)(e))S=e.show,T=e.images.concat((null===(P=e.show)||void 0===P?void 0:P.images)||[]);else if((0,Ie.Jy)(e)){var w;S=e.album,T=null===(w=e.album)||void 0===w?void 0:w.images}else(0,Ie.pW)(e)&&(T=e.images);var N=(0,Gn.g)(T,{desiredSize:40,desiredLabel:"small"}),L=[];h&&z.order===Kt.H.NONE&&(L=y?[$t.fl.AUDIOBOOKS]:[$t.fl.TRACKS,$t.fl.LOCAL_TRACKS,$t.fl.EPISODES].concat((0,r.A)(I?[$t.fl.AUDIOBOOKS]:[])));var _="1"===(null==e||null===(n=e.formatListAttributes)||void 0===n?void 0:n["dislike-feedback-selected"]),U=!!(0,Ie.xp)(e)&&e.podcastSubscription.isUserSubscribed,D=!1;(0,Ie.xp)(e)&&e.podcastSubscription.isPaywalled&&!U?D=!0:Hr(e)?D=e.isPlayable&&!_:(0,Ie.pW)(e)&&(D=!0);var F=!1;(0,Ie.xp)(e)&&e.podcastSubscription.isPaywalled?F=!0:(0,Ie.pW)(e)&&(F=e.isLocked&&!e.isOutOfMarket);var V=v&&function(e,t){var n,r,i,a,l=[];if(!t)return l;var s=t[$r]?$r:"multiUserAttributionDisplayNames",o=null==t||null===(n=t[s])||void 0===n?void 0:n.split(","),c=null==t||null===(r=t.multiUserAttributionImages)||void 0===r?void 0:r.split(",");if(!o||!c)return l;for(var u,m=(null==t||null===(i=t.multiUserAttributionUsernamesV2)||void 0===i?void 0:i.split(","))||[],p=(null==t||null===(a=t.multiUserAttributionType)||void 0===a?void 0:a.split(","))||[],f=o.length,v=0;v<f;v++){var b=m[v],x=b&&(0,d.Qj)(b).toURI();l.push({username:b,uri:x,displayName:o[v],images:(u=c[v],u.length>1?[{url:u}]:[]),recsplanation:p[v]})}return l.sort((function(t,n){return t.username?t.username===(null==e?void 0:e.username)?-1:n.username===(null==e?void 0:e.username)?1:0:0}))}(e.addedBy,null==e?void 0:e.formatListAttributes)||e.addedBy&&[e.addedBy]||[],q=0;Hr(e)?q=e.duration.milliseconds:(0,Ie.pW)(e)&&(q=e.durationMs||0);var W="";return Kr(e)&&(W=e.name),(0,b.jsx)(qr.W,{isCompactMode:E,index:t,playIndex:null!==(i=e.playIndex)&&void 0!==i?i:void 0,contextUri:s,uri:e.uri,uid:e.uid,isPlayable:D,duration_ms:q,isPaywalled:F,isUserSubscribed:U,name:W,artists:(0,Ie.Jy)(e)?e.artists:void 0,albumOrShow:S,isExplicit:null!==(a=Kr(e)&&e.isExplicit)&&void 0!==a&&a,hasAssociatedVideo:null!==(l=(0,Ie.Jy)(e)&&e.hasAssociatedVideo&&M)&&void 0!==l&&l,isMixedMedia:u,isLocal:(0,Ie.Jy)(e)&&e.isLocal,addedBy:V,hasDecoratedAddedBy:B.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,Ie.xp)(e)&&e.release.date||"",isMOGEFRestricted:((0,Ie.Jy)(e)||(0,Ie.xp)(e))&&e.is19PlusOnly,type:e.type,imgUrl:(null==N?void 0:N.url)||"",onMove:re,onInsert:ie,usePlayContextItem:R,allowedDropTypes:L,feedbackPath:j,feedbackUri:null==e||null===(c=e.formatListAttributes)||void 0===c?void 0:c.feedback_uri,deleteFeedbackPath:A,isDisliked:_,isBlend:v,ticketingSiteURL:null==e||null===(m=e.formatListAttributes)||void 0===m?void 0:m.ticketingSite,eventDate:null==e||null===(p=e.formatListAttributes)||void 0===p?void 0:p.eventDate,canRemove:O,playlistName:o,isConcert:x,concertsCount:null===(f=e.formatListAttributes)||void 0===f?void 0:f.concerts_count,concertURI:null===(g=e.formatListAttributes)||void 0===g?void 0:g.target_uri,concertDate:null===(k=e.formatListAttributes)||void 0===k?void 0:k.first_concert_date,concertVenue:null===(C=e.formatListAttributes)||void 0===C?void 0:C.first_concert_venue,authorName:(0,Ie.pW)(e)?e.authorName:"",isOutOfMarket:!!(0,Ie.pW)(e)&&e.isOutOfMarket,consumptionCapExplanation:(0,Ie.pW)(e)?e.consumptionCapExplanation:void 0,isOwnedBySelf:h},t+e.uri)}),[h,y,z.order,v,E,s,M,u,B,re,ie,R,j,A,O,o,x,I]),le=(0,a.useCallback)((function(e){return{uri:e.uri,uid:e.uid,type:e.type}}),[]),se=(0,U.z1)(),oe=(0,i.A)(se,2)[1];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(hn.pZ,{value:"playlist-tracklist",children:(0,b.jsx)(Qn.S4,{isCompactMode:E,testID:"playlist-tracklist",ariaLabel:t,hasHeaderRow:!0,columns:Y,sortableColumns:w,sortState:z,onSort:Z,onRemove:te,renderRow:ae,resolveItem:le,nrTracks:n,fetchTracks:ne,limit:100,canFetchAllTracks:B.getCapabilities().canFetchAllTracks,outerRef:k,outerDomRef:C,tracks:P,isConcertPlaylist:x,onNrValidItemsChange:oe,columnPersistenceKey:"playlist-tracklist"},s)}),(0,b.jsx)(zr.F,{title:m.Ru.get("playlist.remove_from_playlist",o),isOpen:K.length>0,tracks:K,onClose:function(e){e.stopPropagation(),Q([])},onRemove:ee})]})})),Gr=n(61868),Yr=n(88728),Jr=n(82367),Xr=n(58618),Zr=n(51148),ei=n(70084),ti=n(37686),ni=new ti.l("queryInlineCurationSearchV2","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),ri=new ti.l("queryInlineCurationSearchV2Booklists","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),ii=new ti.l("queryInlineCurationSearchAlbum","query","74a97c6afa1c6c23e1d9b897756fc362ca7e5ed718ac59ba65ffa85f687f7113",null),ai=new ti.l("queryInlineCurationSearchArtist","query","657c07a8943ea6e49c61833dde16d8d51cb64e921dd80827255d6e2519621c34",null),li=n(30142);function si(e){var t,n,r,i,a,l,s,o,c,u,d,p,f;return{type:Wr.c.AUDIOBOOK,uri:e.uri,name:e.name,description:null!==(t=e.htmlDescriptionPlain)&&void 0!==t?t:"",authorName:(null===(n=e.authors)||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.name})).join(m.Ru.getSeparator()))||"",images:null!==(r=null===(i=e.coverArt)||void 0===i?void 0:i.sources)&&void 0!==r?r:[],isLocked:(0,li.e$)(e.accessInfo),isExplicit:(null===(a=e.contentRating)||void 0===a?void 0:a.label)===rt.x7.Explicit,durationMs:null!==(l=null===(s=e.duration)||void 0===s?void 0:s.totalMilliseconds)&&void 0!==l?l:0,topics:(null===(o=e.genres)||void 0===o?void 0:o.map((function(e){return{uri:e.destinationUri,title:e.contextualName}})))||[],signifierText:null!==(c=null===(u=e.accessInfo)||void 0===u||null===(u=u.signifier)||void 0===u?void 0:u.text)&&void 0!==c?c:"",rating:{average:null!==(d=null===(p=e.rating)||void 0===p||null===(p=p.averageRating)||void 0===p?void 0:p.average)&&void 0!==d?d:0,showAverage:!(null===(f=e.rating)||void 0===f||null===(f=f.averageRating)||void 0===f||!f.showAverage)},sharingInfo:e.sharingInfo,publishDate:null,isOutOfMarket:!1,consumptionCapExplanation:null,uid:"",playIndex:null,addedAt:null,addedBy:null,formatListAttributes:null}}var oi=n(68067),ci=n(68135),ui=n(77593),di=n(99665);function mi(e,t){var n,r,i,a,l,s,o,c,u,d,m,p,f,v,b,x;return{albums:null!==(b=e.albumsV2,x=null==b?void 0:b.items.filter((function(e){return"AlbumResponseWrapper"===e.__typename})),n=(null!=x?x:[]).map((function(e){return fi(e)})).filter(di.P)||[])&&void 0!==n?n:[],artists:null!==(f=e.artists,r=(null!==(v=null==f?void 0:f.items)&&void 0!==v?v:[]).map((function(e){return vi(e)})).filter(di.P)||[])&&void 0!==r?r:[],episodes:null!==(m=e.episodes,i=(null!==(p=null==m?void 0:m.items)&&void 0!==p?p:[]).map((function(e){return bi(e)})).filter(di.P)||[])&&void 0!==i?i:[],tracks:null!==(u=e.tracksV2,a=(null!==(d=null==u?void 0:u.items)&&void 0!==d?d:[]).map((function(e){return yi(e.item)})).filter(di.P)||[])&&void 0!==a?a:[],topResults:null!==(s=e.topResultsV2,c=null!==(o=null==s?void 0:s.itemsV2)&&void 0!==o?o:[],l=c.map((function(e){var t=(0,ci.Jt)(e,"item");switch(t.__typename){case"AlbumResponseWrapper":return fi(t);case"ArtistResponseWrapper":return vi(t);case"EpisodeResponseWrapper":return bi(t);case"TrackResponseWrapper":return yi(t);default:return(0,gn.k)(t),null}})).filter(di.P)||[])&&void 0!==l?l:[],query:t}}function pi(e){return{type:Wr.c.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,ui.r)(e.coverArt)}}function fi(e){return"Album"!==e.data.__typename?null:pi(e.data)}function vi(e){if("Artist"!==e.data.__typename)return null;var t=e.data;return{type:Wr.c.ARTIST,uri:t.uri,id:t.id,name:t.profile.name,images:(0,ui.r)(t.visuals.avatarImage)}}function bi(e){var t,n;if("Episode"!==e.data.__typename)return null;var r=e.data,i=r.podcastV2.data;return"Podcast"!==i.__typename?null:{type:Wr.c.EPISODE,uri:r.uri,id:r.id,name:r.name,images:(0,ui.r)(r.coverArt),isExplicit:(null===(t=r.contentRating)||void 0===t?void 0:t.label)===oi.x7.Explicit,is19PlusOnly:(null===(n=r.contentRating)||void 0===n?void 0:n.label)===oi.x7.NineteenPlus,podcast:{id:i.id,uri:i.uri,name:i.name},isPlayable:r.playability.playable}}function xi(e){var t,n,r,i,a,l,s,o=(0,ui.r)((null===(t=e.albumOfTrack)||void 0===t?void 0:t.coverArt)||null);return{type:Wr.c.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:(null===(n=e.albumOfTrack)||void 0===n?void 0:n.name)||"",uri:(null===(r=e.albumOfTrack)||void 0===r?void 0:r.uri)||"",imgUrl:(null===(i=o.at(0))||void 0===i?void 0:i.url)||"",id:(null===(a=e.albumOfTrack)||void 0===a?void 0:a.id)||""},artists:e.artists.items.map((function(e){return{id:e.id,name:e.profile.name,uri:e.uri}})),isPlayable:e.playability.playable,isExplicit:(null===(l=e.contentRating)||void 0===l?void 0:l.label)===oi.x7.Explicit,is19PlusOnly:(null===(s=e.contentRating)||void 0===s?void 0:s.label)===oi.x7.NineteenPlus}}function yi(e){return"Track"!==e.data.__typename?null:xi(e.data)}function hi(e){var t=e.at(0);if(!t)return null;switch(t.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:t.tracks.items.map((function(e){return xi(e.track)}))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,gn.k)(t),null}}function gi(e){var t=e.at(0);if(!t)return null;switch(t.__typename){case"Artist":return{albums:t.discography.popularReleasesAlbums.items.map((function(e){return pi(e)}))||[],artists:[],episodes:[],tracks:t.discography.topTracks.items.map((function(e){return xi(e.track)}))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,gn.k)(t),null}}function ji(e,t){var n,r,i,a;return{albums:[],artists:[],episodes:[],tracks:[],topResults:null!==(r=e.topResultsV2,a=null!==(i=null==r?void 0:r.itemsV2)&&void 0!==i?i:[],n=a.map((function(e){var t=(0,ci.Jt)(e,"item");return"AudiobookResponseWrapper"===t.__typename&&"Audiobook"===t.data.__typename?si(t.data):null})).filter(di.P)||[])&&void 0!==n?n:[],query:t}}var Ai=function(){var e=(0,ye.A)(ge().mark((function e(t,n,r){var i,a,l,s,o,c,u,d=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={term:n,offset:d.length>3&&void 0!==d[3]?d[3]:0,limit:d.length>4&&void 0!==d[4]?d[4]:10,numberOfTopResults:d.length>5&&void 0!==d[5]?d[5]:10},!r){e.next=12;break}return e.next=7,t(ri,a);case 7:if(s=e.sent,o=null==s||null===(l=s.data)||void 0===l?void 0:l.searchV2){e.next=11;break}return e.abrupt("return",null);case 11:return e.abrupt("return",ji(o,n));case 12:return e.next=14,t(ni,a);case 14:if(c=e.sent,u=null==c||null===(i=c.data)||void 0===i?void 0:i.searchV2){e.next=18;break}return e.abrupt("return",null);case 18:return e.abrupt("return",mi(u,n));case 19:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Ri=function(){var e=(0,ye.A)(ge().mark((function e(t,n){var r,i,a,l,s=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={uris:[n],limit:s.length>2&&void 0!==s[2]?s[2]:50,offset:s.length>3&&void 0!==s[3]?s[3]:0},e.next=5,t(ii,i);case 5:if(a=e.sent,l=null==a||null===(r=a.data)||void 0===r?void 0:r.albums){e.next=9;break}return e.abrupt("return",null);case 9:return e.abrupt("return",hi(l));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ki=function(){var e=(0,ye.A)(ge().mark((function e(t,n){var r,i,a,l,s=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={uris:[n],limit:s.length>2&&void 0!==s[2]?s[2]:50,offset:s.length>3&&void 0!==s[3]?s[3]:0},e.next=5,t(ai,i);case 5:if(a=e.sent,l=null==a||null===(r=a.data)||void 0===r?void 0:r.artists){e.next=9;break}return e.abrupt("return",null);case 9:return e.abrupt("return",gi(l));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function Ci(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ci(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ci(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ti=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS",e}({}),Pi=function(e,t){return"GO_BACK"===t.type?1===e.breadcrumbs.length?e:e=Oi(Oi({},e),{},{breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}):"NAV_TO_ENTITY"===t.type?e=Oi(Oi({},e),{},{breadcrumbs:[].concat((0,r.A)(e.breadcrumbs),[t.level])}):("NAV_TO_RESULTS"===t.type?e=Oi(Oi({},e),{},{breadcrumbs:[].concat((0,r.A)(e.breadcrumbs),[t.level])}):"CHANGE_TERM"===t.type&&(e={term:t.term,breadcrumbs:[{navType:Ti.SEARCH,term:t.term,title:""}]}),e)},Si=n(46522);const Ei="YAYCVnYpPvmYV4JyTmn5",wi="FeWwGSRANj36qpOBoxdx",Ii="_h5mio6VqcL_fmiXAb1S",Ni="Hfgj4Zbb2ijt8g54MlCA",Li="sgZ_MgcS1NlccH19fYsa",_i="JzyZE2R09wq7xtjECDeR";var Ui=a.memo((function(e){var t=e.placeholder,n=e.onChange,r=void 0===n?function(){}:n,l=e.onFocus,s=void 0===l?function(){}:l,c=(0,a.useState)(""),u=(0,i.A)(c,2),d=u[0],p=u[1],f=(0,a.useRef)(null),v=(0,W.YQ)((function(e){r(e)}),200),x=(0,a.useCallback)((function(e){var t=e.currentTarget.value;p(t),v(t)}),[p,v]),y=(0,a.useCallback)((function(){f.current&&f.current.focus(),p(""),r("")}),[p,r]),h=(0,a.useCallback)((function(e){"Escape"===e.key&&d&&y()}),[d,y]);return(0,b.jsxs)("div",{className:Ei,role:"search",children:[(0,b.jsx)(o.E,{as:"input",variant:"bodySmall",ref:f,className:Me()(wi),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:t,onChange:x,onKeyDown:h,onFocus:s,value:d}),(0,b.jsxs)("div",{className:Ii,children:[(0,b.jsx)("span",{className:Ni,children:(0,b.jsx)(Si.C,{size:"small",className:Li,"aria-hidden":"true"})}),d&&(0,b.jsx)("button",{className:_i,onClick:y,"aria-label":m.Ru.get("search.a11y.clear-input"),children:(0,b.jsx)(Yr.M,{size:"small"})})]})]})})),Di=(n(66230),n(84341)),Mi=function(e){var t=e.renderRow,n=e.searchResults;return(0,b.jsx)(Qn.S4,{ariaLabel:m.Ru.get("search.title.top-results"),renderRow:t,rowPlaceholder:Di.qq,nrTracks:n.length,tracks:n,resolveItem:function(e){return{uri:e.uri}},columns:[Kt.$.TITLE_AND_ARTIST,Kt.$.ALBUM,Kt.$.ADD]})},Bi=function(e){var t=e.renderRow,n=e.searchResults,r=n.filter((function(e){return e.type===Wr.c.TRACK})),i=n.filter((function(e){return e.type===Wr.c.ALBUM}));return(0,b.jsxs)("div",{children:[(0,b.jsx)(o.E,{as:"p",variant:"bodyMediumBold",className:I.A.artistResultListTitle,children:m.Ru.get("playlist.curation.popular_songs")}),(0,b.jsx)(Qn.S4,{ariaLabel:m.Ru.get("playlist.curation.popular_songs"),renderRow:t,rowPlaceholder:Di.qq,nrTracks:r.length,tracks:r,resolveItem:function(e){return{uri:e.uri}},columns:[Kt.$.TITLE_AND_ARTIST,Kt.$.ALBUM,Kt.$.ADD]}),(0,b.jsx)(o.E,{as:"p",variant:"bodyMediumBold",className:I.A.artistResultListTitle,children:m.Ru.get("playlist.curation.albums")}),(0,b.jsx)(Qn.S4,{ariaLabel:m.Ru.get("playlist.curation.albums"),renderRow:t,rowPlaceholder:Di.qq,nrTracks:i.length,tracks:i,resolveItem:function(e){return{uri:e.uri}},columns:[Kt.$.TITLE_AND_ARTIST,Kt.$.ALBUM,Kt.$.ADD]})]})},Fi=function(e){var t=e.renderRow,n=e.searchResults,r=e.renderSeeAllRow,i=e.seeAllXList;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Qn.S4,{ariaLabel:m.Ru.get("search.title.top-results"),renderRow:t,rowPlaceholder:Di.qq,nrTracks:n.length,tracks:n,resolveItem:function(e){return{uri:e.uri}},columns:[Kt.$.TITLE_AND_ARTIST,Kt.$.ALBUM,Kt.$.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,b.jsx)(Qn.S4,{ariaLabel:m.Ru.get("search.title.all"),renderRow:r,rowPlaceholder:Di.qq,nrTracks:i.length,tracks:i,resolveItem:function(e){return{uri:e.uri}},columns:[Kt.$.TITLE_AND_ARTIST,Kt.$.ALBUM,Kt.$.ADD],testID:"playlist-inline-curation-see-all-options"})]})},Vi=function(e){var t=e.renderRow,n=e.searchResults;return(0,b.jsx)(Qn.S4,{ariaLabel:m.Ru.get("search.title.top-results"),renderRow:t,rowPlaceholder:Di.qq,nrTracks:n.length,tracks:n,resolveItem:function(e){return{uri:e.uri}},columns:[Kt.$.TITLE_AND_ARTIST,Kt.$.ALBUM,Kt.$.ADD]})},zi=function(e){var t=e.renderRow,n=e.searchResults;return(0,b.jsx)(Qn.S4,{ariaLabel:m.Ru.get("search.title.top-results"),renderRow:t,rowPlaceholder:Di.qq,nrTracks:n.length,tracks:n,resolveItem:function(e){return{uri:e.uri}},columns:[Kt.$.TITLE_AND_ARTIST,Kt.$.ALBUM,Kt.$.ADD]})},qi=function(e){var t=e.renderRow,n=e.searchResults;return(0,b.jsx)(Qn.S4,{ariaLabel:m.Ru.get("search.title.top-results"),renderRow:t,rowPlaceholder:Di.qq,nrTracks:n.length,tracks:n,resolveItem:function(e){return{uri:e.uri}},columns:[Kt.$.TITLE_AND_ARTIST,Kt.$.ALBUM,Kt.$.ADD]})},Wi=n(66403),$i=n(22171);const Hi="G2t3w2AAeb5OXp0_GeWs",Ki="saVjTFMyWYUz975_tkQm",Qi="thi8fNCkEhutRkDC90c0",Gi="pHVlkChuJpEnBQyU3ADv",Yi="ENWs3JxcqtD98_8fbPz2",Ji="L8IUKEJL6JiTyE_qUVCc",Xi="XcyjdXgsNX0DBt72tfiD",Zi="VhJnuS7UcUPfIlzD8dlU",ea="He29vQ5anFj_bJ5iEaI2";var ta=function(e){var t,n=e.searchResult,r=e.index,i=e.isRTL,a=e.onClick,l=null===(t=n.images.at(0))||void 0===t?void 0:t.url;return(0,b.jsx)($i.$,{className:Yi,rowIndex:r,"aria-selected":!1,children:(0,b.jsxs)("div",{"aria-label":"".concat(m.Ru.get("artist-page.tracks.seemore")," ").concat(n.name),className:ea,onClick:a,children:[(0,b.jsxs)(Wi.T,{columnIndex:0,className:Ji,children:[void 0!==l?(0,b.jsx)("img",{className:Qi,src:l,alt:n.name}):null,(0,b.jsxs)("div",{className:Xi,children:[(0,b.jsx)(o.E,{as:"p",className:Gi,variant:"bodyMedium",children:n.name}),(0,b.jsx)(o.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:m.Ru.get("album")})]})]}),(0,b.jsx)(Wi.T,{columnIndex:1}),(0,b.jsx)(Wi.T,{columnIndex:2,children:(0,b.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":"See more from ".concat(n.name),className:Zi,onClick:a,children:i?(0,b.jsx)(Xr.g,{}):(0,b.jsx)(Jr.V,{})})})]})})},na=n(73351),ra=function(e){var t=e.size;return(0,b.jsx)("div",{className:Ki,children:(0,b.jsx)(na.r,{size:t})})},ia=function(e){var t,n=e.searchResult,r=e.index,i=e.isRTL,a=e.onClick,l=null===(t=n.images.at(0))||void 0===t?void 0:t.url;return(0,b.jsx)($i.$,{className:Yi,rowIndex:r,"aria-selected":!1,children:(0,b.jsxs)("div",{"aria-label":"".concat(m.Ru.get("artist-page.tracks.seemore")," ").concat(n.name),className:ea,onClick:a,"data-testid":"playlist-inline-curation-artist",children:[(0,b.jsxs)(Wi.T,{columnIndex:0,className:Ji,children:[void 0!==l?(0,b.jsx)("img",{className:Hi,src:l,alt:n.name}):(0,b.jsx)(ra,{size:"small"}),(0,b.jsxs)("div",{className:Xi,children:[(0,b.jsx)(o.E,{as:"p",className:Gi,variant:"bodyMedium",children:n.name}),(0,b.jsx)(o.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:m.Ru.get("artist")})]})]}),(0,b.jsx)(Wi.T,{columnIndex:1}),(0,b.jsx)(Wi.T,{columnIndex:2,children:(0,b.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":"See more from ".concat(n.name),className:Zi,onClick:a,children:i?(0,b.jsx)(Xr.g,{}):(0,b.jsx)(Jr.V,{})})})]})})},aa=n(84470),la=n(65485),sa=n(24009),oa=n(98593),ca=n(31625),ua=a.memo((function(e){var t=e.uid,n=e.uri,r=e.isPlayable,i=e.isMOGEFRestricted,l=e.isExplicit,s=e.contextUri,o=e.name,c=e.imgUrl,u=e.index,d=e.podcast,p=e.usePlayContextItem,f=(0,a.useMemo)((function(){return s.replace("internal:recs:","")}),[s]),v=(0,V.W)(),x=(0,Je.x)(f).addItems,y=p({uid:t,uri:n,index:u}),h=y.isActive,g=y.isPlaying,j=y.triggerPlay,A=y.togglePlay,R=(0,a.useCallback)((function(){x([n],{after:"end"}),v({type:"click",intent:"add-to-playlist",itemIdSuffix:"playlist/add",targetUri:f})}),[x,n,v,f]),k=(0,Ge.T)(n),C=(0,Rn.g)(n,r),O=(0,jn.b)({downloadAvailability:k,isExplicit:l,isMOGEFRestricted:i}),T=O.badges,P=O.hasBadges;return(0,b.jsx)(hn.pZ,{value:"row",index:u,children:(0,b.jsx)($e.h,{menu:(0,b.jsx)(aa.b,{uri:n,contextUri:s}),children:(0,b.jsxs)(Hn.w,{uri:n,contextUri:n,isPlayable:C,onTriggerPlay:function(){j()},isActive:h,ageRestricted:i,index:u,ariaRowIndex:u,dragMetadata:{name:o,createdBy:d.name},children:[(0,b.jsxs)(oa.U,{ariaColIndex:0,children:[(0,b.jsx)(la.u,{uri:n,src:c,onClick:function(){A()},isLocked:!1,isPlaying:g,isActive:h,isEpisode:!0,playAriaLabel:m.Ru.get("tracklist.a11y.play",o,d.name)}),(0,b.jsxs)(Dn.l,{children:[(0,b.jsx)($n.p,{titleText:o,children:o}),P&&(0,b.jsxs)(Tn.P,{children:[T.download&&(0,b.jsx)(xn._,{}),T.explicit&&(0,b.jsx)(Lt.g,{}),T.nineteen&&(0,b.jsx)(yn.q,{className:In.A.nineteen,size:16})]})]})]}),(0,b.jsx)(ca.o,{ariaColIndex:1,children:(0,b.jsx)(Cn.g,{uri:d.uri,name:d.name,children:d.name})}),(0,b.jsx)(sa.l,{ariaColIndex:2,children:(0,b.jsx)(Fe.n,{size:"small",onClick:R,children:m.Ru.get("playlist.extender.button.add")})})]})})})}),(function(e,t){return e.uid===t.uid&&e.uri===t.uri&&e.index===t.index})),da=function(e){var t,n,r=e.episode,i=e.contextUri,a=e.index,l=e.usePlayContextItem;return(0,b.jsx)(ua,{uid:r.id,uri:r.uri,isPlayable:r.isPlayable,isMOGEFRestricted:r.is19PlusOnly,isExplicit:r.isExplicit,contextUri:i,name:r.name,imgUrl:null!==(t=null===(n=r.images.at(0))||void 0===n?void 0:n.url)&&void 0!==t?t:"",index:a,podcast:r.podcast,usePlayContextItem:l})},ma=function(e){var t=e.label,n=e.index,r=e.isRTL,i=e.onClick;return(0,b.jsx)($i.$,{className:Yi,rowIndex:n,"aria-selected":!1,children:(0,b.jsxs)("div",{"aria-label":t,className:ea,onClick:i,children:[(0,b.jsx)(Wi.T,{columnIndex:0,className:Ji,children:(0,b.jsx)(o.E,{as:"p",className:Gi,variant:"bodyMedium",children:t})}),(0,b.jsx)(Wi.T,{columnIndex:1}),(0,b.jsx)(Wi.T,{columnIndex:2,children:(0,b.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":t,className:Zi,onClick:i,children:r?(0,b.jsx)(Xr.g,{}):(0,b.jsx)(Jr.V,{})})})]})})},pa=a.memo((function(e){var t,n=e.uid,r=e.uri,i=e.name,l=e.imgUrl,s=e.artists,o=e.isExplicit,c=e.index,u=e.album,d=e.contextUri,p=e.isPlayable,f=e.isMOGEFRestricted,v=e.usePlayContextItem,x=e.durationMs,y=e.shouldRenderDuration,h=e.internalLink,g=(0,be.r)(mn.i,{data:{position:c,reason:"",uri:r}}),j=g.spec,A=g.logger,R=(0,a.useMemo)((function(){return d.replace("internal:recs:","")}),[d]),k=(0,V.W)(),C=(0,Je.x)(R).addItems,O=v({uid:n,uri:r,index:c}),T=O.isActive,P=O.isPlaying,S=O.triggerPlay,E=O.togglePlay,w=(0,a.useCallback)((function(){A.logInteraction(j.addButtonFactory().hitAddToPlaylist({playlist:R,itemToBeAdded:r})),C([r],{after:"end"}),k({type:"click",intent:"add-to-playlist",itemIdSuffix:"playlist/add",targetUri:R})}),[A,j,R,r,C,k]),I=(0,Ge.T)(r),N=(0,Rn.g)(r,p),L=s.map((function(e){return e.name})).join(m.Ru.getSeparator()),_=(0,jn.b)({downloadAvailability:I,isExplicit:o,isMOGEFRestricted:f}),U=_.badges,D=_.hasBadges,M=y&&x,B=s.map((function(e){return e.name})).join(m.Ru.getSeparator()),F=(0,bn.c)();return(0,b.jsx)(hn.pZ,{value:"row",index:c,children:(0,b.jsx)($e.h,{menu:(0,b.jsx)(kn.P,{uri:r,albumUri:u.uri,artists:s,contextUri:d}),children:(0,b.jsxs)(Hn.w,{uri:r,contextUri:d,isPlayable:N,onTriggerPlay:function(e,t){S({loggingParams:t})},isActive:T,ageRestricted:f,index:c,ariaRowIndex:c,dragMetadata:{name:i,createdBy:L},spec:j,className:In.A.isRecommendedTrackListRow,children:[(0,b.jsxs)(oa.U,{ariaColIndex:0,children:[(0,b.jsx)(la.u,{uri:r,src:l,onClick:function(e,t){E({loggingParams:t})},isLocked:!1,isPlaying:P,isActive:T,playAriaLabel:m.Ru.get("tracklist.a11y.play",i,L),spec:j}),(0,b.jsxs)(Dn.l,{children:[h&&F?(0,b.jsx)(Ke.default,{to:r,className:In.A.rowTitle,"data-testid":"internal-track-link",children:(0,b.jsx)($n.p,{titleText:i,children:i})}):(0,b.jsx)($n.p,{titleText:i,children:i}),D&&(0,b.jsxs)(Tn.P,{children:[U.explicit&&(0,b.jsx)(Lt.g,{}),U.download&&(0,b.jsx)(xn._,{}),U.nineteen&&(0,b.jsx)(yn.q,{className:In.A.nineteen,size:16})]}),(0,b.jsx)(qn.p,{children:(0,b.jsx)(On.l,{artists:s,spec:j})})]})]}),(0,b.jsx)(ca.o,{ariaColIndex:1,children:(0,b.jsx)(Cn.g,{uri:u.uri,name:u.name,creatorUri:null==s||null===(t=s[0])||void 0===t?void 0:t.uri,spec:j,children:u.name})}),(0,b.jsx)(ca.o,{ariaColIndex:2,children:(0,b.jsx)("span",{})}),(0,b.jsxs)(sa.l,{ariaColIndex:3,children:[M?(0,b.jsx)(An.d,{uri:r}):null,M?(0,b.jsx)(_n.P,{duration:x,dataTestId:"render-duration"}):(0,b.jsx)(Fe.n,{size:"small",onClick:w,"aria-label":m.Ru.get("addToPlaylist-icon.label"),"data-testid":"add-to-playlist-button",children:m.Ru.get("playlist.extender.button.add")}),M?(0,b.jsx)(Fn.Y,{menu:(0,b.jsx)(kn.P,{uri:r,albumUri:u.uri,contextUri:d,artists:s}),label:m.Ru.get("more.label.track",i,B)}):null]})]})})})}),(function(e,t){return e.uid===t.uid&&e.uri===t.uri&&e.index===t.index})),fa=function(e){var t=e.track,n=e.contextUri,r=e.index,i=e.usePlayContextItem;return(0,b.jsx)(pa,{uid:t.id,uri:t.uri,isPlayable:t.isPlayable,isMOGEFRestricted:t.is19PlusOnly,isExplicit:t.isExplicit,contextUri:n,name:t.name,imgUrl:t.album.imgUrl,index:r,album:t.album,artists:t.artists,usePlayContextItem:i})},va=function(e){var t,n=e.resultList,r=e.level,i=e.isRTL,l=e.playlistUri,s=e.navToResults,c=e.navToEntity,u=e.term,p=e.isBooklist,f=n,v=function(e){return e.map((function(e){if(e.type===Wr.c.TRACK||e.type===Wr.c.EPISODE){var t=e.uri,n=e.id;return{type:(0,d.U_)(t)?Wr.c.TRACK:Wr.c.EPISODE,uri:t,uid:n,provider:null}}return null})).filter(di.P)}(n),x=(0,F.P)(),y=x.draggable,h=x.onDragStart,g=(0,re.P)({uri:"".concat(l.replace("spotify:","spotify:internal:recs:"),":").concat(encodeURIComponent(u),":").concat(null!==(t=null==r?void 0:r.navType)&&void 0!==t?t:0),pages:[{items:v}]},{featureIdentifier:"search"}).usePlayContextItem,j=(0,a.useCallback)((function(e,t){return(0,b.jsx)(ma,{isRTL:i,index:t,label:e.label,onClick:function(){s({navType:e.type,term:u,title:e.label})}},e.uri)}),[i,s,u]),A=(0,a.useCallback)((function(e,t){return e.type===Wr.c.ARTIST?(0,b.jsx)(ia,{isRTL:i,index:t,searchResult:e,onClick:function(){c({navType:Ti.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===Wr.c.EPISODE?(0,b.jsx)(da,{index:t,episode:e,contextUri:l.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:g},e.uri):e.type===Wr.c.TRACK?(0,b.jsx)(fa,{index:t,track:e,contextUri:l.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:g},e.uri):e.type===Wr.c.ALBUM?(0,b.jsx)(ta,{index:t,isRTL:i,searchResult:e,onClick:function(){c({navType:Ti.ALBUM,uri:e.uri,title:e.name})}},e.uri):(0,b.jsx)(Wt,{book:e,featureIdentifier:"playlist_recommendations",contextUri:l,isRecommendation:!0,showSeparator:0!==t},e.uri)}),[i,c,l,g]);if(""===u)return(0,b.jsx)("div",{className:I.A.emptySearchTermContainer});if(!n||0===(null==n?void 0:n.length))return(0,b.jsxs)("div",{className:I.A.emptyStateContainer,children:[(0,b.jsx)(o.E,{as:"h1",variant:"titleSmall",children:m.Ru.get("search.empty-results-title",u)}),(0,b.jsx)(o.E,{as:"p",variant:"bodySmall",children:m.Ru.get("search.empty-results-text")})]});if((null==r?void 0:r.navType)===Ti.SEARCH){var R=[{type:Ti.ARTISTRESULTS,label:m.Ru.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:Ti.ALBUMRESULTS,label:m.Ru.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:Ti.TRACKRESULTS,label:m.Ru.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return f=n,p?(0,b.jsx)(b.Fragment,{children:f.map((function(e,t){return e&&e.type===Wr.c.AUDIOBOOK?(0,b.jsx)(Wt,{contextUri:l,featureIdentifier:"playlist_recommendations",book:e,isRecommendation:!0,draggable:y,onDragStart:function(t){h(t,{itemUris:[e.uri],itemMimeTypes:[$t.fl.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==t},t):null}))}):(0,b.jsx)(Fi,{renderRow:A,searchResults:f,renderSeeAllRow:j,seeAllXList:R})}return(null==r?void 0:r.navType)===Ti.ALBUM?(0,b.jsx)(Mi,{renderRow:A,searchResults:f}):(null==r?void 0:r.navType)===Ti.ARTIST?(0,b.jsx)(Bi,{renderRow:A,searchResults:f}):(null==r?void 0:r.navType)===Ti.ALBUMRESULTS?(0,b.jsx)(Vi,{renderRow:A,searchResults:f}):(null==r?void 0:r.navType)===Ti.TRACKRESULTS?(0,b.jsx)(qi,{renderRow:A,searchResults:f}):(null==r?void 0:r.navType)===Ti.ARTISTRESULTS?(0,b.jsx)(zi,{renderRow:A,searchResults:f}):null},ba=function(e){var t=e.playlistUri,n=e.onCurationModeChange,l=e.isBooklist,s=(0,a.useState)([]),c=(0,i.A)(s,2),u=c[0],d=c[1],p=(0,a.useState)(),f=(0,i.A)(p,2),v=f[0],x=f[1],y=(0,Zr.W)(),h=function(){var e=(0,a.useReducer)(Pi,{term:"",breadcrumbs:[]}),t=(0,i.A)(e,2),n=t[0],r=t[1],l=n.breadcrumbs,s=n.term;return{changeTerm:function(e){r({type:"CHANGE_TERM",term:e})},level:l[l.length-1]||null,goBack:function(){r({type:"GO_BACK"})},navToEntity:function(e){r({type:"NAV_TO_ENTITY",level:e})},navToResults:function(e){r({type:"NAV_TO_RESULTS",level:e})},term:s}}(),g=h.level,j=h.changeTerm,A=h.goBack,R=h.navToEntity,k=h.navToResults,C=h.term,O=(0,a.useContext)(ei.j).request;return(0,a.useEffect)((function(){var e=!0,t=function(){var t=(0,ye.A)(ge().mark((function t(){var n,i,a;return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(g){t.next=2;break}return t.abrupt("return");case 2:t.t0=g.navType,t.next=t.t0===Ti.SEARCH?5:t.t0===Ti.ARTISTRESULTS?21:t.t0===Ti.ALBUMRESULTS?23:t.t0===Ti.TRACKRESULTS?25:t.t0===Ti.EPISODERESULTS?27:t.t0===Ti.ALBUM?29:t.t0===Ti.ARTIST?40:51;break;case 5:if(t.prev=5,v&&(v.query===C||""===C)){t.next=13;break}return t.next=9,Ai(O,C,l);case 9:n=t.sent,e&&x(n),t.next=14;break;case 13:""===C&&d([]);case 14:t.next=19;break;case 16:t.prev=16,t.t1=t.catch(5),d([]);case 19:return v&&d(v.topResults),t.abrupt("break",52);case 21:return v&&d(null==v?void 0:v.artists),t.abrupt("break",52);case 23:return v&&d(null==v?void 0:v.albums),t.abrupt("break",52);case 25:return v&&d(null==v?void 0:v.tracks),t.abrupt("break",52);case 27:return v&&d(null==v?void 0:v.episodes),t.abrupt("break",52);case 29:return t.prev=29,t.next=32,Ri(O,g.uri,100,0);case 32:i=t.sent,e&&i&&d(i.tracks),t.next=39;break;case 36:t.prev=36,t.t2=t.catch(29),d([]);case 39:return t.abrupt("break",52);case 40:return t.prev=40,t.next=43,ki(O,g.uri,100,0);case 43:a=t.sent,e&&a&&d([].concat((0,r.A)(a.albums),(0,r.A)(a.tracks))),t.next=50;break;case 47:t.prev=47,t.t3=t.catch(40),d([]);case 50:case 51:return t.abrupt("break",52);case 52:case"end":return t.stop()}}),t,null,[[5,16],[29,36],[40,47]])})));return function(){return t.apply(this,arguments)}}();return t(),function(){e=!1}}),[g,C,v,O,l]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("section",{className:I.A.playlistInlineCurationSection,children:[(0,b.jsxs)("div",{className:I.A.playlistInlineCurationWrapper,children:[(0,b.jsx)(o.E,{as:"h1",className:I.A.playlistInlineCurationTitle,variant:"titleSmall",children:m.Ru.get("playlist.curation.title")}),(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsx)(Ui,{placeholder:l?m.Ru.get("playlist.curation.search_placeholder-booklists"):m.Ru.get("playlist.curation.search_placeholder"),onFocus:function(){n(!0)},onChange:function(e){j(e)}})})]}),(0,b.jsx)("button",{className:I.A.playlistInlineCurationCloseButton,onClick:function(){return n(!1)},children:(0,b.jsx)(Yr.M,{"aria-label":m.Ru.get("close")})})]}),null!==g&&g.navType!==Ti.SEARCH?(0,b.jsxs)("button",{className:I.A.playlistInlineCurationBackButton,onClick:function(){return A()},children:[y?(0,b.jsx)(Jr.V,{"aria-label":m.Ru.get("navbar.go-back"),className:I.A.icon}):(0,b.jsx)(Xr.g,{"aria-label":m.Ru.get("navbar.go-back"),className:I.A.icon}),(0,b.jsx)(o.E,{as:"p",variant:"bodyMediumBold",children:g.title})]}):null,(0,b.jsx)("div",{className:I.A.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,b.jsx)(va,{playlistUri:t,term:C,level:g,resultList:u,navToEntity:R,navToResults:k,isRTL:y,isBooklist:l})})]})},xa=n(71128);n(3521),n(32693),n(63222);function ya(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ha={ARTIST:"artist",ALBUM:"album",PLAYLIST:"playlist",TRACK:"track",USER:"user"},ga=function(e){var t=/^spotify:(.*)$/.exec(e);if(!t)return{type:null,id:null};for(var n,r,i=t[1],a=/([^:]+):([^:]+)/g,l=[],s=[];n=a.exec(i);){var o=n[1],c=n[2];o===ha.USER&&(r=void 0,r=c.replace(/\+/g,"%20"),c=decodeURIComponent(r)),l.push(o),s.push(c)}if(0===l.length)return{type:null,id:null};var u=l.reduce((function(e,t,n){return e[l[n]]=s[n],e}),{});return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ya(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ya(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:l[l.length-1],id:s[s.length-1]},u)},ja=n(11244),Aa=n(84828),Ra=new ti.l("getAudiobooksMetadata","query","e04c61a831b3e1861a5de961c520ddf7834127ef8e4b94724173a4c4a90e38fe",null),ka=3e5;function Ca(e,t){return["list-extender",e,t]}var Oa=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,l=arguments.length>3?arguments[3]:void 0,s=2*n,o=3*n,c=(0,Xe.jE)(),d=(0,a.useRef)(0),m=(0,a.useState)(e),p=(0,i.A)(m,2),f=p[0],v=p[1],b=(0,a.useState)((function(){var n,r;return null!==(n=null===(r=c.getQueriesData({queryKey:Ca(e,t),stale:!1}).at(0))||void 0===r?void 0:r[1])&&void 0!==n?n:[]})),x=(0,i.A)(b,2),y=x[0],h=x[1],g=(0,a.useRef)(y.map((function(e){var t;return null!==(t=e.uri)&&void 0!==t?t:""}))),j=(0,be.r)(u.K,{data:{uri:e}}),A=j.spec,R=j.logger,k=(0,a.useMemo)((function(){return A.recommendedFactory()}),[A]);(0,Aa.e)(ja.Lj.OPERATION_COMPLETE,(function(n){var r=n.data;r.uri===e&&(r.operation===ja.sP.ADD?h((function(e){return e.filter((function(e){return r.uris.every((function(t){return t!==e.uri}))}))})):r.operation===ja.sP.REMOVE&&h((function(e){return e.filter((function(e){return r.items.every((function(t){return t.uri!==e.uri}))}))})),r.operation!==ja.sP.ADD&&r.operation!==ja.sP.REMOVE||c.invalidateQueries({queryKey:Ca(e,t)}))}));var C=(0,a.useRef)(!0);(0,a.useEffect)((function(){return C.current||(h([]),v(e),g.current=[],d.current=d.current+1),C.current=!0,function(){d.current=d.current+1}}),[e]),(0,a.useEffect)((function(){if(y.length<s){var e=Math.min(s,o-y.length),n=d.current,i=Ca(f,t),a=C.current&&0===g.current.length;(a?c.fetchQuery({queryKey:i,queryFn:function(){return l(f,[],e)},staleTime:ka,gcTime:ka}):l(f,g.current,e)).then((function(t){if(n===d.current&&t){var l=t.map((function(e){return(null==e?void 0:e.uri)&&e.uri})).filter((function(e){return null!==e}));t.length<e&&g.current.length?g.current=[]:g.current=[].concat((0,r.A)(g.current),(0,r.A)(l)),h((function(e){return[].concat((0,r.A)(e),(0,r.A)(t))})),a&&c.setQueryData(i,t)}}))}C.current=!1}),[s,o,f,y.length,c,l,t]);var O=(0,a.useCallback)((function(){if(A){var e=k.refreshButtonFactory().hitRefreshContent();R.logInteraction(e)}h((function(e){return e.slice(n)}))}),[R,k,A,n]);return{recommendations:y.slice(0,n),_bufferedRecommendations:y.slice(n),refresh:O}},Ta=a.memo((function(e){var t=e.uri,n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=(0,a.useContext)(pe.w),r=(0,a.useContext)(ei.j).request,i=(0,a.useCallback)(function(){var e=(0,ye.A)(ge().mark((function e(t,i,a){var l,s,o,c;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getRecommendedBookUris(t,i,a);case 2:return o=e.sent,e.next=5,r(Ra,{uris:o});case 5:return c=e.sent,e.abrupt("return",null!==(l=null==c||null===(s=c.data)||void 0===s?void 0:s.podcasts.map((function(e){return"Audiobook"===e.__typename?si(e):null})).filter(di.P))&&void 0!==l?l:[]);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[n,r]);return Oa(e,"book",t,i)}(t),r=n.recommendations,i=n.refresh,l=(0,F.P)(),s=l.draggable,c=l.onDragStart,u=(0,xa.p)();return u?null!=r&&r.length&&r.length>0?(0,b.jsxs)("div",{className:I.A.recommendedTrackList,children:[(0,b.jsx)("div",{className:I.A.top,children:(0,b.jsxs)("div",{className:I.A.header,children:[(0,b.jsx)(o.E,{variant:"titleSmall",children:m.Ru.get("playlist.extender.recommended.title")}),(0,b.jsx)(o.E,{variant:"bodySmall",className:I.A.subtitle,children:m.Ru.get("playlist.extender.songs.in.playlist")})]})}),u&&(0,b.jsxs)(b.Fragment,{children:[r.map((function(e,n){return e?(0,b.jsx)(Wt,{contextUri:t,featureIdentifier:"playlist_recommendations",book:e,sharingInfo:e.sharingInfo,isRecommendation:!0,draggable:s,onDragStart:function(t){c(t,{itemUris:[e.uri],itemMimeTypes:[$t.fl.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==n},n):null})),(0,b.jsx)(hr.H,{className:I.A.refreshButton,onClick:i,children:m.Ru.get("playlist.extender.refresh")})]})]}):null:(0,b.jsx)("div",{className:I.A.recommendedTrackList,children:(0,b.jsx)("div",{className:I.A.top,children:(0,b.jsxs)("div",{className:I.A.header,children:[(0,b.jsx)(o.E,{variant:"titleSmall",children:m.Ru.get("playlist.extender.recommended.title")}),(0,b.jsx)(o.E,{variant:"bodySmall",className:I.A.subtitle,children:m.Ru.get("web-player.playlist.recommender-dsa-message")})]})})})})),Pa=n(46534);function Sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sa(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wa=a.memo((function(e){var t=e.playlistUri,n=e.canEdit,r=e.tracks,i="1"===(0,Pa.$)("filter-age-restricted-content"),l=(0,re.P)({uri:t.replace("spotify:","spotify:internal:recs:"),pages:[{items:r.map((function(e){return Ea(Ea({},e),{},{provider:null,type:Wr.c.TRACK,uid:null})}))}]},{featureIdentifier:"playlist_recommendations"}).usePlayContextItem,s=(0,a.useCallback)((function(e,r){var a=e.duration;return(0,b.jsx)(pa,{index:r,imgUrl:e.album.imageUrl,contextUri:t.replace("spotify","spotify:internal:recs"),uri:e.uri,isPlayable:!(i&&e.isMOGEFRestricted),name:e.name,artists:e.artists,album:Ea(Ea({},e.album),{},{imgUrl:e.album.imageUrl}),isExplicit:e.explicit,isMOGEFRestricted:e.isMOGEFRestricted,usePlayContextItem:l,durationMs:a,shouldRenderDuration:!n,internalLink:!0},"".concat(r,"-").concat(e.uri))}),[t,i,l,n]),o=(0,a.useMemo)((function(){return[Kt.$.TITLE_AND_ARTIST,Kt.$.ALBUM,Kt.$.ADDED_AT,Kt.$.ADD]}),[]),c=(0,a.useCallback)((function(e){return{uri:e.uri,uid:e.id}}),[]),u=(0,a.useMemo)((function(){return r.slice(0,Math.min(r.length,10))}),[r]);return(0,b.jsx)(Qn.S4,{ariaLabel:m.Ru.get("playlist.extender.recommended.header"),nrTracks:Math.min(r.length,10),rowPlaceholder:Di.qq,tracks:u,renderRow:s,resolveItem:c,columns:o},"".concat(t,"-recommended"))})),Ia=a.memo((function(e){var t=e.playlistUri,n=e.playlistLength,r=e.canEdit,i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=(0,a.useContext)(pe.w),r=(0,a.useCallback)(function(){var e=(0,ye.A)(ge().mark((function e(t,r,i){var a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.map((function(e){var t;return null!==(t=ga(e).id)&&void 0!==t?t:""})),e.abrupt("return",n.getRecommendedTracks(t,a,i));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[n]);return Oa(e,"track",t,r)}(t),l=i.recommendations,s=i.refresh,c=!n||0===n,u=(0,xa.p)(),d=c?m.Ru.get("playlist.extender.title.in.playlist"):m.Ru.get("playlist.extender.songs.in.playlist");return u?l.length>0?(0,b.jsxs)("div",{className:I.A.recommendedTrackList,children:[(0,b.jsx)("div",{className:I.A.top,children:(0,b.jsxs)("div",{className:I.A.header,children:[(0,b.jsx)(o.E,{variant:"titleSmall",children:m.Ru.get("playlist.extender.recommended.title")}),(0,b.jsx)(o.E,{variant:"bodySmall",className:I.A.subtitle,children:d})]})}),u&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(wa,{playlistUri:t,canEdit:r,tracks:l}),(0,b.jsx)(hr.H,{className:I.A.refreshButton,onClick:s,children:m.Ru.get("playlist.extender.refresh")})]})]}):null:(0,b.jsx)("div",{className:I.A.recommendedTrackList,children:(0,b.jsx)("div",{className:I.A.top,children:(0,b.jsxs)("div",{className:I.A.header,children:[(0,b.jsx)(o.E,{variant:"titleSmall",children:m.Ru.get("playlist.extender.recommended.title")}),(0,b.jsx)(o.E,{variant:"bodySmall",className:I.A.subtitle,children:m.Ru.get("web-player.playlist.recommender-dsa-message")})]})})})})),Na=a.lazy((function(){return n.e(4789).then(n.bind(n,53129))})),La=a.lazy((function(){return Promise.resolve().then(n.bind(n,14604))})),_a=a.lazy((function(){return n.e(3632).then(n.bind(n,93081))})),Ua=a.lazy((function(){return n.e(9718).then(n.bind(n,31577))})),Da=new Set([]),Ma=a.memo((function(e){var t,n,f,v,x,y,h,g=e.playlist,j=e.capabilities,C=g.metadata,O=C.uri,T=C.name,P=C.images,S=C.totalLength,E=C.unfilteredTotalLength,w=C.isOwnedBySelf,ee=C.hasEpisodes,te=C.canAdd,ie=C.canRemove,ae=C.formatListData,le=C.hasDateAdded,se=C.collaborators,ue=C.isPublished,de=C.hasSpotifyAudiobooks,fe=C.hasSpotifyTracks,ye=g.contents.items,he=(0,be.r)(u.K,{data:{uri:O}}),ge=he.spec,je=he.logger,Ae=he.UBIFragment,Re=(0,z.n)(),ke=(0,c.NC)(xe.Cf,{loadingValue:!1}),Ce=(0,c.NC)(xe.Mc,{loadingValue:!1}),Oe=(0,c.NC)(J.FQE,{loadingValue:!1}),Te=(0,B.a)().isCompactMode,Pe=a.useMemo((function(){return ge.headerFactory()}),[ge]),Se=a.useMemo((function(){return ge.tracklistFactory()}),[ge]),Ee=a.useMemo((function(){return ge.actionBarFactory()}),[ge]),we="chart"===(null==ae?void 0:ae.type),Ie="concerts-near-you"===(null==ae?void 0:ae.type)&&ke,Ne="live-streams"===(null==ae?void 0:ae.type),Le=["blend","celebrity-blend","friends-mix"].indexOf((null==ae?void 0:ae.type)||"")>-1,_e=[fe,ee,de].filter(Boolean).length>1,Ue=!_e&&!!de&&(0,Gr.R)(ye),De="artistsets"===(null==ae?void 0:ae.type)||"this-is"===(null==ae?void 0:ae.attributes["editorial.series"]),Me=(null==ae?void 0:ae.attributes)||{},Be=Me.header_image_url_desktop||Me.image_url||null,Fe=te&&ie,Ve=function(e,t){var n=(0,a.useState)(e&&0===t),r=(0,i.A)(n,2),l=r[0],s=r[1],o=(0,a.useContext)(Z.bi).scrollNodeChildRef,c=(0,a.useRef)(l);return(0,a.useEffect)((function(){var e,t=!c.current;o&&t&&l&&(null===(e=o.current)||void 0===e||e.scrollIntoView({block:"end",behavior:"smooth"})),c.current=l}),[o,l]),{inlineCurationModeIsOn:l,handleInlineCurationModeChange:function(e){s(e)}}}(Fe&&(!Ue||Ce&&Oe),E),ze=Ve.inlineCurationModeIsOn,qe=Ve.handleInlineCurationModeChange,We=(0,l.d4)(X.Ht).productState,$e=!(null==We||!We.ads)&&parseInt(We.ads,10)>0,He="spotify"===g.metadata.owner.username,Ke=(0,l.wA)(),Qe=(0,s.wQ)(),Ge=(0,s.zy)(),Ye=(0,c.NC)(J.$pS,{loadingValue:!1}),Je=(0,c.NC)(J.vQ3,{loadingValue:!1}),Xe=(0,c.NC)(J.UPi,{loadingValue:!1}),Ze=null===(t=(0,M.useThisisPlaylistExtensionQuery)({uri:O},{gcTime:5*ne.i,enabled:De}).data)||void 0===t?void 0:t.playlistV2,et="Playlist"===(null==Ze?void 0:Ze.__typename)?null===(n=Ze.artistsOnTour)||void 0===n?void 0:n[0]:null,tt=Xe&&"Playlist"===(null==Ze?void 0:Ze.__typename)?null===(f=Ze.concerts)||void 0===f?void 0:f.items.map((function(e){return e.data})):null,nt=null==tt?void 0:tt.flatMap((function(e){return"ConcertV2"===e.__typename?[e]:[]})).map((function(e){var t,n=[e.location.name,e.location.city].join(m.Ru.getSeparator()),r=e.artists.items.flatMap((function(e){return"Artist"===e.data.__typename?[e.data]:[]}));return{venue:n,title:e.title,uri:e.uri,startDate:e.startDateIsoString,imageUrl:null===(t=r[0])||void 0===t||null===(t=t.visuals.avatarImage)||void 0===t||null===(t=t.sources[0])||void 0===t?void 0:t.url}})),rt="POP"!==Qe?new URLSearchParams(Ge.search).get("uid"):null,it=(0,V.W)(),at=(0,a.useContext)(L.g).filter,lt=(0,a.useContext)(_.cL).sortState,st=(0,a.useContext)(pe.w),ot=(0,a.useRef)(null),ct=(0,a.useRef)(null),ut=(0,i.A)(P,1)[0],dt=(0,q.H)(null!==Be?Be:(null==ut?void 0:ut.url)||null),mt=(0,re.P)(function(e,t,n){var r={uri:e};return oe(r,t),me(r,(0,ce.HI)(n)),r}(O,(0,N.Xt)(lt),at),{featureIdentifier:"playlist"}),pt=mt.isPlaying,ft=mt.isActive,vt=mt.togglePlay,bt=mt.usePlayContextItem,xt=(0,a.useCallback)((function(){var e=(0,Y.$I)({isPlaying:pt,isActive:ft,spec:Ee.playButtonFactory(),logger:je,uri:O});vt({loggingParams:e})}),[pt,ft,vt,Ee,je,O]),yt=(0,a.useCallback)((function(e){var t=e.split(/[\r\n]+/g).map((function(e){return(0,d.o_)(e)})).filter((function(e){return null!==e&&((0,d.U_)(e)||(0,d.gH)(e)||(0,d.Pk)(e))}));if(t.length>0&&te){var n,r=t.map((function(e){return e.toURI()})),i=null===(n=ot.current)||void 0===n||null===(n=n.getSelected())||void 0===n||null===(n=n.slice(-1))||void 0===n?void 0:n[0],a={after:null!=i?i:"end"};Ke((0,p.io)(O,r,a))}}),[te,Ke,O]);x=yt,y=(0,a.useContext)(H.A),h=(0,W.YQ)((function(){y.paste().then((function(e){return x(e)}))}),500,{leading:!0,trailing:!1}),(0,$.f)(G,h),(0,Q.x)(K.W.PASTE,h);var ht=(0,a.useCallback)((function(e,t){var n=[].concat((0,r.A)(t[F.O[d.NQ.TRACK]]||[]),(0,r.A)(t[F.O[d.NQ.LOCAL_TRACK]]||[]),(0,r.A)(t[F.O[d.NQ.EPISODE]]||[]),(0,r.A)(t[F.O[d.NQ.ALBUM]]||[]));n.length>0&&te&&(je.logInteraction(ge.dragAddToPlaylist({playlist:O,itemToBeAdded:n[0]})),Ke((0,p.io)(O,n)),it({targetUri:O,intent:"add",type:"drop"}))}),[te,je,ge,O,Ke,it]),gt=!He&&0!==E,jt=!Ue&&Re&&(Fe&&!ze||gt),At=Ue&&Ce&&Oe&&Re&&(Fe&&!ze||gt),Rt=(!Ue||Ce&&Oe)&&w&&Re,kt=!Fe&&!Ue&&!gt&&Re,Ct=null!==(v=null==se?void 0:se.count)&&void 0!==v?v:1,Ot=(0,U.z1)(),Tt=(0,i.A)(Ot,1)[0],Pt="plays"===Me.rank_type,St=(0,a.useMemo)((function(){return(0,N.Ey)({isMixedMedia:_e,hasEpisodes:ee,hasSpotifyAudiobooks:de,hasDateAdded:le,isLive:Ne,isConcert:Ie,isBlend:Le,nrCollaborators:Ct,isBooklist:Ue,isCompactMode:Te,isChart:we,showPlayCount:Pt})}),[_e,ee,de,le,Ne,Ie,Le,Ct,Ue,Te,we,Pt]),Et=(0,a.useMemo)((function(){return st.getCapabilities().canSort?Ue?new Set(_.dh):new Set((0,N.zq)(St)):Da}),[St,Ue,st]),wt=Oe&&Ue&&!Te;return(0,b.jsxs)(a.Suspense,{fallback:null,children:[(0,b.jsx)(k.Q,{children:(0,ve.Q2)({playlistName:T,userName:g.metadata.owner.displayName||"",isSpotifyOwned:He})}),(0,b.jsx)(R.A,{types:te&&!Ue?[F.O[d.NQ.TRACK],F.O[d.NQ.LOCAL_TRACK],F.O[d.NQ.EPISODE],F.O[d.NQ.ALBUM]]:[],onDrop:ht,children:(0,b.jsxs)("section",{role:"presentation",className:I.A.playlist,"data-testid":"playlist-page","data-test-uri":O,children:[(0,b.jsx)(Vr.x,{metadata:g.metadata,isPlaying:pt,isPublished:ue,totalItems:Tt,togglePlay:xt,backgroundColor:dt,spec:Pe}),(0,b.jsxs)("div",{className:I.A.playlistContent,children:[(0,b.jsx)(Dr,{playlist:g,capabilities:j,spec:Ee,isPlaying:pt,isActive:ft,togglePlay:xt,isBooklist:Ue,backgroundColor:dt,tracklistDomRef:ct,isConcert:Ie,sortableColumns:Et}),(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsx)(Na,{formatListData:g.metadata.formatListData})}),!Xe&&null!=et&&et.upcomingEventsCount?(0,b.jsx)(La,{artistConcertsUri:et.uri||"",artistImageUrl:et.imageUrl||"",artistName:et.title||"",spec:ge}):null,Xe&&!!et&&nt&&nt.length>0&&(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsx)(_a,{liveEvents:nt,artistConcertsUri:et.uri||"",artistName:et.title||"",spec:ge})}),(0,b.jsxs)("div",{className:"contentSpacing",children:[$e?(0,b.jsx)(A,{playlistUri:O}):null,Ye&&$e&&He?(0,b.jsx)(Ua,{uri:O,playlistName:T}):null,g.metadata.hasSpotifyAudiobooks&&Je&&(0,b.jsxs)("div",{className:I.A.noBooklistSupportContainer,children:[(0,b.jsx)(o.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:m.Ru.get("web-player.playlist.booklist-not-supported-title")}),(0,b.jsx)(o.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:m.Ru.get("web-player.playlist.booklist-not-supported.message")})]}),S>0&&(0,b.jsx)(a.Suspense,{fallback:null,children:wt?(0,b.jsx)(un,{initialItems:ye,contextUri:O,nrItems:S,canEdit:Fe,canRemove:ie,ariaLabel:T}):(0,b.jsx)(Ae,{spec:Se,children:(0,b.jsx)(D.a,{columns:St,children:we?(0,b.jsx)(Jn,{ariaLabel:T,nrTracks:S,playlistUri:O,scrollToUid:rt,usePlayContextItem:bt,tracklistDomRef:ct,sortableColumns:Et,isCompactMode:Te},O):(0,b.jsx)(Qr,{ariaLabel:T,nrTracks:S,playlistUri:O,playlistName:T,isMixedMedia:_e,isLive:Ne,isConcert:Ie,isBlend:Le,isBooklist:Ue,canEdit:Fe,scrollToUid:rt,feedbackPath:Me["dislike-endpoint"],deleteFeedbackPath:Me["delete-endpoint"],usePlayContextItem:bt,tracklistRef:ot,tracklistDomRef:ct,canRemove:ie,spec:Se,initialItems:ye,isCompactMode:Te,sortableColumns:Et,hasSpotifyAudiobooks:null!=de&&de},O)})})}),Rt&&(0,b.jsx)(a.Suspense,{fallback:null,children:ze?(0,b.jsx)(ba,{playlistUri:O,onCurationModeChange:qe,isBooklist:Ue}):(0,b.jsx)("button",{className:I.A.seeMore,onClick:function(){qe(!0)},children:(0,b.jsx)(o.E,{as:"div",variant:"bodySmallBold",children:m.Ru.get("playlist.curation.find_more")})})}),jt?(0,b.jsx)("div",{"data-testid":"recommended-track",children:(0,b.jsx)(Ia,{playlistUri:O,playlistLength:g.metadata.unfilteredTotalLength,canEdit:Fe})}):null,At?(0,b.jsx)(Ta,{uri:O}):null,kt&&(0,b.jsx)(sr,{uri:O})]})]}),Ie&&(0,b.jsx)(Fr,{spec:ge.footerSectionFactory()})]})})]})})),Ba=a.memo((function(e){var t=e.uri,n=(0,a.useContext)(pe.w).getCapabilities(),r=(0,a.useContext)(L.g).filter,i=(0,a.useContext)(_.cL).sortState,l=(0,sn.$)(i,r),s=l.metadataOptions,o=l.contentsOptions,c=(0,fe.W)(t,s,o),u=c.data,d=c.isLoading,p=c.isError;return!u||d?(0,b.jsx)(w.A,{hasError:p,errorMessage:m.Ru.get("error.not_found.title.playlist"),loadOffline:n.canModifyOffline}):u.metadata.permissions&&!u.metadata.permissions.canView?(0,b.jsx)(E,{uri:t}):(0,b.jsx)(Ma,{playlist:u,capabilities:n})}));const Fa=function(){var e=(0,s.g)().playlistId,t=(0,d.Ps)((e||"").split("&")[0]).toURI();return(0,b.jsx)(te.P,{surface:ee.u.PLAYLIST,uris:[t],children:(0,b.jsx)(_.sn,{uri:t,children:(0,b.jsx)(L.s,{uri:t,children:(0,b.jsx)(U.S1,{children:(0,b.jsx)(Ba,{uri:t})})})})})}},12732:(e,t,n)=>{n.d(t,{A:()=>r});const r={cards:"TGW6mpr34dHAhhFh0pfw",tourCard:"pQmF4tvRpUeLWgPKUcW7",cardImage:"mGY3ER0iIvb1NbJ1d7X4",cardContent:"JHz_5gqDYpq9Lw3pIac_",subtitle:"oTFzEDWGQSLME1nHjJrt",title:"HPCUzqQRn7oae4vJa3y9",venue:"YxZlxyNx0MHxSVO51TVQ",cardLink:"_B5m05rOGq0BKdTa7al5",cardButton:"StPcf0AvSM0c18nwF4hJ",eventCard:"KhaSITGJnz5MH4qDsYkK",interestedIcon:"ERx0RCdRdFFmYdmZR1P5",concertsCarousel:"nX5e9EyU1GmU42OFVHwH",carouselContent:"MIgjuGue6dRaJWwfUX0K",allEventsCard:"C5dyMaEg91RyIp9YajnW",concertsCarouselControls:"himyaJTaj2PpeC7nuAH5",carouselControlPrev:"KfXbOs2l5lLjtz9R4DiW",carouselControlNext:"yy5akXrxTifXTssHWubJ"}}}]);
//# sourceMappingURL=xpui-routes-playlist.js.map