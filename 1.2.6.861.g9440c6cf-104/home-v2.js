"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7704],{81729:(e,t,n)=>{n.r(t),n.d(t,{SKELETON_CARDS_COUNT:()=>pt,SKELETON_SHELVES_COUNT:()=>gt,SKELETON_SHORTCUTS_COUNT:()=>jt,default:()=>yt});var s=n(59496),i=n(84875),a=n.n(i),o=n(33366),r=n(36393),c=n(80326),l=n(86417),u=n(24896),m=n(58032),d=n(76253),h=n(16020),x=n(62629),j=n(92077),g=n(55166),p=n(3793),f=n(95848),v=n(58908),y=n(69702),C=n(35407),S=n(90153),N=n(76460),_=n(54167),k=n(21322),P=n(69873),E=n(4899);const b="rPV8BmHZXaGIGT2HwvBB",w="nlOU1unbFAd7ZHyeSMTH",T="jb9xD5ECTqKFK02qe3HZ",B="Z35BWOA10YGn5uc9YgAp",I="g3f_cI5usQX7ZOQyDtA9",L="jvWzgRWM_y_9FFTYRCcB",M="zXwER4Lsqq_e7fVVaPkZ",O="WWDxafTPs4AgThdcX5jN",U="Tzzq1pG_inwo_oSOdyjb",A="TbrIq3NG2VYFoAUMSmp9",D="JFDEiqT_8B5zeG_CDSdK",F="EzRmGRncgnv1zFgF4dqE",H="bPmmKmSPLKMhtJSaUJRX",J="vpQWUBWS_lXRLZMRJT7w",R="GSv7K805J9Jw7LB9tn2A",W="Kcb74zm1aMqGfPxTwO5s",z="s9c9x_mJq197U2hBzGtV";var G=n(4637);const q=(0,s.memo)((function({item:e}){const t=(0,k._)(e.uri),n=e.duration_ms??0,{isPlaying:s,isActive:i}=(0,E.$o)(e.uri),[a]=(0,P.z)(1e4,(t=>t.item?.uri===e.uri)),o=e.resume_point?.resume_position_ms??0,r=s||i?a:o,c=Math.round(100/(n/r)),l=t===_.Om.YES,u=n&&r>0;return l||u?(0,G.jsxs)("div",{className:J,children:[l?(0,G.jsx)(S.E,{iconSize:16,semanticColor:"textSubdued"}):null,u?(0,G.jsx)(N.k,{className:R,value:c,semanticColor:"essentialBase"}):null]}):null}));var Y=n(92053),Z=n(53083),K=n(2292),$=n(12323),V=n(64094),X=n(68765),Q=n(13034),ee=n(71789),te=n(20786);const ne=(0,s.memo)((function({images:e=[],fallbackIcon:t=j.U}){const n=(0,te.X)(e);return(0,G.jsx)("div",{className:L,children:(0,G.jsx)("div",{className:M,children:(0,G.jsx)(ee.E,{className:O,src:n?.url,loading:"lazy",testid:"shortcut-image",children:(0,G.jsx)(t,{"aria-hidden":!0})})})})}));var se=n(21586),ie=n(92753),ae=n(3777);const oe=s.memo((function({index:e,item:t,fallbackIcon:n,showPlayButton:i,extraContent:o,onContextMenu:r=(()=>{}),onTouchStart:c=(()=>{}),onTouchEnd:l=(()=>{})}){const u=(0,Y.s0)(),m=(0,ie.o)(),{setColorFromUri:d,resetColor:h,clearColor:j}=(0,x.WQ)(),g=(0,V.G3)(t.uri,t.release_date,t.resume_point?.resume_position_ms,t.resume_point?.fully_played),{spec:p,logger:f}=(0,Q.fU)(K.createDesktopShortcutsPlayNavCardEventFactory,{data:{position:e,uri:t.uri}}),{isPlaying:y,isActive:C,togglePlay:S}=(0,X.n)({uri:t.uri},{featureIdentifier:"home",referrerIdentifier:"home"});const N=(0,s.useCallback)((()=>{m({targetUri:t.uri,intent:"navigate",type:"click"});const e=p.hitUiNavigate({destination:t.uri});f.logInteraction(e),u((0,v.EC)(t.uri).toURLPath(!0))}),[t.uri,f,u,m,p]),_=(0,s.useCallback)((()=>{d(t.uri)}),[t.uri,d]);(0,s.useEffect)((()=>()=>{j()}),[j]);const k=(0,Q.Wi)(p),P=(0,se.O1)([t.uri],t.name);return(0,G.jsx)("div",{ref:k,className:B,onContextMenu:r,onTouchStart:c,onTouchEnd:l,onMouseEnter:_,onMouseLeave:h,children:(0,G.jsxs)("div",{className:I,onDragStart:P,children:[(0,G.jsx)(ne,{images:t.images,fallbackIcon:n}),(0,G.jsxs)("div",{className:U,children:[(0,G.jsxs)("div",{className:A,children:[(0,G.jsxs)("div",{className:D,children:[g&&(0,G.jsx)(V.Rd,{className:H}),(0,G.jsx)(ae.Link,{to:t.uri,onClick:N,title:t.name,children:(0,G.jsx)(Z.D,{as:"p",variant:"balladBold",className:F,children:t.name})})]}),o||null]}),i&&(0,G.jsx)("div",{className:a()(W,{[z]:y}),children:(0,G.jsx)($.f,{isPlaying:y,onClick:function(){m({targetUri:t.uri,intent:y?"pause":"play",type:"click"});const e=p.playButtonFactory();let n;n=y?e.hitPause({itemToBePaused:t.uri}):C?e.hitResume({itemToBeResumed:t.uri}):e.hitPlay({itemToBePlayed:t.uri});const s=f.logInteraction(n);S({loggingParams:s})}})})]}),(0,G.jsx)("div",{onClick:N,className:T})]})})}));var re=n(74964),ce=n(41001),le=n(79459),ue=n(33639),me=n(56080);const de=s.memo((function(e){return(0,v.zO)(e.item.uri)?(0,G.jsx)(oe,{...e,fallbackIcon:j.U}):(0,y.MW)(e.item.uri)?(0,G.jsx)(C._,{menu:(0,G.jsx)(y.XL,{}),children:(0,G.jsx)(oe,{...e,fallbackIcon:j.U})}):(0,G.jsx)(C._,{menu:(0,G.jsx)(ue.X,{uri:e.item.uri}),children:(0,G.jsx)(oe,{...e,fallbackIcon:j.U})})})),he=s.memo((function(e){return(0,G.jsx)(C._,{menu:(0,G.jsx)(re.Y,{uri:e.item.uri}),children:(0,G.jsx)(oe,{...e,fallbackIcon:g.c})})})),xe=s.memo((function(e){return(0,G.jsx)(C._,{menu:(0,G.jsx)(ce.m,{uri:e.item.uri}),children:(0,G.jsx)(oe,{...e,fallbackIcon:p.a})})})),je=s.memo((function(e){return(0,G.jsx)(C._,{menu:(0,G.jsx)(me.M,{uri:e.item.uri}),children:(0,G.jsx)(oe,{...e,fallbackIcon:f.J,showPlayButton:!1})})})),ge=s.memo((function(e){return e.item.podcast?(0,G.jsx)(je,{index:e.index,shouldSetBackgroundColor:e.shouldSetBackgroundColor,item:e.item.podcast,showPlayButton:e.showPlayButton}):(0,G.jsx)(C._,{menu:(0,G.jsx)(le.k,{uri:e.item.uri}),children:(0,G.jsx)(oe,{...e,fallbackIcon:f.J,extraContent:(0,G.jsx)(q,{...e})})})}));var pe=n(83122),fe=n(23742);const ve="J6UEDIqMSJhYlwGoeUZB",ye="ZjFf4lVC48DSryAjP9qB",Ce=s.memo((function(e){const t=(0,fe.x)(),n={...e.item,...t};return(0,G.jsx)(oe,{...e,item:n,fallbackIcon:()=>(0,G.jsx)("div",{className:ve,children:(0,G.jsx)(pe.P,{iconSize:32,className:ye})})})}));var Se=n(32318),Ne=n(67008);const _e=24,ke=270;function Pe(e){if(null===e)return{cssProperties:{"--min-column-width":"270px","--item-height":"80px","--column-gap":"24px","--row-gap":"16px"},showPlayButton:!0};const t=e.offsetWidth,n=t<600?200:ke;const s=Math.min(Math.floor((t+_e)/(n+_e)),3),i=t>=858?80:64;return{cssProperties:{"--min-column-width":`${n}px`,"--item-height":`${i}px`,"--column-gap":"24px","--row-gap":`${64===i?12:16}px`},showPlayButton:(t-(s-1)*_e)/s>=ke}}function Ee(){const e=(0,s.useRef)(null),[t,n]=(0,s.useState)(Pe(null)),i=(0,s.useCallback)((()=>{null!==e.current&&n(Pe(e.current))}),[]),a=(0,s.useCallback)((t=>{e.current=t,i()}),[i]);return(0,m.a)((()=>i())),[t,a]}const be=e=>{if(null!==e&&"object"==typeof e){const{type:t,name:n}=e;return t===h.p.YOUR_EPISODES&&"string"==typeof n}return!1},we=s.memo((function({title:e,tagline:t,items:n}){const{fetchMultipleColors:i}=(0,x.WQ)(),a=!(0,Se.k)(),o=e??(()=>{const e=(new Date).getHours();let t=c.ag.get("home.evening");return e>=5&&e<12?t=c.ag.get("home.morning"):e>=12&&e<18&&(t=c.ag.get("home.afternoon")),t})(),[r,l]=Ee();return(0,s.useEffect)((()=>{const e=n?.map(x.lh)||[];i(e)}),[n,i]),a||!n?.length?null:(0,G.jsxs)("section",{className:b,"aria-label":o,ref:l,children:[(0,G.jsx)(Ne.r,{title:o,titleVariant:"alto",tagline:t}),(0,G.jsx)("div",{className:w,style:r.cssProperties,children:n.filter(((e,t)=>be(e)||!e.error)).filter(((e,t)=>t<6)).map(((e,t)=>{if(be(e))return(0,G.jsx)(Ce,{index:t,item:e,showPlayButton:r.showPlayButton,shouldSetBackgroundColor:0===t},`${t}-${e.uri}`);const n=function(e){const t=((0,v.EC)(e)||{}).type;switch(t){case v.JM.ARTIST:return xe;case v.JM.ALBUM:case v.JM.COLLECTION_ALBUM:return he;case v.JM.PLAYLIST:case v.JM.PLAYLIST_V2:return de;case v.JM.SHOW:return je;case v.JM.EPISODE:return ge;case v.JM.COLLECTION:return de;default:return console.warn(`Unable to resolve entity shortcut from ${e} of type "${t||"unknown"}"`),je}}(e.uri);return(0,G.jsx)(n,{index:t,item:e,showPlayButton:r.showPlayButton,shouldSetBackgroundColor:0===t},`${t}-${e.uri}`)}))})]})})),Te=e=>(0,G.jsx)(u.L,{onError:e=>{(0,d.vK)(e,"HomeShortcutsGrid")},children:(0,G.jsx)(we,{...e})});var Be=n(54151),Ie=n(74140);const Le="zUf7jtv9GPOKC1jYO5TO",Me="T8QLel3PoQTgJUpGYj7Q",Oe=(0,s.memo)((({isLoading:e})=>{const t=(0,Be.h)("shimmer");return(0,G.jsx)("div",{className:L,children:(0,G.jsx)("div",{ref:t,className:a()(M,{[Me]:e})})})})),Ue=(0,s.memo)((({isLoading:e})=>(0,G.jsx)("div",{className:a()(B,Le),"data-testid":"skeleton-shortcut",children:(0,G.jsxs)("div",{className:I,children:[(0,G.jsx)(Oe,{isLoading:e}),(0,G.jsx)("div",{className:U,children:(0,G.jsx)(Ie.C,{as:"p",variant:"balladBold",className:F,isLoading:e})})]})}))),Ae="v7dc5ekmeBiAYnLzV8oT",De=(0,s.memo)((({shortcutCount:e})=>{const[t,n]=Ee();return(0,G.jsxs)("section",{className:b,ref:n,children:[(0,G.jsx)(Ie.C,{as:"h2",variant:"alto",className:Ae,charCount:25,isLoading:!0}),(0,G.jsx)("div",{className:w,style:t.cssProperties,children:[...new Array(e).keys()].slice(0,6).map(((e,t)=>(0,G.jsx)(Ue,{isLoading:!0},t)))})]})}));var Fe=n(27293),He=n(66365),Je=n(71379),Re=n(99350),We=n(67505),ze=n(74977),Ge=n(6731),qe=n(3873),Ye=n(76796),Ze=n(23731),Ke=n(93983),$e=n(47807),Ve=n(85388),Xe=n(37875);const Qe=({spec:e,section:t,index:n})=>{const i=(0,o.W6)(Ve.ty,{loadingValue:!1})?Ke.N:$e.q;return(0,s.useMemo)((()=>t.sectionItems.items.some((e=>(0,Xe.d)(e.content)))),[t.sectionItems])?(0,G.jsx)(Q.Nh,{spec:e.shelvesFactory(),children:(0,G.jsx)(i,{total:t.sectionItems.totalCount,seeAllUri:t.uri,pageId:t.uri,title:t.data.title?.text??"",index:n,id:t.uri,children:t.sectionItems.items.map(Xe.x).filter((e=>!!e))})}):null};var et=n(41009);const tt=({spec:e,section:t,index:n})=>(0,G.jsx)(Q.Nh,{spec:e.shelvesFactory(),children:(0,G.jsx)(et.default,{title:t.data.title?.text??void 0,showAll:!1,index:n})});var nt=n(90457);const st=({spec:e,greeting:t,section:n})=>(0,G.jsx)(Q.Nh,{spec:e.shortcutsFactory(),children:(0,G.jsx)(Te,{items:n.sectionItems.items.map(nt.lh),title:t??void 0})});var it=n(67654);const at=(0,s.lazy)((async()=>{const{FeatureActivationShelf:e}=await Promise.all([n.e(1814),n.e(8228)]).then(n.bind(n,37152));return{default:e}})),ot=({spec:e,greeting:t,section:n,index:i})=>{const a=(0,y._n)();switch(n.data?.__typename){case"HomeGenericSectionData":return(0,G.jsx)(Qe,{spec:e,section:(0,it.f)(n,n.data),index:i});case"HomeFeatureActivationSectionData":return(0,Ye.wW)()?(0,G.jsx)(s.Suspense,{fallback:null,children:(0,G.jsx)(at,{})}):null;case"HomeShortsSectionData":return(0,G.jsx)(st,{spec:e,greeting:t,section:(0,it.f)(n,n.data)});case"HomeRecentlyPlayedSectionData":return(0,G.jsx)(tt,{spec:e,section:(0,it.f)(n,n.data),index:i});case"HomeFeedBaselineSectionData":case"HomeNativeAdsSectionData":case"HomeOnboardingSectionData":case"HomeOnboardingSectionDataV2":return null;case"HomeYourDJSectionData":{if(!a)return null;const t=(0,it.f)(n,n.data),{data:s,sectionItems:i}=t,o=i.items[0];if("PlaylistResponseWrapper"===o.content.__typename&&"Playlist"===o.content.data.__typename){const{data:t}=o.content;return(0,G.jsx)(y.KE,{spec:e,shelfTitle:s.title?.text??"",title:t.name,description:t.description??""})}return null}case null:case void 0:return null;default:return(0,Ze._)(n.data),null}},rt=({spec:e,greeting:t,container:n})=>{const{spec:i,logger:a}=(0,Q.fU)(Ge.createDesktopHomeFeatureActivationShelfEventFactory,{});return(0,s.useEffect)((()=>{(0,qe.wW)()&&a.logImpression(i.impressionElementFactory().impression())}),[i,a]),(0,G.jsx)(G.Fragment,{children:n.sections.items.map(((n,s)=>(0,G.jsx)(ot,{spec:e,greeting:t,section:n,index:s},`${s}-${n.uri}`)))})};var ct=n(76027),lt=n(23940);const ut=(0,s.memo)((({cardCount:e})=>(0,G.jsx)(lt.X,{isLoading:!0,children:[...new Array(e).keys()].map(((e,t)=>(0,G.jsx)(ct.A,{isLoading:!0},t)))})));var mt=n(98668),dt=n(60037);const ht=()=>(0,o.W6)(Ve.Jw)===Ve.pF.ONHOME?(0,G.jsx)(dt.w,{children:(0,G.jsx)(mt.M,{onSearch:!1})}):null;var xt=n(18237);const jt=6,gt=6,pt=6,ft=(0,s.memo)((({shortcutCount:e,shelfCount:t,cardCount:n})=>(0,G.jsx)("section",{"data-testid":"home-page",children:(0,G.jsx)("div",{className:xt.Z.home,children:(0,G.jsxs)("div",{className:a()(xt.Z.content,"contentSpacing"),children:[(0,G.jsx)(De,{shortcutCount:e}),[...new Array(t).keys()].map(((e,t)=>(0,G.jsx)(ut,{cardCount:n},t)))]})})}))),vt=({spec:e})=>{(0,He.z)("home");const{data:t,error:n,loading:s}=(0,We.b3)({timeZone:(0,ze.L7)()},{cacheTime:ze.us,staleTime:ze.fS});if(s)return(0,G.jsx)(ft,{shortcutCount:jt,shelfCount:gt,cardCount:pt});if(null!==n)return(0,G.jsx)(Fe.h,{hasError:!0,errorMessage:c.ag.get("error.generic")});const i=t?.home;return"HomeResponsePayload"!==i?.__typename||0===i.sectionContainer.sections.totalCount||0===i.sectionContainer.sections.items.length?(0,G.jsx)(Fe.h,{hasError:!0,errorMessage:c.ag.get("error.generic")}):(0,G.jsx)("section",{"data-testid":"home-page",children:(0,G.jsx)("div",{className:xt.Z.home,children:(0,G.jsx)("div",{className:a()(xt.Z.content,"contentSpacing"),children:(0,G.jsx)(rt,{spec:e,greeting:i.greeting?.text??null,container:i.sectionContainer})})})})},yt=()=>{const{spec:e}=(0,Q.fU)(r.createDesktopHomeEventFactory,{data:{identifier:"home",uri:"spotify:home"}}),t=(0,o.W6)(Ve.yg),n=(0,Re.S)(t);return(0,G.jsx)(Q.Nh,{spec:e,children:(0,G.jsxs)(Je.q,{config:n,children:[(0,G.jsx)(l.$,{children:c.ag.get("page.generic-title")}),(0,G.jsx)(s.Suspense,{fallback:null,children:(0,G.jsx)(ht,{})}),(0,G.jsx)(vt,{spec:e})]})})}}}]);
//# sourceMappingURL=home-v2.js.map