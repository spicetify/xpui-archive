"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5713],{36462:(e,t,a)=>{a.d(t,{V:()=>T,e:()=>R});var i=a(59496),o=a(99766),s=a(97653),n=a(86020),r=a(76163),l=a(83985),c=a(74653),d=a(1858),u=a(70014),g=a(96651),m=a(46873),p=a(1054),h=a(56287),x=a(41567),y=a(57265),k=a(81622),b=a(54904),j=a(4699),f=a(59642),v=a(14126),P=a(91560),C=a(33236),S=a(99914),I=a(57115),w=a(58069),N=a(2437),A=a(10242),E=a(98474),D=a(4637);function R(e){return{uri:e.uri,name:e.name,trailer:e.trailer,showTypes:e.showTypes}}const U=e=>`activation-trigger-mme-${e}`,T=i.memo((function({index:e=-1,showMetadata:t,episode:a,usePlayContextItem:T,status:B,variant:F}){const O=(0,A.E)(),L=a.playedState.playPositionMilliseconds,M=a.uri,_=(0,i.useRef)(null),[z,W]=(0,i.useState)(a.playedState.state===w.sY.Completed),G=(0,x.O)(),V=(0,k.g)(),H=(0,C.jh)(),X=(0,y.o)(),Y=(0,o.I0)(),{UBIFragment:K,spec:q,logger:Z}=(0,I.fU)(n.createDesktopEpisodeBlockEventFactory,{data:{uri:M,reason:a.requestId||"",position:e}}),$=(0,I.Wi)(q),{isActive:J,isPlaying:Q,togglePlay:ee}=T({uri:M}),[te]=(0,S.z)(1e4,(e=>e?.item?.uri===M));(0,i.useEffect)((()=>{Q&&(_.current=te)}),[Q,te]),(0,i.useEffect)((()=>{!Q&&_.current&&a.duration.milliseconds<=_.current&&W(!0)}),[Q,a.duration.milliseconds]);const ae=(0,i.useCallback)((e=>{e||(_.current=0),W(e)}),[]),ie=e=>{if(e.target!==e.currentTarget)return;const i=`${a.name} • ${t.name}`;G(e,[M],i,t.uri)},oe=R(t),se=(0,b.s)({...a,coverArt:{sources:a.coverArt}},oe),ne=(0,i.useCallback)((()=>{if(a.episodeType===w.Wf.Episode&&O)p.y.set((()=>({triggerId:U(a.uri),triggerAction:null})));else if(V)se();else{let e;e=Q?q.playButtonFactory().hitPause({itemToBePaused:M}):J?q.playButtonFactory().hitResume({itemToBeResumed:M}):q.playButtonFactory().hitPlay({itemToBePlayed:M});const t=Z.logInteraction(e);X({targetUri:M,intent:Q?"pause":"play",type:"click"}),ee({loggingParams:t})}}),[J,se,X,ee,M,Q,V,a,O,Z,q]),re=(0,i.useCallback)((()=>{Z.logInteraction(q.hitUiNavigate({destination:M})),X({type:"click",targetUri:M,intent:"navigate"})}),[M,X,Z,q]),le=a.podcastSubscription?.isPaywalled??!1,ce=a.podcastSubscription?.isUserSubscribed??!1,de=le&&!ce,ue=le&&V,{badges:ge}=(0,N.r)({contentRating:a.contentRating?.label,isPaywalled:le}),me=(0,i.useCallback)((()=>Y((0,l.RM)(t.uri))),[t.uri,Y]),pe=(0,i.useCallback)((e=>{let i=e;return(de||ue)&&(i=(0,D.jsx)(m.l,{enabled:!0,showUri:t.uri,children:i})),!a.playability.playable&&ge.nineteen&&(i=(0,D.jsx)("div",{onClick:e=>{e.stopPropagation(),me()},children:e})),i=(0,D.jsx)(c.D,{id:U(M),targetURI:(0,r.EC)(M),children:i}),i}),[M,de,ue,t.uri,ge.nineteen,a.playability.playable,me]),he=(0,s.W6)(E.eli,{loadingValue:!1});return(0,D.jsx)(K,{spec:q,children:(0,D.jsx)(P.ZP,{value:"row",index:e,children:(0,D.jsx)(j._,{onShow:()=>{Z.logInteraction(q.secondaryHitUiReveal())},menu:(0,D.jsx)(d.k,{uri:M,showUri:t.uri,sharingInfo:a.sharingInfo,isPlayed:z,onMarkAsPlayed:ae}),children:he?(0,D.jsx)(g.k,{ref:$,requestId:a.requestId,index:e,uri:M,size:H,images:a.coverArt||[],name:a.name,showName:t.name,description:a.description,isPlayable:a.playability.playable||de,fullyPlayed:z,durationMs:a.duration.milliseconds,releaseDate:a.releaseDate?.isoString||"",resumePositionMs:_.current??L,handleDragStart:ie,handlePlaybackClick:ne,handleClick:re,isCurrentlyPlaying:J,isPaywalled:le,isUserSubscribed:ce,isPlaying:Q,position:Q?te:void 0,episodeSharingInfo:a.sharingInfo,onMarkAsPlayed:ae,contentInformation:a.contentInformation,badges:(0,D.jsxs)(D.Fragment,{children:[ge.explicit&&(0,D.jsx)(f.N,{}),ge.paid&&(0,D.jsx)(h.g,{}),ge.nineteen&&(0,D.jsx)(v.X,{size:16})]}),playButtonWrapper:pe,onMoreButtonClick:()=>{Z.logInteraction(q.moreButtonFactory().hitUiReveal())},status:B,variant:F}):(0,D.jsx)(u.X,{ref:$,requestId:a.requestId,index:e,uri:M,size:H,images:a.coverArt||[],name:a.name,showName:t.name,description:a.description,isPlayable:a.playability.playable||de,fullyPlayed:z,durationMs:a.duration.milliseconds,releaseDate:a.releaseDate?.isoString||"",resumePositionMs:_.current??L,handleDragStart:ie,handlePlaybackClick:ne,handleClick:re,isCurrentlyPlaying:J,isPaywalled:le,isUserSubscribed:ce,isPlaying:Q,position:Q?te:void 0,episodeSharingInfo:a.sharingInfo,onMarkAsPlayed:ae,contentInformation:a.contentInformation,badges:(0,D.jsxs)(D.Fragment,{children:[ge.explicit&&(0,D.jsx)(f.N,{}),ge.paid&&(0,D.jsx)(h.g,{}),ge.nineteen&&(0,D.jsx)(v.X,{size:16})]}),playButtonWrapper:pe,onMoreButtonClick:()=>{Z.logInteraction(q.moreButtonFactory().hitUiReveal())},status:B,variant:F})})})})}))},69978:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ei});var i=a(59496),o=a(99766),s=a(80519),n=a(14751),r=a(4982),l=a(55740),c=a(42673),d=a(17286),u=a(84875),g=a.n(u),m=a(81902),p=a(97653),h=a(34201),x=a(47712),y=a(28725),k=a(80557),b=a(57265),j=a(8091),f=a(41328),v=a(61649),P=a(59642),C=a(67147),S=a(35999);const I="_yl4tOZxcpoUt28k6B8I",w="lcJflizNrSwDM9yPNk6h",N="ret7iHkCxcJvsZU14oPY";var A=a(4637);const E=({rating:e,className:t,onClick:a})=>{if(!e)return null;const i=Boolean(e.rating?.rating);return(0,A.jsxs)("button",{className:g()(I,t),onClick:a,children:[(0,A.jsx)(m.D,{dir:"auto",variant:"mestoBold",children:e.averageRating?.showAverage?l.ag.formatNumber(e.averageRating.average,{maximumFractionDigits:1}):l.ag.get("web-player.audiobooks.noRating")}),i?(0,A.jsx)(C.u,{iconSize:16,className:g()(w)}):(0,A.jsx)(S.G,{iconSize:16,className:g()(w)}),e.averageRating?.showAverage&&(0,A.jsxs)(m.D,{variant:"mesto",className:g()(N),children:["(",l.ag.formatNumberCompact(Number(e.averageRating.totalRatings)),")"]})]})};var D=a(45351),R=a(97045),U=a(18864),T=a(37859);const B="SpVoh9vvBN0kIwzfCiBh",F="nsGHaEmn310z9W4RMbb8",O="PfYVlZzroXSurDmS_kxY",L="kCT99_BcJQtW47mEfVF6",M="gmDgEbPyRXNixmjYAT9f",_="XlZGcb86bItwlMPQ2jOf",z="VGTtqfOlX2jIbpff6mPP",W="aexqooSgfdW95poEaxjH",G="Fui2wGupk4F1Khigbrhj",V="jWcvSz47NFpbLjnkFT1O",H="Oo6MP8F01W5uGlnw8dag";var X=a(11526),Y=a(14126),K=a(54886),q=a(2437),Z=a(97387);let $=function(e){return e.SMALL="small",e.LARGE="large",e}({});const J=({images:e,title:t,contentRating:a,duration:i,moreButton:o,onClick:s,onContextMenu:n,onTouchStart:r,onTouchEnd:l,isPlaying:c,isActive:d,size:u,className:p,label:h,isPlayable:x=!0})=>{const y=u===$.LARGE?"md":"sm",{badges:k}=(0,q.r)({contentRating:a});return(0,A.jsxs)("div",{"data-testid":"trailer-component",className:g()(B,p,{[F]:d}),onContextMenu:n,onTouchStart:r,onTouchEnd:l,children:[(0,A.jsxs)("div",{className:L,children:[(0,A.jsxs)("div",{className:W,children:[(0,A.jsx)(R.O,{type:T.p.EPISODE,title:t,className:g()(z,{[H]:u===$.SMALL,[V]:u===$.LARGE}),size:U.m$.SIZE_56,images:e,shape:R.K.ROUNDED_CORNERS}),(0,A.jsx)("div",{className:G,children:(0,A.jsx)(Z.f,{"data-testid":"trailer-play-button",version:X.ul.transparent,size:y,isPlaying:c,onClick:s,disabled:!x})})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{className:M,children:(0,A.jsx)(m.D,{dir:"auto",className:O,variant:"balladBold",children:t})}),(0,A.jsxs)("div",{className:_,children:[(0,A.jsx)(K.V,{text:h}),k.explicit&&(0,A.jsx)(P.N,{}),k.nineteen&&(0,A.jsx)(Y.X,{}),(0,A.jsx)(m.D,{dir:"auto",variant:"mesto",children:(0,A.jsx)(D.nL,{durationMs:i})})]})]})]}),o]})};var Q=a(33236),ee=a(78802),te=a(55207),ae=a(4302),ie=a(57115),oe=a(31398);const se=({htmlDescription:e,narrators:t,spec:a})=>{const o=(0,b.o)(),s=(0,ie.$P)(),n=(0,i.useCallback)((e=>{o({intent:"expand-description",type:"click"});const t=a.seeMoreButtonFactory();s.logInteraction(e?t.hitUiReveal():t.hitUiHide())}),[s,o,a]);return(0,A.jsxs)(A.Fragment,{children:[t.length?(0,A.jsx)(m.D,{as:"p",variant:"ballad",children:l.ag.get("web-player.audiobooks.narratedByX",t.join(l.ag.getSeparator()))}):null,e&&(0,A.jsx)(oe.o,{maxLines:4,content:e,htmlContent:e,onExpanded:n})]})};var ne=a(57579),re=a(3819),le=a(82487),ce=a(94942);const de=i.memo((function({uri:e,size:t=ce.q.md,className:a,onClick:o}){const[s,n]=(0,le.Z)(e),r=(0,b.o)(),l=(0,i.useCallback)((()=>{r({targetUri:e,intent:s?"unsave":"save",type:"click"}),n(!s)}),[r,e,s,n]);return(0,A.jsx)(ce.o,{className:a,isFollowing:s,onFollow:l,onClick:o,uri:e,size:t})}));var ue=a(21355);const ge="8px";var me=a(2238),pe=a(12636),he=a(6123),xe=a(85830),ye=a(73455),ke=a(64218),be=a(81622),je=a(77470);const fe="iZut9Dh2KEjNVhDUxzWw";function ve({uri:e,price:t,size:a,spec:i,logger:o,onPlayback:s}){const n=(0,je.k)(),r=(0,be.g)(),c=0===t?.finalPrice?.amount,d=c?i.getButtonFactory({uri:e}):i.buyButtonFactory({uri:e}),u=(0,xe.y1)((async()=>{if(o.logInteraction(d.hitShowPaywall({paywalledItem:e})),r)s();else{try{t?.finalPrice?await(0,ke.Q)({show_uri:e,currency:t.finalPrice.currency,price:t.finalPrice.amount}):n(l.ag.get("error.generic"))}catch(e){n(l.ag.get("error.generic"))}s()}}),2e3,{leading:!0,trailing:!1});return(0,A.jsx)(ye.D,{buttonSize:a,className:fe,style:{flexShrink:0},onClick:u,children:c?l.ag.get("web-player.audiobooks.buyFree"):l.ag.get("web-player.audiobooks.buy")})}const Pe=({uri:e,isLocked:t,price:a,isPlaying:i,isConsumptionCapped:o,onPlayback:s,logger:n,spec:r,size:l="lg"})=>t&&!o?(0,A.jsx)(ve,{size:l,uri:e,price:a,logger:n,spec:r,onPlayback:s}):(0,A.jsx)(he.$,{size:l,isPlaying:i,uri:e,onClick:s});var Ce=a(43795),Se=a(17140);const Ie=i.memo((function({backgroundColor:e,uri:t,name:a,isPlaying:o,togglePlay:s,isLocked:n,price:r,isConsumptionCapped:c,spec:d}){const[u,g]=(0,le.Z)(t),m=!(0,Se.k)(),p=(0,b.o)(),h=(0,ie.$P)(),x=(0,i.useCallback)((()=>{p({targetUri:t,intent:u?"unsave":"save",type:"click"});const e=d.saveToLibraryButtonFactory();u?h.logInteraction(e.hitUnfollow({itemToBeUnfollowed:t})):h.logInteraction(e.hitFollow({itemToBeFollowed:t})),g(!u)}),[p,t,u,d,g,h]),k=(0,i.useCallback)(((e,a)=>{const i=d.downloadButtonFactory();a===pe.mc.ADD?h.logInteraction(i.hitDownload({itemToDownload:t})):a===pe.mc.REMOVE?h.logInteraction(i.hitRemoveDownload({itemToRemoveFromDownloads:t})):a===pe.mc.NO_PERMISSION&&h.logInteraction(i.hitUiReveal())}),[h,d,t]),j=(0,i.useCallback)((()=>{const e=d.contextButtonFactory().hitUiReveal();h.logInteraction(e)}),[h,d]);return(0,A.jsx)(ne.o,{backgroundColor:e,style:{"--action-bar-padding-bottom":ge},children:(0,A.jsxs)(ne.F,{children:[(0,A.jsx)(Pe,{uri:t,isLocked:n,price:r,isPlaying:o,isConsumptionCapped:c,onPlayback:s,logger:h,spec:d}),(0,A.jsx)(Ce.r,{children:(0,A.jsx)(re.H,{isAdded:u,onClick:x,disabled:m,size:re.q.md,isAudiobook:!0})},"follow-button"),!n&&(0,A.jsx)(de,{uri:t,onClick:k}),(0,A.jsx)(me.ClickToggleContextMenu,{menu:(0,A.jsx)(ue.X,{uri:t}),children:(0,A.jsx)(y.MoreButton,{label:l.ag.get("more.label.context",a),onClick:j})})]})})}));var we=a(85583),Ne=a(59476),Ae=a(86739);const Ee=i.memo((function({coverArt:e,name:t,authorName:a,uri:i,backgroundColor:o,isPlaying:s,togglePlay:n,isLocked:r,price:c,isConsumptionCapped:d,logger:u,spec:g}){return(0,A.jsxs)(we.gF,{backgroundColor:o,children:[(0,A.jsxs)(Ne.W,{children:[(0,A.jsx)(Pe,{uri:i,isLocked:r,price:c,isPlaying:s,isConsumptionCapped:d,onPlayback:n,logger:u,spec:g,size:"md"}),(0,A.jsx)(Ae.i,{text:t,dragUri:i,dragLabel:t})]}),(0,A.jsx)(me._,{menu:(0,A.jsx)(ue.X,{uri:i}),children:(0,A.jsx)(we.Oz,{images:e,name:t,shape:R.K.ROUNDED_CORNERS})}),(0,A.jsxs)(we.sP,{children:[(0,A.jsx)(m.D,{variant:"mestoBold",children:l.ag.get("web-player.audiobooks.audiobook")}),(0,A.jsx)(we.xd,{canEdit:!1,onClick:()=>{},children:t}),(0,A.jsx)(we.QS,{author:a})]})]})})),De="HvVxzh4ZoggYAhgSxSth",Re=i.memo((({price:e})=>e.finalPrice&&e.finalListPrice?0===e.finalPrice.amount&&0===e.finalListPrice.amount?(0,A.jsxs)("div",{className:De,children:[(0,A.jsx)(m.D,{variant:"cello",semanticColor:"textBase",children:l.ag.get("audiobook.freePriceDescription")}),(0,A.jsx)(m.D,{variant:"mesto",children:l.ag.get("audiobook.freePriceExplanation")})]}):(0,A.jsxs)("div",{className:De,children:[(0,A.jsx)(m.D,{variant:"canon",semanticColor:"textBase",children:e.finalPrice.formattedPrice}),e.finalPrice.amount<e.finalListPrice.amount&&(0,A.jsx)(m.D,{variant:"ballad",semanticColor:"textSubdued",children:l.ag.get("web-player.audiobooks.retailPrice",(0,A.jsx)("span",{style:{textDecoration:"line-through"},children:e.finalListPrice.formattedPrice}))})]}):null));var Ue=a(76883),Te=a(29101);var Be=a(943);function Fe(e){return!e.playability?.playable&&(e.playability?.reason===Be.WY.PaymentRequired||e.playability?.reason===Be.WY.Anonymous)}var Oe=a(29105),Le=a(80495),Me=a(36452);const _e=i.memo((function({uri:e,bookUri:t,size:a=ce.q.md,className:o,onClick:s=(()=>{}),isLocked:n=!0}){const[r,l]=(0,le.Z)(t),c=(0,b.o)(),d=(0,i.useCallback)((()=>{c({targetUri:t,intent:"add-to-library",type:"click"}),l(!0)}),[c,t,l]);return(0,A.jsx)(ce.o,{className:o,isFollowing:r,canDownload:!n,onFollow:d,uri:e,size:a,onClick:s})})),ze=i.memo((function(e){return(0,A.jsx)(_e,{...e})}));var We=a(8725),Ge=a(2651),Ve=a(98474),He=a(99914);const Xe="b0Vng72SrQiFroJKXfk2",Ye="FfeP3XKSZcAdfviyk8fv",Ke="eWxDd0LanTnTlSl8SOHX",qe="eAOkseqV13_CAmzuDJpa",Ze="fovofKIYdEIURgIYoKm2",$e="we_1b4qCQBaFPT12eUXp",Je="NXXFrQO7npgPCRuSKaAA",Qe="ekkhhuxKVGAzkEmuh9kE",et="zd6xqobF255bxHFtCmXy",tt=i.memo((function({name:e,duration:t,uri:a,bookUri:s,bookName:n,usePlayContextItem:r,isLocked:c,isPlayable:d,resumePositionMs:u,isFullyPlayed:h,isExplicit:x,is19PlusOnly:j,spec:f,index:v,consumptionCapExplanation:C}){const S=(0,i.useRef)(u),{isPlaying:I,togglePlay:w,isActive:N}=r({uri:a}),E=(0,ie.$P)(),D=(0,be.g)(),R=(0,o.I0)(),U=(0,p.W6)(Ve.vWw,{loadingValue:!1}),{position:T,isFullyPlayed:B}=((e,t,a,o)=>{const s=(0,i.useRef)(null),[n,r]=(0,i.useState)(o),[l]=(0,He.z)(1e4,(t=>t?.item?.uri===e));return(0,i.useEffect)((()=>{a&&(s.current=l)}),[a,l]),(0,i.useEffect)((()=>{!a&&s.current&&t.milliseconds<=s.current+1e4&&r(!0)}),[a,t.milliseconds]),{position:a?l:null,isFullyPlayed:n}})(a,t,I,h);null!==T&&(S.current=T);const F=(0,Le._)(a),O=(0,i.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),L=(0,b.o)(),M=(0,i.useCallback)((e=>{if(O(e),C&&!D&&U)return void R((0,We.S3)(C));const t=f.chapterBlockFactory({position:v,uri:a}).playButtonFactory();if(c)L({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),E.logInteraction(t.hitShowPaywall({paywalledItem:a}));else{const e=(0,Ge.aK)({isPlaying:I,isActive:N,spec:t,logger:E,uri:a});w({loggingParams:e})}}),[C,R,v,U,N,D,c,I,E,L,f,O,w,a]),_=(0,i.useCallback)(((e,t)=>{O(e);const i=f.chapterBlockFactory({position:v,uri:a}).downloadButtonFactory();t===pe.mc.ADD?E.logInteraction(i.hitDownload({itemToDownload:a})):t===pe.mc.REMOVE?E.logInteraction(i.hitRemoveDownload({itemToRemoveFromDownloads:a})):t===pe.mc.NO_PERMISSION&&E.logInteraction(i.hitUiReveal())}),[v,E,f,O,a]),z=(0,i.useCallback)((()=>{const e=f.chapterBlockFactory({position:v,uri:a}).secondaryHitUiReveal();E.logInteraction(e)}),[v,E,f,a]),W=(0,i.useCallback)((e=>{O(e);const t=f.chapterBlockFactory({position:v,uri:a}).contextMenuFactory().hitUiReveal();E.logInteraction(t)}),[v,E,f,O,a]),G=!c,V=(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("hr",{className:Ke,"aria-hidden":!0}),(0,A.jsxs)("div",{className:Xe,onDoubleClick:e=>{L({targetUri:a,intent:"play",type:"double-click"}),M(e)},children:[(0,A.jsx)(m.D,{as:"h2",variant:"balladBold",className:g()(Je,{[Ye]:N}),semanticColor:"textBase",children:e}),(0,A.jsxs)("div",{className:Qe,children:[(0,A.jsx)(Z.f,{size:"sm",version:Z.u.secondary,onClick:M,isPlaying:I,ariaPlayLabel:l.ag.get("tracklist.a11y.play",e,n),ariaPauseLabel:l.ag.get("tracklist.a11y.pause",e,n),locked:c,disabled:!d&&!c}),x&&(0,A.jsx)(P.N,{fullText:!0}),j&&(0,A.jsx)(Y.X,{size:16}),(0,A.jsx)("div",{className:et,children:(0,A.jsx)(Me.E,{isPlaying:I,fullyPlayed:B,durationMs:t.milliseconds,resumePositionMs:S.current,position:T??void 0})})]}),G?(0,A.jsx)(me.ClickToggleContextMenu,{menu:(0,A.jsx)(k.r,{uri:a,showUri:s,isLocked:c}),children:(0,A.jsx)(y.MoreButton,{className:Ze,size:ce.q.sm,label:l.ag.get("more.label.context",e),onClick:W})}):null,(0,A.jsx)(ze,{uri:a,bookUri:s,className:g()({[$e]:!(0,Oe.y)(F)}),onClick:_,size:ce.q.sm,isLocked:c})]})]});return G?(0,A.jsx)(me._,{menu:(0,A.jsx)(k.r,{uri:a,showUri:s,isLocked:c}),onShow:z,children:(0,A.jsx)("div",{className:qe,children:V})}):(0,A.jsx)("div",{className:qe,children:V})}));var at=a(58891),it=a(65248),ot=a(56287),st=a(21558),nt=a(88513);const rt="XG_S4BkuyAMohXFLGKU1",lt="NrMNU3Sf4iy2c6JJx7R8",ct="n8V7RFwuVx9PaIT1n_mA",dt="kTtB_Y_yizhUj6SMYY8e",ut="f2XS5sEjEtvk4TdlzHK3",gt="ZXOAeQZMnXPrIByL2_Sl",mt="d9YBRXX3qqxAD43sqNzE",pt="Jvp5er4UpzTljUao_SrR",ht="EQCGoB4MqhFPtwUwp1rh",xt="UTBQUpUwOPb37ou2ULmH",yt="Dnwv7PC1vjXvcwYEfqqf",kt=i.memo((function({name:e,duration:t,uri:a,bookUri:s,bookName:n,usePlayContextItem:r,isLocked:c,isPlayable:d,resumePositionMs:u,isFullyPlayed:m,isExplicit:h,is19PlusOnly:x,spec:j,index:f,consumptionCapExplanation:v}){const C=(0,i.useRef)(u),{isPlaying:S,togglePlay:I,isActive:w}=r({uri:a}),N=(0,ie.$P)(),E=(0,be.g)(),D=(0,o.I0)(),R=(0,p.W6)(Ve.vWw,{loadingValue:!1}),U=(0,st.Y)((e=>{if(e?.item?.uri===a){const t=(0,nt.k)(e)??0;return C.current=t,t}return 0})),T=(0,Le._)(a),B=(0,i.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),F=(0,b.o)(),O=(0,i.useCallback)((e=>{if(B(e),v&&!E&&R)return void D((0,We.S3)(v));const t=j.chapterBlockFactory({position:f,uri:a}).playButtonFactory();if(c)F({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),N.logInteraction(t.hitShowPaywall({paywalledItem:a}));else{const e=(0,Ge.aK)({isPlaying:S,isActive:w,spec:t,logger:N,uri:a});I({loggingParams:e})}}),[v,D,f,R,w,E,c,S,N,F,j,B,I,a]),L=(0,i.useCallback)(((e,t)=>{B(e);const i=j.chapterBlockFactory({position:f,uri:a}).downloadButtonFactory();t===pe.mc.ADD?N.logInteraction(i.hitDownload({itemToDownload:a})):t===pe.mc.REMOVE?N.logInteraction(i.hitRemoveDownload({itemToRemoveFromDownloads:a})):t===pe.mc.NO_PERMISSION&&N.logInteraction(i.hitUiReveal())}),[f,N,j,B,a]),M=(0,i.useCallback)((()=>{const e=j.chapterBlockFactory({position:f,uri:a}).secondaryHitUiReveal();N.logInteraction(e)}),[f,N,j,a]),_=(0,i.useCallback)((e=>{B(e);const t=j.chapterBlockFactory({position:f,uri:a}).contextMenuFactory().hitUiReveal();N.logInteraction(t)}),[f,N,j,B,a]),z=!c,W=(0,A.jsx)(at.g,{className:g()({[lt]:w}),children:e}),G=(0,A.jsxs)("div",{className:mt,children:[c?(0,A.jsx)(ot.g,{}):null,h&&(0,A.jsx)(P.N,{fullText:!0}),x&&(0,A.jsx)(Y.X,{size:16}),(0,A.jsx)("div",{className:pt,children:(0,A.jsx)(Me.E,{isPlaying:S,fullyPlayed:m,durationMs:t.milliseconds,resumePositionMs:C.current,position:S?U:void 0})})]}),V=(0,A.jsxs)("div",{className:xt,children:[(0,A.jsxs)("div",{className:yt,children:[(0,A.jsx)(ze,{uri:a,bookUri:s,className:g()({[gt]:!(0,Oe.y)(T)}),onClick:L,size:ce.q.xs,isLocked:c}),z?(0,A.jsx)(me.ClickToggleContextMenu,{menu:(0,A.jsx)(k.r,{uri:a,showUri:s,isLocked:c}),children:(0,A.jsx)(y.MoreButton,{className:ut,size:ce.q.xs,label:l.ag.get("more.label.context",e),onClick:_})}):null]}),(0,A.jsx)("div",{className:ht,children:(0,A.jsx)(Z.f,{size:"sm",version:Z.u.secondary,onClick:O,isPlaying:S,ariaPlayLabel:l.ag.get("tracklist.a11y.play",e,n),ariaPauseLabel:l.ag.get("tracklist.a11y.pause",e,n),locked:c,disabled:!d&&!c})})]}),H=(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("hr",{className:ct,"aria-hidden":!0}),(0,A.jsx)(it.w,{id:`chapter-${f}`,title:W,body:G,footer:V,onDoubleClick:e=>{F({targetUri:a,intent:"play",type:"double-click"}),O(e)},className:rt})]});return z?(0,A.jsx)(me._,{menu:(0,A.jsx)(k.r,{uri:a,showUri:s,isLocked:c}),onShow:M,children:(0,A.jsx)("div",{className:dt,children:H})}):(0,A.jsx)("div",{className:dt,children:H})})),bt=({bookUri:e,bookName:t,sampleUri:a,isFinishedUnlockingJourney:o,usePlayContextItem:s,spec:n,consumptionCapExplanation:r})=>{const l=function(e,t){const a=(0,Te.z)();return(0,i.useCallback)((async(i,o)=>a.getBookContents(e,{offset:i,limit:o,doRefreshSubscription:t})),[t,a,e])}(e,o),c=(0,i.useRef)(!1),d=(0,i.useRef)(0),u=(0,p.W6)(Ve.eli,{loadingValue:!1}),[g,m]=(0,i.useState)([]),h=(0,i.useCallback)((e=>e?.uri===a),[a]),x=(0,i.useCallback)((e=>(e=>null!==e)(e)&&!h(e)),[h]),y=(0,i.useCallback)((()=>{l&&(c.current||null===d.current||(c.current=!0,l(d.current,50).then((e=>{c.current=!1,d.current=e.nextOffset,e.items.length>0&&m((t=>t.concat(e.items.filter(x))))}))))}),[l,x]);return(0,i.useEffect)((()=>{d.current=0,m([])}),[e]),(0,A.jsx)("ul",{children:(0,A.jsx)(Ue.C,{onReachBottom:y,triggerOnInitialLoad:!0,children:g.map(((a,i)=>{const{name:o,duration:l,uri:c,playability:{playable:d},playedState:{playPositionMilliseconds:g,state:m},isExplicit:p,is19PlusOnly:h}=a;return u?(0,A.jsx)(kt,{name:o,duration:l,uri:c,bookUri:e,bookName:t,usePlayContextItem:s,isLocked:Fe(a),isPlayable:d,resumePositionMs:g,isFullyPlayed:m===Be.sY.Completed,isExplicit:p,is19PlusOnly:h,spec:n,index:i,consumptionCapExplanation:r},c):(0,A.jsx)(tt,{name:o,duration:l,uri:c,bookUri:e,bookName:t,usePlayContextItem:s,isLocked:Fe(a),isPlayable:d,resumePositionMs:g,isFullyPlayed:m===Be.sY.Completed,isExplicit:p,is19PlusOnly:h,spec:n,index:i,consumptionCapExplanation:r},c)}))})})};var jt=a(50281),ft=a(22669),vt=a(7048),Pt=a(65391),Ct=a(69129);const St="QEd1L2SSRW1ol_sQQN6m",It="ENuWK8u3C9kmadnqkErf",wt="i0gSVhns0PjhiUKm4OG1",Nt="jKVb6K0dga3SfW1dp2Pg",At="MOpV0_YizQER2NksxLju",Et="vrR8bh9DvivyDfUrh1vD",Dt="_toO3CqMPAPTbny7Rh8R",Rt="Iudw61HRePwOAJpbDRvA",Ut="GWaz1n1SADn9enzKdi_Z",Tt=i.memo((function({coverArt:e,toggleModal:t,uri:a,isBook:i}){const o=(0,Pt.X)(e,{desiredSize:320}),{spec:s,logger:n}=(0,ie.fU)(ft.createDesktopPodcastRatingEventFactory,{data:{identifier:i?r.Wg.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK:r.Wg.RATINGS_AND_REVIEWS_RATINGS,uri:a}});return(0,A.jsx)(Ct.Z,{contentLabel:"podcast-rating-modal",isOpen:!0,onRequestClose:t,children:(0,A.jsxs)("div",{className:St,children:[(0,A.jsxs)("div",{className:wt,children:[(0,A.jsx)(m.D,{as:"h1",variant:"canon",className:Dt,children:l.ag.get("web-player.audiobooks.rating.rateAudiobook")}),(0,A.jsxs)("button",{className:Nt,onClick:()=>{const e=s.closeButtonFactory().hitUiNavigateBack();n.logInteraction(e),t()},children:[(0,A.jsx)(jt.k,{role:"presentation"}),(0,A.jsx)("span",{className:"hidden-visually",children:l.ag.get("web-player.audiobooks.rating.closeModal")})]})]}),(0,A.jsxs)("div",{className:At,children:[(0,A.jsx)(vt.Ee,{loading:"eager",src:o?.url,className:It}),(0,A.jsxs)("div",{className:Et,children:[(0,A.jsx)(m.D,{as:"p",variant:"cello",className:Rt,children:l.ag.get("web-player.audiobooks.rating.wantToRate")}),(0,A.jsx)(m.D,{as:"p",className:Ut,children:l.ag.get("web-player.audiobooks.rating.goToApp")}),(0,A.jsx)(ye.D,{colorSet:"invertedLight",onClick:()=>{const e=s.okButtonFactory().hitUiNavigateBack();n.logInteraction(e),t()},children:l.ag.get("web-player.audiobooks.rating.ok")})]})]})]})})})),Bt="mmCZ5VczybT9VqKB5wFU",Ft="At_ihDspJfh1yw3Cn2cq",Ot="u3LLJx1KnMchfNCzi6k5",Lt="Yqz1Nv6wj1n3HmXL_qji",Mt="qRqn3JrWLPbGW9k2a63n",_t="HAah1_lK_dHgyyE71I8Z",zt="eiC4nh70nb5UHZBYMgNA",Wt="hl2eRCaYcZ1Jm1bgNYlU",Gt="eYtmwXEvi1UdCevg8WoK",Vt="QOp2aYTYmZHZ6DFFHuYE",Ht=i.memo((function({metadata:e}){const{uri:t,coverArt:a,name:n,htmlDescriptionPlain:d,authorName:u,sample:C,narrators:S,rating:I,isExplicit:w,duration:N,copyrights:R,publishDate:U,price:T,isLocked:B,consumptionCapExplanation:F,signifierText:O}=e,{search:L}=(0,s.TH)(),M=!!new URLSearchParams(L).get("isUnlockingAudiobook"),_=!(!(0,ee.D)(M)||M),z=(0,be.g)(),W=(0,j.Z)(a[0]?.url),G=(0,o.I0)(),[V,H]=(0,i.useState)(!1),X=(0,b.o)(),Y=(0,p.W6)(Ve.vWw,{loadingValue:!1}),{spec:K,logger:q}=(0,ie.fU)(h.createDesktopAudiobookEventFactory,{data:{uri:t,identifier:r.Wg.PODCAST_SHOW_AUDIOBOOK}}),{spec:Z,logger:oe}=(0,ie.fU)(h.createDesktopAudiobookEventFactory,{data:{uri:t,identifier:r.Wg.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK}}),{spec:ne,logger:re}=(0,ie.fU)(x.createDesktopLockedAudiobookEventFactory,{data:{uri:t,identifier:r.Wg.PODCAST_SHOW_AUDIOBOOK}}),le=(0,i.useMemo)((()=>K.actionBarFactory()),[K]),ce=(0,i.useMemo)((()=>Z.aboutSectionFactory()),[Z]),de=(0,i.useMemo)((()=>K.chapterListFactory()),[K]);(0,i.useEffect)((()=>{X({type:"view",intent:"audiobook"})}),[X]),(0,i.useEffect)((()=>{B&&re.logImpression(ne.impression())}),[ne,re,B]);const{isPlaying:ue,togglePlay:ge,usePlayContextItem:me,isActive:pe,triggerPlay:he}=(0,te.n)({uri:t},{featureIdentifier:"audiobook"}),{togglePlay:xe,isPlaying:ye,isActive:ke}=(0,te.n)({uri:C?.uri??""},{featureIdentifier:"audiobook"}),je=ue&&!ye,fe=pe&&!ke,ve=(0,i.useCallback)((async()=>{const e=K.actionBarFactory().playButtonFactory();if(F&&!z&&Y)return q.logInteraction(e.hitShowPaywall({paywalledItem:t})),void G((0,We.S3)(F));if(!B||z)if(z)ge();else{const a=(0,Ge.aK)({isPlaying:je,isActive:fe,spec:e,logger:q,uri:t});fe?ge({loggingParams:a}):he({loggingParams:a})}}),[K,F,z,Y,B,q,t,G,ge,je,fe,he]),Pe=(0,i.useCallback)((()=>{C?.uri&&(X({targetUri:C.uri,intent:ye?"play":"pause",type:"click"}),xe())}),[ye,X,xe,C?.uri]),Ce=(0,i.useCallback)((()=>{const e=ce.ratingButtonFactory().hitUiReveal();oe.logInteraction(e),H((e=>!e))}),[ce,oe]),{ref:Se,breakpoint:we}=(0,Q.Db)({[Q.Uo.MEDIUM]:600,[Q.Uo.LARGE]:1024}),Ne=null!=F,Ae=B&&T;return(0,A.jsxs)("section",{ref:Se,className:Bt,children:[(0,A.jsx)(c.$,{children:(0,ae.Od)({showOrAudiobookName:n,type:"Audiobook"})}),(0,A.jsx)(Ee,{name:n,authorName:u,uri:t,coverArt:a,backgroundColor:W,togglePlay:ve,isPlaying:je,isLocked:B,price:T,isConsumptionCapped:Ne,logger:q,spec:K.actionBarFactory()}),(0,A.jsx)(Ie,{name:n,backgroundColor:W,uri:t,togglePlay:ve,isPlaying:je,isLocked:B,isExplicit:w,duration:N,publishDate:U,price:T,isConsumptionCapped:Ne,spec:le}),(0,A.jsxs)("div",{className:g()(Ft,"contentSpacing",{[Ot]:we===Q.Uo.LARGE}),children:[(0,A.jsxs)("div",{className:Lt,children:[(0,A.jsxs)("div",{className:Wt,children:[(0,A.jsxs)("div",{className:Gt,children:[w&&(0,A.jsx)(P.N,{fullText:!0}),(0,A.jsxs)("div",{children:[U&&(0,A.jsx)(m.D,{variant:"mesto",className:Vt,children:l.ag.formatDate(U)}),(0,A.jsx)(m.D,{variant:"mesto",children:(0,A.jsx)(D.nL,{durationMs:N})})]})]}),O&&(0,A.jsx)(m.D,{variant:"ballad",as:"p",semanticColor:"textBrightAccent",children:O}),!O&&Ae&&(0,A.jsx)(Re,{price:T})]}),(0,A.jsx)(se,{htmlDescription:d,narrators:S,spec:ce})]}),(0,A.jsxs)("div",{className:Mt,children:[C&&(0,A.jsx)(J,{label:l.ag.get("audiobook.page.sample"),images:C.coverArt||[],title:C.name,duration:C.duration.milliseconds,moreButton:B?null:(0,A.jsx)(f.y,{menu:(0,A.jsx)(k.r,{uri:C.uri,showUri:t,isLocked:B}),children:(0,A.jsx)(y.MoreButton,{})}),onClick:Pe,isPlaying:ye,isActive:ke,size:$.LARGE,contentRating:C.contentRating?.label,isPlayable:C.isPlayable}),(0,A.jsx)("div",{className:_t,children:(0,A.jsx)(E,{rating:I,onClick:Ce})})]}),(0,A.jsxs)("div",{className:zt,children:[(0,A.jsx)(bt,{bookUri:t,bookName:n,sampleUri:C?.uri,isFinishedUnlockingJourney:_,usePlayContextItem:me,spec:de,consumptionCapExplanation:F??void 0},`${t}-${B}`),(0,A.jsx)(v.k,{copyrights:R})]})]}),V&&(0,A.jsx)(Tt,{toggleModal:()=>H(!1),coverArt:a,uri:t,isBook:!0})]})}));var Xt=a(24949),Yt=a(72556),Kt=a(96645);let qt=function(e){return e.UNAUTH_LYRICS="track-lyrics-unauth-1.0",e.RTP_AND_LYRICS_HOLDOUT="rtp-and-lyrics-holdout",e.ALBUM_CANONICALS="album-canonical",e.TRACK_CANONICALS="track-canonical",e.VIDEO_PODCAST_SHOW_TITLE_TAG="podcast-video-title-tag",e.RTP_FEATURED_ARTISTS="rtp-v21",e}({}),Zt=function(e){return e.CONTROL="0",e.VARIANT="1",e}({});var $t=a(55862),Jt=a(98367);const Qt=({uri:e,name:t,backgroundColor:a,spec:o})=>{const s=(0,ie.$P)(),n=(0,b.o)(),r=!(0,Se.k)(),[c,d]=(0,le.Z)(e),u=(0,i.useCallback)((()=>{n({targetUri:e,intent:c?"unsave":"save",type:"click"});const t=o.followButtonFactory();s.logInteraction(c?t.hitUnfollow({itemToBeUnfollowed:e}):t.hitFollow({itemToBeFollowed:e})),d(!c)}),[n,e,c,o,s,d]),g=(0,i.useCallback)((()=>{s.logInteraction(o.contextButtonFactory().hitUiReveal())}),[s,o]);return(0,A.jsx)(ne.o,{backgroundColor:a,children:(0,A.jsxs)(ne.F,{children:[(0,A.jsx)(Ce.r,{children:(0,A.jsx)(Jt.e,{isFollowing:c,onClick:u,disabled:r})},"follow-button"),(0,A.jsx)(f.y,{menu:(0,A.jsx)($t.M,{uri:e}),onShow:g,children:(0,A.jsx)(y.MoreButton,{label:l.ag.get("more.label.context",t)})})]})})},ea=(0,i.lazy)((()=>a.e(386).then(a.bind(a,40386))));function ta(e){return(0,p.W6)(Ve.$f6)?(0,A.jsx)(i.Suspense,{fallback:!0,children:(0,A.jsx)(ea,{...e})}):null}var aa=a(1858),ia=a(95046),oa=a(54904),sa=a(4699),na=a(84389),ra=a(25728),la=a(36462),ca=a(91560),da=a(76285);const ua=(0,i.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),ga=i.memo((function({uri:e,children:t}){return(0,A.jsx)(da.r,{uri:e,defaultState:[],sortContext:ua,localStorageKey:"showFilterParams-v2",children:t})}));var ma=a(79950);const pa={field:ma.ay.PUBLISH_DATE,order:ma.i5.DESC},ha={field:ma.ay.PUBLISH_DATE,order:ma.i5.ASC},xa={episodic:pa,sequential:ha,recent:pa};function ya(){return new Map([[pa,{key:"newest-to-oldest",value:l.ag.get("shows.sort.newest-to-oldest")}],[ha,{key:"oldest-to-newest",value:l.ag.get("shows.sort.oldest-to-newest")}]])}function ka(e){return xa[e]}const ba=(0,i.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowSortProvider")},sortState:ka("recent")}),ja=e=>{const t=ya();return Array.from(t.keys()).some((({field:t})=>t===e?.field))},fa=i.memo((function({uri:e,children:t,defaultSortParam:a}){return(0,A.jsx)(da.r,{uri:e,defaultState:a,sortContext:ba,localStorageKey:"showSortParam",validator:ja,children:t})})),va="cJJXVm4gQW6AdfCQRhpX",Pa="hTRqaN61SDG95erQGMmx",Ca={totalCount:0,nextOffset:0,items:[]},Sa=i.memo((function({showMetadata:e,usePlayContextItem:t}){const{sortState:a}=(0,i.useContext)(ba),{sortState:o}=(0,i.useContext)(ua),s=(0,ra.ZM)(e.uri,a,o),[n,r]=(0,i.useState)(Ca),l=(0,i.useRef)(!1),c=(0,i.useRef)(0),d=(0,i.useCallback)(((e=!1)=>{if(!s)return;const t=c.current;null!==t&&(l.current||(l.current=!0,s(t,50).then((a=>{r((i=>{const o=e?[]:[...i.items];return o.splice(t,a.items.length,...a.items),c.current=a.nextOffset,{...a,items:o}})),l.current=!1}))))}),[s]);return(0,i.useEffect)((()=>{r(Ca)}),[e.uri]),(0,i.useEffect)((()=>{c.current=0,d(!0)}),[d]),(0,A.jsx)(ca.ZP,{value:"track-list",children:(0,A.jsx)(Ue.C,{onReachBottom:d,triggerOnInitialLoad:!0,children:n.items.map(((a,i)=>a&&(0,A.jsxs)("div",{className:Pa,children:[(0,A.jsx)("hr",{className:va,"aria-hidden":!0}),(0,A.jsx)(la.V,{index:i,episode:a,showMetadata:e,usePlayContextItem:t},`${a.uri}/${i}`)]},`${i}${a.uri}`)))})})}));var Ia=a(90633);const wa={field:ma.YG.ISPLAYED,operator:ma.NK.EQUALS,value:!1},Na={field:ma.YG.STARTEDPLAYING,operator:ma.NK.GREATER_THAN,value:0};const Aa="all-episodes",Ea=({onFilter:e})=>{const{sortState:t,setSortState:a}=(0,i.useContext)(ua),o=new Map([[wa,{key:"is-played",value:l.ag.get("shows.filter.unplayed")}],[Na,{key:"started-playing",value:l.ag.get("shows.filter.in-progress")}]]),s=Array.from(o.values());s.unshift({key:Aa,value:l.ag.get("mwp.podcast.all.episodes")});const n=Array.from(o.keys()),r=(0,i.useCallback)((t=>{if(t===Aa)a([]);else{const e=n.find((e=>o.get(e)?.key===t));e&&a([e])}e()}),[e,a,n,o]);if(!o.size||!n)return null;let c=s[0];const d=Array.from(o.entries()).filter((e=>t?.some((t=>t.field===e[0].field&&t.operator===e[0].operator))));return d.length>0&&(c=d[0][1]),(0,A.jsx)(Ia.A,{options:s,onSelect:e=>r(e),selected:c,variant:"balladBold",semanticColor:"textBase",heading:l.ag.get("drop_down.filter_by")})},Da=({onSort:e})=>{const{sortState:t,setSortState:a}=(0,i.useContext)(ba),o=ya(),s=Array.from(o.values()),n=Array.from(o.keys()),r=(0,i.useCallback)((t=>{const i=n.find((e=>o.get(e)?.key===t));i&&a(i),e()}),[n,e,o,a]);if(!o.size||!t)return null;const c=Array.from(o.keys()).find((e=>e.field===t.field&&e.order===t.order));if(!c)return null;const d=o.get(c);return d?(0,A.jsx)(Ia.A,{options:s,onSelect:e=>r(e),selected:d,heading:l.ag.get("drop_down.sort_by")}):null},Ra="aQMtxnKeiJqZ9XCcDuZ7",Ua="TYB4Y2xQujO7cifhHush",Ta="sSXKiPRvp2AHmwfHoCCS",Ba="YJlizbhw6DBPHT9OYbdj",Fa="klz_XuZpllvTMzpJF1gw",Oa="TfjbWiK8hca4HHEBnonP",La="kR0M2WSYVUj4cohADSFM",Ma="ghfuv80I8uW_ymG_jfx9",_a="jtfSxoRam9rzTtdXIjzc",za="fejGrhq7pxGC99cUdyVw",Wa="T0OjvsNXAJJGd23eBG2m",Ga="Ppm5YkDdE5ktTPwZC1Dw",Va=({spec:e})=>{const t=(0,ie.$P)(),{canSort:a,canFilter:o}=(0,ra.zZ)().capabilities,s=(0,i.useCallback)((()=>{t.logInteraction(e.episodeListFactory().filterButtonFactory().hitFilter())}),[t,e]),n=(0,i.useCallback)((()=>{t.logInteraction(e.episodeListFactory().sortButtonFactory().hitSort())}),[t,e]);return(0,A.jsxs)("div",{className:La,children:[o&&(0,A.jsx)("div",{className:_a,children:(0,A.jsx)(Ea,{onFilter:s})}),!o&&(0,A.jsx)(m.D,{as:"h3",variant:"canon",semanticColor:"textBase",className:za,children:l.ag.get("mwp.podcast.all.episodes")}),a&&(0,A.jsx)("div",{className:Ma,children:(0,A.jsx)(Da,{onSort:n})})]})},Ha=e=>{switch(e){case Be.it.TRAILER:return l.ag.get("podcasts.next-episode.trailer");case Be.it.UP_NEXT:return l.ag.get("podcasts.next-episode.up-next");case Be.it.CONTINUE_LISTENING:return l.ag.get("podcasts.next-episode.continue-listening");case Be.it.FIRST_PUBLISHED:return l.ag.get("podcasts.next-episode.first-published");case Be.it.LATEST_PUBLISHED:return l.ag.get("podcasts.next-episode.latest-published");default:return}},Xa=({breakpoint:e,metadata:t,showId:a,spec:o})=>{const{uri:s,trailer:n,topics:r,description:c,htmlDescription:d}=t,u=(0,ie.$P)(),h=(0,i.useMemo)((()=>o.episodeListFactory()),[o]),x=(0,p.W6)(Ve.VzO),k=(0,b.o)(),j=(0,be.g)(),{sortState:P}=(0,i.useContext)(ba),{sortState:C}=(0,i.useContext)(ua),S=(0,ra.zZ)(),{usePlayContextItem:I}=(0,te.n)({uri:s,metadata:{[na.sb.SORTING_CRITERIA]:S.getPlayerSort(P),[na.sb.FILTERING_PREDICATE]:S.getPlayerFilter(C)}},{featureIdentifier:"show"}),{isActive:w,isPlaying:N,togglePlay:E}=I({uri:n?.uri||""}),D=(0,i.useCallback)((e=>{k({intent:"expand-description",type:"click"});const t=o.aboutSectionFactory().seeMoreButtonFactory(),a=e?t.hitUiReveal():t.hitUiHide();u.logInteraction(a)}),[u,k,o]),R=(0,i.useCallback)(((e,t)=>{const a=o.aboutSectionFactory().topicFactory(t).hitUiNavigate({destination:t.uri});u.logInteraction(a)}),[u,o]),U=n?{name:n.name,uri:n.uri,audio:{items:n.audio.items.map((e=>({url:e.url})))}}:null,T=(0,la.e)(t),B=(0,oa.s)(U,T),F=(0,i.useCallback)((()=>{n?.uri&&(j?B():(k({targetUri:n.uri,intent:N?"play":"pause",type:"click"}),E()))}),[B,j,N,k,E,n?.uri]),{ref:O,breakpoint:L}=(0,Q.Db)({[Q.Uo.MEDIUM]:0,[Q.Uo.LARGE]:600}),M=r.length>0,_=c||d,z=_||M;return(0,A.jsxs)("div",{className:g()(Ua,"contentSpacing",{[Ta]:e===Q.Uo.LARGE}),children:[(0,A.jsxs)("div",{className:Ba,children:[z&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(m.D,{as:"h3",variant:"canon",semanticColor:"textBase",className:za,children:l.ag.get("artist.about")}),_&&(0,A.jsx)(oe.o,{maxLines:4,content:(c||"").trim(),onExpanded:D,htmlContent:d||void 0}),M&&(0,A.jsx)(ia.v,{topics:r,onClick:R})]}),(0,A.jsx)(ta,{showId:a,uri:s}),n&&!x&&(0,A.jsx)(sa._,{menu:(0,A.jsx)(aa.k,{uri:n.uri,showUri:s,sharingInfo:n.sharingInfo}),children:(0,A.jsx)(J,{label:l.ag.get("track-trailer"),className:Wa,images:n.coverArt||[],title:n.name,duration:n.duration.milliseconds,moreButton:(0,A.jsx)(f.y,{menu:(0,A.jsx)(aa.k,{uri:n.uri,sharingInfo:n.sharingInfo,showUri:s}),children:(0,A.jsx)(y.MoreButton,{})}),onClick:F,isPlaying:N,isActive:w,size:$.LARGE,contentRating:n.contentRating?.label})})]}),(0,A.jsx)(Q.ZU.Provider,{value:L,children:(0,A.jsxs)("div",{className:Oa,"data-testid":"show-all-episode-list",ref:O,children:[x&&t.nextBestEpisode&&(0,A.jsx)(la.V,{showMetadata:t,episode:t.nextBestEpisode.data,usePlayContextItem:I,status:Ha(t.nextBestEpisode.type),variant:"next-best-episode"}),(0,A.jsx)(Va,{spec:o}),(0,A.jsx)(ie.Nh,{spec:h,children:(0,A.jsx)(Sa,{showMetadata:t,usePlayContextItem:I})})]})}),(0,A.jsx)(v.k,{copyrights:[]})]})},Ya=i.memo(Xa);var Ka=a(86901);const qa=({reason:e})=>{const t=(0,p.W6)(Ve.ALT),a=function(e){switch(e){case"OTP":return l.ag.get("podcasts.subscriber-indicator.otp");case"SUBSCRIPTION":return l.ag.get("podcasts.subscriber-indicator.subscription");default:return""}}(e);return t&&a?(0,A.jsx)(m.D,{className:Ga,children:a}):null};const Za=({metadata:e,backgroundColor:t})=>{const{uri:a,coverArt:i,name:o,podcastType:s,publisherName:n,gatedContentAccessReason:r}=e,{isXSOnly:c,isSMOnly:d}=(0,Ka.e)(),u=c||d;return(0,A.jsxs)(we.gF,{backgroundColor:t,children:[(0,A.jsx)(Ne.W,{children:(0,A.jsx)(Ae.i,{text:o,dragUri:a,dragLabel:o})}),(0,A.jsx)("div",{className:Fa,children:(0,A.jsx)(sa._,{menu:(0,A.jsx)($t.M,{uri:a}),children:(0,A.jsx)(we.Oe,{loading:"eager",name:o,images:i,placeholderType:"show",shape:we.Kc.ROUNDED_CORNERS})})}),(0,A.jsxs)(we.sP,{children:[(0,A.jsxs)(m.D,{variant:"mestoBold",children:["SHOW"===s?l.ag.get("type.show"):l.ag.get("type.podcast"),r&&(0,A.jsx)(qa,{reason:r})]}),(0,A.jsx)(sa._,{menu:(0,A.jsx)($t.M,{uri:a}),children:(0,A.jsx)(we.xd,{dragUri:a,dragLabel:o,children:(0,A.jsx)("span",{"data-testid":"show-title",children:o})})}),(0,A.jsx)(m.D,{variant:u?"cello":"canon",children:n})]})]})};const $a=(0,a(23055).P1)((e=>e.seoExperiment),(e=>e?.[T.p.SHOW]));var Ja=a(13350);const Qa=({metadata:e,showId:t})=>{const{coverArt:a,name:r,uri:l}=e,{spec:d}=(0,ie.fU)(n.createDesktopPodcastEventFactory,{data:{uri:l}}),u=(0,i.useMemo)((()=>d.actionBarFactory()),[d]),g=(0,j.Z)(a[0]?.url||null),{ref:m,breakpoint:p}=(0,Q.Db)({[Q.Uo.MEDIUM]:600,[Q.Uo.LARGE]:1024}),h=((e,t)=>(({treatment:e,entityId:t,experimentId:a,treatmentVariation:i})=>{if(e&&e[t]){const o=e[t];return o.experimentId===a&&o.treatment===i}return!1})({treatment:e,entityId:t,experimentId:qt.VIDEO_PODCAST_SHOW_TITLE_TAG,treatmentVariation:Zt.VARIANT}))((0,o.v9)($a),t),x=(0,s.TH)(),y=(0,Xt.vI)(Kt.k.VideoPodcastShowTitleTag,x),k=h||y;return(0,A.jsxs)("section",{ref:m,className:Ra,children:[(0,A.jsx)(c.$,{children:(0,ae.Od)({showOrAudiobookName:r,type:"Podcast",isVideoPodcastShowTitleTagEnabled:k})}),(0,A.jsx)(Za,{metadata:e,backgroundColor:g}),(0,A.jsx)(Qt,{uri:l,name:r,backgroundColor:g,spec:u}),(0,A.jsx)(Ya,{breakpoint:p,metadata:e,showId:t,spec:d})]})},ei=(0,i.memo)((function(){const{showId:e=""}=(0,s.UO)(),t=`spotify:show:${e}`,{data:a,error:o}=(0,Yt.l)(t);return!a||o?(0,A.jsx)(d.h,{hasError:!!o,errorMessage:l.ag.get("error.not_found.title.page")}):(0,Be.l6)(a)?(0,A.jsx)(i.Suspense,{fallback:null,children:(0,A.jsx)(Ja.C,{pageId:r.Wg.PODCAST_SHOW_AUDIOBOOK,uri:t,children:(0,A.jsx)(Ht,{metadata:a})})}):(0,A.jsx)(i.Suspense,{fallback:null,children:(0,A.jsx)(Ja.C,{pageId:r.Wg.PODCAST,uri:t,children:(0,A.jsx)(ga,{uri:a.uri,children:(0,A.jsx)(fa,{uri:a.uri,defaultSortParam:ka(a.consumptionOrder),children:(0,A.jsx)(Qa,{showId:e,metadata:a})})})})})}))},61649:(e,t,a)=>{a.d(t,{k:()=>n});var i=a(81902);const o="rTMkDBDp47Eo12ZEQv4U";var s=a(4637);const n=({copyrights:e,courtesyLine:t})=>{const a=(e||[]).map(((e,t)=>{const a=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let o;return o="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,(0,s.jsx)(i.D,{as:"p",variant:"finale",dir:"auto",children:`${o} ${a}`},t)}));return t&&a.unshift((0,s.jsx)(i.D,{as:"p",variant:"finale",dir:"auto",children:t},a.length)),(0,s.jsx)("div",{className:o,children:a})}},24949:(e,t,a)=>{a.d(t,{vI:()=>i});const i=(e,t)=>{const a=t?new URLSearchParams(t.search):void 0;return"1"===a?.get(e)}},96645:(e,t,a)=>{a.d(t,{k:()=>i});let i=function(e){return e.I18nSEO="i18nSEO",e.RTPTrackCredits="rtpv2p2",e.BlendParty="bp",e.BlendPartyV2="bpv2",e.VideoPodcastShowTitleTag="vidpodshow",e.I18nAdditionalPages="i18nap",e.IlrTrackCanonicalTop="ilr-track-canonical-top",e.IlrTrackCanonicalBottom="ilr-track-canonical-bottom",e.IlrTrackOrganicTop="ilr-track-organic-top",e.IlrTrackOrganicBottom="ilr-track-organic-bottom",e.RichPlaylistPages="rpp",e}({})}}]);
//# sourceMappingURL=xpui-routes-show.js.map