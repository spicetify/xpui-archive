"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5713],{36462:(e,t,a)=>{a.d(t,{V:()=>B,e:()=>R});var i=a(59496),o=a(99766),s=a(97653),n=a(86020),r=a(76163),l=a(83985),c=a(74653),d=a(1858),u=a(70014),g=a(96651),m=a(46873),p=a(1054),h=a(56287),x=a(41567),y=a(57265),k=a(81622),b=a(54904),j=a(4699),f=a(59642),v=a(14126),P=a(91560),C=a(33236),S=a(99914),w=a(57115),I=a(58069),N=a(2437),E=a(10242),D=a(98474),U=a(4637);function R(e){return{uri:e.uri,name:e.name,trailer:e.trailer,showTypes:e.showTypes}}const A=e=>`activation-trigger-mme-${e}`,B=i.memo((function({index:e=-1,showMetadata:t,episode:a,usePlayContextItem:B,status:F,variant:T}){const M=(0,E.E)(),O=a.playedState.playPositionMilliseconds,L=a.uri,_=(0,i.useRef)(null),[z,W]=(0,i.useState)(a.playedState.state===I.sY.Completed),G=(0,x.O)(),X=(0,k.g)(),V=(0,C.jh)(),H=(0,y.o)(),q=(0,o.I0)(),{UBIFragment:K,spec:Y,logger:Z}=(0,w.fU)(n.createDesktopEpisodeBlockEventFactory,{data:{uri:L,reason:a.requestId||"",position:e}}),$=(0,w.Wi)(Y),{isActive:J,isPlaying:Q,togglePlay:ee}=B({uri:L}),[te]=(0,S.z)(1e4,(e=>e?.item?.uri===L));(0,i.useEffect)((()=>{Q&&(_.current=te)}),[Q,te]),(0,i.useEffect)((()=>{!Q&&_.current&&a.duration.milliseconds<=_.current&&W(!0)}),[Q,a.duration.milliseconds]);const ae=(0,i.useCallback)((e=>{e||(_.current=0),W(e)}),[]),ie=e=>{if(e.target!==e.currentTarget)return;const i=`${a.name} • ${t.name}`;G(e,[L],i,t.uri)},oe=R(t),se=(0,b.s)({...a,coverArt:{sources:a.coverArt}},oe),ne=(0,i.useCallback)((()=>{if(a.episodeType===I.Wf.Episode&&M)p.y.set((()=>({triggerId:A(a.uri),triggerAction:null})));else if(X)se();else{let e;e=Q?Y.playButtonFactory().hitPause({itemToBePaused:L}):J?Y.playButtonFactory().hitResume({itemToBeResumed:L}):Y.playButtonFactory().hitPlay({itemToBePlayed:L});const t=Z.logInteraction(e);H({targetUri:L,intent:Q?"pause":"play",type:"click"}),ee({loggingParams:t})}}),[J,se,H,ee,L,Q,X,a,M,Z,Y]),re=(0,i.useCallback)((()=>{Z.logInteraction(Y.hitUiNavigate({destination:L})),H({type:"click",targetUri:L,intent:"navigate"})}),[L,H,Z,Y]),le=a.podcastSubscription?.isPaywalled??!1,ce=a.podcastSubscription?.isUserSubscribed??!1,de=le&&!ce,ue=le&&X,{badges:ge}=(0,N.r)({contentRating:a.contentRating?.label,isPaywalled:le}),me=(0,i.useCallback)((()=>q((0,l.RM)(t.uri))),[t.uri,q]),pe=(0,i.useCallback)((e=>{let i=e;return(de||ue)&&(i=(0,U.jsx)(m.l,{enabled:!0,showUri:t.uri,children:i})),!a.playability.playable&&ge.nineteen&&(i=(0,U.jsx)("div",{onClick:e=>{e.stopPropagation(),me()},children:e})),i=(0,U.jsx)(c.D,{id:A(L),targetURI:(0,r.EC)(L),children:i}),i}),[L,de,ue,t.uri,ge.nineteen,a.playability.playable,me]),he=(0,s.W6)(D.el,{loadingValue:!1});return(0,U.jsx)(K,{spec:Y,children:(0,U.jsx)(P.ZP,{value:"row",index:e,children:(0,U.jsx)(j._,{onShow:()=>{Z.logInteraction(Y.secondaryHitUiReveal())},menu:(0,U.jsx)(d.k,{uri:L,showUri:t.uri,sharingInfo:a.sharingInfo,isPlayed:z,onMarkAsPlayed:ae}),children:he?(0,U.jsx)(g.k,{ref:$,requestId:a.requestId,index:e,uri:L,size:V,images:a.coverArt||[],name:a.name,showName:t.name,description:a.description,isPlayable:a.playability.playable||de,fullyPlayed:z,durationMs:a.duration.milliseconds,releaseDate:a.releaseDate?.isoString||"",resumePositionMs:_.current??O,handleDragStart:ie,handlePlaybackClick:ne,handleClick:re,isCurrentlyPlaying:J,isPaywalled:le,isUserSubscribed:ce,isPlaying:Q,position:Q?te:void 0,episodeSharingInfo:a.sharingInfo,onMarkAsPlayed:ae,contentInformation:a.contentInformation,badges:(0,U.jsxs)(U.Fragment,{children:[ge.explicit&&(0,U.jsx)(f.N,{}),ge.paid&&(0,U.jsx)(h.g,{}),ge.nineteen&&(0,U.jsx)(v.X,{size:16})]}),playButtonWrapper:pe,onMoreButtonClick:()=>{Z.logInteraction(Y.moreButtonFactory().hitUiReveal())},status:F,variant:T}):(0,U.jsx)(u.X,{ref:$,requestId:a.requestId,index:e,uri:L,size:V,images:a.coverArt||[],name:a.name,showName:t.name,description:a.description,isPlayable:a.playability.playable||de,fullyPlayed:z,durationMs:a.duration.milliseconds,releaseDate:a.releaseDate?.isoString||"",resumePositionMs:_.current??O,handleDragStart:ie,handlePlaybackClick:ne,handleClick:re,isCurrentlyPlaying:J,isPaywalled:le,isUserSubscribed:ce,isPlaying:Q,position:Q?te:void 0,episodeSharingInfo:a.sharingInfo,onMarkAsPlayed:ae,contentInformation:a.contentInformation,badges:(0,U.jsxs)(U.Fragment,{children:[ge.explicit&&(0,U.jsx)(f.N,{}),ge.paid&&(0,U.jsx)(h.g,{}),ge.nineteen&&(0,U.jsx)(v.X,{size:16})]}),playButtonWrapper:pe,onMoreButtonClick:()=>{Z.logInteraction(Y.moreButtonFactory().hitUiReveal())},status:F,variant:T})})})})}))},26771:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Qa});var i=a(59496),o=a(99766),s=a(80519),n=a(14751),r=a(4982),l=a(55740),c=a(42673),d=a(17286),u=a(84875),g=a.n(u),m=a(64641),p=a(97653),h=a(34201),x=a(47712),y=a(28725),k=a(80557),b=a(57265),j=a(8091),f=a(41328),v=a(61649),P=a(59642),C=a(87297),S=a(21949);const w="_yl4tOZxcpoUt28k6B8I",I="lcJflizNrSwDM9yPNk6h",N="ret7iHkCxcJvsZU14oPY";var E=a(4637);const D=({rating:e,className:t,onClick:a})=>{if(!e)return null;const i=Boolean(e.rating?.rating);return(0,E.jsxs)("button",{className:g()(w,t),onClick:a,children:[(0,E.jsx)(m.D,{dir:"auto",variant:"mestoBold",children:e.averageRating?.showAverage?l.ag.formatNumber(e.averageRating.average,{maximumFractionDigits:1}):l.ag.get("web-player.audiobooks.noRating")}),i?(0,E.jsx)(C.u,{iconSize:16,className:g()(I)}):(0,E.jsx)(S.G,{iconSize:16,className:g()(I)}),e.averageRating?.showAverage&&(0,E.jsxs)(m.D,{variant:"mesto",className:g()(N),children:["(",l.ag.formatNumberCompact(Number(e.averageRating.totalRatings)),")"]})]})};var U=a(45351),R=a(97045),A=a(18864),B=a(37859);const F="SpVoh9vvBN0kIwzfCiBh",T="nsGHaEmn310z9W4RMbb8",M="PfYVlZzroXSurDmS_kxY",O="kCT99_BcJQtW47mEfVF6",L="gmDgEbPyRXNixmjYAT9f",_="XlZGcb86bItwlMPQ2jOf",z="VGTtqfOlX2jIbpff6mPP",W="aexqooSgfdW95poEaxjH",G="Fui2wGupk4F1Khigbrhj",X="jWcvSz47NFpbLjnkFT1O",V="Oo6MP8F01W5uGlnw8dag";var H=a(11526),q=a(14126),K=a(54886),Y=a(2437),Z=a(97387);let $=function(e){return e.SMALL="small",e.LARGE="large",e}({});const J=({images:e,title:t,contentRating:a,duration:i,moreButton:o,onClick:s,onContextMenu:n,onTouchStart:r,onTouchEnd:l,isPlaying:c,isActive:d,size:u,className:p,label:h,isPlayable:x=!0})=>{const y=u===$.LARGE?"md":"sm",{badges:k}=(0,Y.r)({contentRating:a});return(0,E.jsxs)("div",{"data-testid":"trailer-component",className:g()(F,p,{[T]:d}),onContextMenu:n,onTouchStart:r,onTouchEnd:l,children:[(0,E.jsxs)("div",{className:O,children:[(0,E.jsxs)("div",{className:W,children:[(0,E.jsx)(R.O,{type:B.p.EPISODE,title:t,className:g()(z,{[V]:u===$.SMALL,[X]:u===$.LARGE}),size:A.m$.SIZE_56,images:e,shape:R.K.ROUNDED_CORNERS}),(0,E.jsx)("div",{className:G,children:(0,E.jsx)(Z.f,{"data-testid":"trailer-play-button",version:H.ul.transparent,size:y,isPlaying:c,onClick:s,disabled:!x})})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("div",{className:L,children:(0,E.jsx)(m.D,{dir:"auto",className:M,variant:"balladBold",children:t})}),(0,E.jsxs)("div",{className:_,children:[(0,E.jsx)(K.V,{text:h}),k.explicit&&(0,E.jsx)(P.N,{}),k.nineteen&&(0,E.jsx)(q.X,{}),(0,E.jsx)(m.D,{dir:"auto",variant:"mesto",children:(0,E.jsx)(U.nL,{durationMs:i})})]})]})]}),o]})};var Q=a(33236),ee=a(78802),te=a(55207),ae=a(4302),ie=a(57115),oe=a(31398);const se=({htmlDescription:e,narrators:t,spec:a})=>{const o=(0,b.o)(),s=(0,ie.$P)(),n=(0,i.useCallback)((e=>{o({intent:"expand-description",type:"click"});const t=a.seeMoreButtonFactory();s.logInteraction(e?t.hitUiReveal():t.hitUiHide())}),[s,o,a]);return(0,E.jsxs)(E.Fragment,{children:[t.length?(0,E.jsx)(m.D,{as:"p",variant:"ballad",children:l.ag.get("web-player.audiobooks.narratedByX",t.join(l.ag.getSeparator()))}):null,e&&(0,E.jsx)(oe.o,{maxLines:4,content:e,htmlContent:e,onExpanded:n})]})};var ne=a(57579),re=a(3819),le=a(82487),ce=a(94942);const de=i.memo((function({uri:e,size:t=ce.q.md,className:a,onClick:o}){const[s,n]=(0,le.Z)(e),r=(0,b.o)(),l=(0,i.useCallback)((()=>{r({targetUri:e,intent:s?"unsave":"save",type:"click"}),n(!s)}),[r,e,s,n]);return(0,E.jsx)(ce.o,{className:a,isFollowing:s,onFollow:l,onClick:o,uri:e,size:t})}));var ue=a(21355);const ge="8px";var me=a(2238),pe=a(12636),he=a(6123),xe=a(85830),ye=a(89120),ke=a(64218),be=a(81622),je=a(77470);const fe="iZut9Dh2KEjNVhDUxzWw";function ve({uri:e,price:t,size:a,spec:i,logger:o,onPlayback:s}){const n=(0,je.k)(),r=(0,be.g)(),c=0===t?.finalPrice?.amount,d=c?i.getButtonFactory({uri:e}):i.buyButtonFactory({uri:e}),u=(0,xe.y1)((async()=>{if(o.logInteraction(d.hitShowPaywall({paywalledItem:e})),r)s();else{try{t?.finalPrice?await(0,ke.Q)({show_uri:e,currency:t.finalPrice.currency,price:t.finalPrice.amount}):n(l.ag.get("error.generic"))}catch(e){n(l.ag.get("error.generic"))}s()}}),2e3,{leading:!0,trailing:!1});return(0,E.jsx)(ye.D,{buttonSize:a,className:fe,style:{flexShrink:0},onClick:u,children:c?l.ag.get("web-player.audiobooks.buyFree"):l.ag.get("web-player.audiobooks.buy")})}const Pe=({uri:e,isLocked:t,price:a,isPlaying:i,isConsumptionCapped:o,onPlayback:s,logger:n,spec:r,size:l="lg"})=>t&&!o?(0,E.jsx)(ve,{size:l,uri:e,price:a,logger:n,spec:r,onPlayback:s}):(0,E.jsx)(he.$,{size:l,isPlaying:i,uri:e,onClick:s});var Ce=a(43795),Se=a(17140);const we=i.memo((function({backgroundColor:e,uri:t,name:a,isPlaying:o,togglePlay:s,isLocked:n,price:r,isConsumptionCapped:c,spec:d}){const[u,g]=(0,le.Z)(t),m=!(0,Se.k)(),p=(0,b.o)(),h=(0,ie.$P)(),x=(0,i.useCallback)((()=>{p({targetUri:t,intent:u?"unsave":"save",type:"click"});const e=d.saveToLibraryButtonFactory();u?h.logInteraction(e.hitUnfollow({itemToBeUnfollowed:t})):h.logInteraction(e.hitFollow({itemToBeFollowed:t})),g(!u)}),[p,t,u,d,g,h]),k=(0,i.useCallback)(((e,a)=>{const i=d.downloadButtonFactory();a===pe.mc.ADD?h.logInteraction(i.hitDownload({itemToDownload:t})):a===pe.mc.REMOVE?h.logInteraction(i.hitRemoveDownload({itemToRemoveFromDownloads:t})):a===pe.mc.NO_PERMISSION&&h.logInteraction(i.hitUiReveal())}),[h,d,t]),j=(0,i.useCallback)((()=>{const e=d.contextButtonFactory().hitUiReveal();h.logInteraction(e)}),[h,d]);return(0,E.jsx)(ne.o,{backgroundColor:e,style:{"--action-bar-padding-bottom":ge},children:(0,E.jsxs)(ne.F,{children:[(0,E.jsx)(Pe,{uri:t,isLocked:n,price:r,isPlaying:o,isConsumptionCapped:c,onPlayback:s,logger:h,spec:d}),(0,E.jsx)(Ce.r,{children:(0,E.jsx)(re.H,{isAdded:u,onClick:x,disabled:m,size:re.q.md,isAudiobook:!0})},"follow-button"),!n&&(0,E.jsx)(de,{uri:t,onClick:k}),(0,E.jsx)(me.ClickToggleContextMenu,{menu:(0,E.jsx)(ue.X,{uri:t}),children:(0,E.jsx)(y.MoreButton,{label:l.ag.get("more.label.context",a),onClick:j})})]})})}));var Ie=a(85583),Ne=a(59476),Ee=a(86739);const De=i.memo((function({coverArt:e,name:t,authorName:a,uri:i,backgroundColor:o,isPlaying:s,togglePlay:n,isLocked:r,price:c,isConsumptionCapped:d,logger:u,spec:g}){return(0,E.jsxs)(Ie.gF,{backgroundColor:o,children:[(0,E.jsxs)(Ne.W,{children:[(0,E.jsx)(Pe,{uri:i,isLocked:r,price:c,isPlaying:s,isConsumptionCapped:d,onPlayback:n,logger:u,spec:g,size:"md"}),(0,E.jsx)(Ee.i,{text:t,dragUri:i,dragLabel:t})]}),(0,E.jsx)(me._,{menu:(0,E.jsx)(ue.X,{uri:i}),children:(0,E.jsx)(Ie.Oz,{images:e,name:t,shape:R.K.ROUNDED_CORNERS})}),(0,E.jsxs)(Ie.sP,{children:[(0,E.jsx)(m.D,{variant:"mestoBold",children:l.ag.get("web-player.audiobooks.audiobook")}),(0,E.jsx)(Ie.xd,{canEdit:!1,onClick:()=>{},children:t}),(0,E.jsx)(Ie.QS,{author:a})]})]})})),Ue="HvVxzh4ZoggYAhgSxSth",Re=i.memo((({price:e})=>e.finalPrice&&e.finalListPrice?0===e.finalPrice.amount&&0===e.finalListPrice.amount?(0,E.jsxs)("div",{className:Ue,children:[(0,E.jsx)(m.D,{variant:"cello",semanticColor:"textBase",children:l.ag.get("audiobook.freePriceDescription")}),(0,E.jsx)(m.D,{variant:"mesto",children:l.ag.get("audiobook.freePriceExplanation")})]}):(0,E.jsxs)("div",{className:Ue,children:[(0,E.jsx)(m.D,{variant:"canon",semanticColor:"textBase",children:e.finalPrice.formattedPrice}),e.finalPrice.amount<e.finalListPrice.amount&&(0,E.jsx)(m.D,{variant:"ballad",semanticColor:"textSubdued",children:l.ag.get("web-player.audiobooks.retailPrice",(0,E.jsx)("span",{style:{textDecoration:"line-through"},children:e.finalListPrice.formattedPrice}))})]}):null));var Ae=a(76883),Be=a(29101);var Fe=a(943);function Te(e){return!e.playability?.playable&&(e.playability?.reason===Fe.WY.PaymentRequired||e.playability?.reason===Fe.WY.Anonymous)}var Me=a(29105),Oe=a(80495),Le=a(36452);const _e=i.memo((function({uri:e,bookUri:t,size:a=ce.q.md,className:o,onClick:s=(()=>{}),isLocked:n=!0}){const[r,l]=(0,le.Z)(t),c=(0,b.o)(),d=(0,i.useCallback)((()=>{c({targetUri:t,intent:"add-to-library",type:"click"}),l(!0)}),[c,t,l]);return(0,E.jsx)(ce.o,{className:o,isFollowing:r,canDownload:!n,onFollow:d,uri:e,size:a,onClick:s})})),ze=i.memo((function(e){return(0,E.jsx)(_e,{...e})}));var We=a(8725),Ge=a(2651),Xe=a(98474),Ve=a(99914);const He="b0Vng72SrQiFroJKXfk2",qe="FfeP3XKSZcAdfviyk8fv",Ke="eWxDd0LanTnTlSl8SOHX",Ye="eAOkseqV13_CAmzuDJpa",Ze="fovofKIYdEIURgIYoKm2",$e="we_1b4qCQBaFPT12eUXp",Je="NXXFrQO7npgPCRuSKaAA",Qe="ekkhhuxKVGAzkEmuh9kE",et="zd6xqobF255bxHFtCmXy",tt=i.memo((function({name:e,duration:t,uri:a,bookUri:s,bookName:n,usePlayContextItem:r,isLocked:c,isPlayable:d,resumePositionMs:u,isFullyPlayed:h,isExplicit:x,is19PlusOnly:j,spec:f,index:v,consumptionCapExplanation:C}){const S=(0,i.useRef)(u),{isPlaying:w,togglePlay:I,isActive:N}=r({uri:a}),D=(0,ie.$P)(),U=(0,be.g)(),R=(0,o.I0)(),A=(0,p.W6)(Xe.vW,{loadingValue:!1}),{position:B,isFullyPlayed:F}=((e,t,a,o)=>{const s=(0,i.useRef)(null),[n,r]=(0,i.useState)(o),[l]=(0,Ve.z)(1e4,(t=>t?.item?.uri===e));return(0,i.useEffect)((()=>{a&&(s.current=l)}),[a,l]),(0,i.useEffect)((()=>{!a&&s.current&&t.milliseconds<=s.current+1e4&&r(!0)}),[a,t.milliseconds]),{position:a?l:null,isFullyPlayed:n}})(a,t,w,h);null!==B&&(S.current=B);const T=(0,Oe._)(a),M=(0,i.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),O=(0,b.o)(),L=(0,i.useCallback)((e=>{if(M(e),C&&!U&&A)return void R((0,We.S3)(C));const t=f.chapterBlockFactory({position:v,uri:a}).playButtonFactory();if(c)O({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),D.logInteraction(t.hitShowPaywall({paywalledItem:a}));else{const e=(0,Ge.aK)({isPlaying:w,isActive:N,spec:t,logger:D,uri:a});I({loggingParams:e})}}),[C,R,v,A,N,U,c,w,D,O,f,M,I,a]),_=(0,i.useCallback)(((e,t)=>{M(e);const i=f.chapterBlockFactory({position:v,uri:a}).downloadButtonFactory();t===pe.mc.ADD?D.logInteraction(i.hitDownload({itemToDownload:a})):t===pe.mc.REMOVE?D.logInteraction(i.hitRemoveDownload({itemToRemoveFromDownloads:a})):t===pe.mc.NO_PERMISSION&&D.logInteraction(i.hitUiReveal())}),[v,D,f,M,a]),z=(0,i.useCallback)((()=>{const e=f.chapterBlockFactory({position:v,uri:a}).secondaryHitUiReveal();D.logInteraction(e)}),[v,D,f,a]),W=(0,i.useCallback)((e=>{M(e);const t=f.chapterBlockFactory({position:v,uri:a}).contextMenuFactory().hitUiReveal();D.logInteraction(t)}),[v,D,f,M,a]),G=!c,X=(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("hr",{className:Ke,"aria-hidden":!0}),(0,E.jsxs)("div",{className:He,onDoubleClick:e=>{O({targetUri:a,intent:"play",type:"double-click"}),L(e)},children:[(0,E.jsx)(m.D,{as:"h2",variant:"balladBold",className:g()(Je,{[qe]:N}),semanticColor:"textBase",children:e}),(0,E.jsxs)("div",{className:Qe,children:[(0,E.jsx)(Z.f,{size:"sm",version:Z.u.secondary,onClick:L,isPlaying:w,ariaPlayLabel:l.ag.get("tracklist.a11y.play",e,n),ariaPauseLabel:l.ag.get("tracklist.a11y.pause",e,n),locked:c,disabled:!d&&!c}),x&&(0,E.jsx)(P.N,{fullText:!0}),j&&(0,E.jsx)(q.X,{size:16}),(0,E.jsx)("div",{className:et,children:(0,E.jsx)(Le.E,{isPlaying:w,fullyPlayed:F,durationMs:t.milliseconds,resumePositionMs:S.current,position:B??void 0})})]}),G?(0,E.jsx)(me.ClickToggleContextMenu,{menu:(0,E.jsx)(k.r,{uri:a,showUri:s,isLocked:c}),children:(0,E.jsx)(y.MoreButton,{className:Ze,size:ce.q.sm,label:l.ag.get("more.label.context",e),onClick:W})}):null,(0,E.jsx)(ze,{uri:a,bookUri:s,className:g()({[$e]:!(0,Me.y)(T)}),onClick:_,size:ce.q.sm,isLocked:c})]})]});return G?(0,E.jsx)(me._,{menu:(0,E.jsx)(k.r,{uri:a,showUri:s,isLocked:c}),onShow:z,children:(0,E.jsx)("div",{className:Ye,children:X})}):(0,E.jsx)("div",{className:Ye,children:X})}));var at=a(73036),it=a(24430),ot=a(56287),st=a(21558),nt=a(88513);const rt="XG_S4BkuyAMohXFLGKU1",lt="NrMNU3Sf4iy2c6JJx7R8",ct="n8V7RFwuVx9PaIT1n_mA",dt="kTtB_Y_yizhUj6SMYY8e",ut="f2XS5sEjEtvk4TdlzHK3",gt="ZXOAeQZMnXPrIByL2_Sl",mt="d9YBRXX3qqxAD43sqNzE",pt="Jvp5er4UpzTljUao_SrR",ht="EQCGoB4MqhFPtwUwp1rh",xt="UTBQUpUwOPb37ou2ULmH",yt="Dnwv7PC1vjXvcwYEfqqf",kt=i.memo((function({name:e,duration:t,uri:a,bookUri:s,bookName:n,usePlayContextItem:r,isLocked:c,isPlayable:d,resumePositionMs:u,isFullyPlayed:m,isExplicit:h,is19PlusOnly:x,spec:j,index:f,consumptionCapExplanation:v}){const C=(0,i.useRef)(u),{isPlaying:S,togglePlay:w,isActive:I}=r({uri:a}),N=(0,ie.$P)(),D=(0,be.g)(),U=(0,o.I0)(),R=(0,p.W6)(Xe.vW,{loadingValue:!1}),A=(0,st.Y)((e=>{if(e?.item?.uri===a){const t=(0,nt.k)(e)??0;return C.current=t,t}return 0})),B=(0,Oe._)(a),F=(0,i.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),T=(0,b.o)(),M=(0,i.useCallback)((e=>{if(F(e),v&&!D&&R)return void U((0,We.S3)(v));const t=j.chapterBlockFactory({position:f,uri:a}).playButtonFactory();if(c)T({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),N.logInteraction(t.hitShowPaywall({paywalledItem:a}));else{const e=(0,Ge.aK)({isPlaying:S,isActive:I,spec:t,logger:N,uri:a});w({loggingParams:e})}}),[v,U,f,R,I,D,c,S,N,T,j,F,w,a]),O=(0,i.useCallback)(((e,t)=>{F(e);const i=j.chapterBlockFactory({position:f,uri:a}).downloadButtonFactory();t===pe.mc.ADD?N.logInteraction(i.hitDownload({itemToDownload:a})):t===pe.mc.REMOVE?N.logInteraction(i.hitRemoveDownload({itemToRemoveFromDownloads:a})):t===pe.mc.NO_PERMISSION&&N.logInteraction(i.hitUiReveal())}),[f,N,j,F,a]),L=(0,i.useCallback)((()=>{const e=j.chapterBlockFactory({position:f,uri:a}).secondaryHitUiReveal();N.logInteraction(e)}),[f,N,j,a]),_=(0,i.useCallback)((e=>{F(e);const t=j.chapterBlockFactory({position:f,uri:a}).contextMenuFactory().hitUiReveal();N.logInteraction(t)}),[f,N,j,F,a]),z=!c,W=(0,E.jsx)(at.g,{className:g()({[lt]:I}),children:e}),G=(0,E.jsxs)("div",{className:mt,children:[c?(0,E.jsx)(ot.g,{}):null,h&&(0,E.jsx)(P.N,{fullText:!0}),x&&(0,E.jsx)(q.X,{size:16}),(0,E.jsx)("div",{className:pt,children:(0,E.jsx)(Le.E,{isPlaying:S,fullyPlayed:m,durationMs:t.milliseconds,resumePositionMs:C.current,position:S?A:void 0})})]}),X=(0,E.jsxs)("div",{className:xt,children:[(0,E.jsxs)("div",{className:yt,children:[(0,E.jsx)(ze,{uri:a,bookUri:s,className:g()({[gt]:!(0,Me.y)(B)}),onClick:O,size:ce.q.xs,isLocked:c}),z?(0,E.jsx)(me.ClickToggleContextMenu,{menu:(0,E.jsx)(k.r,{uri:a,showUri:s,isLocked:c}),children:(0,E.jsx)(y.MoreButton,{className:ut,size:ce.q.xs,label:l.ag.get("more.label.context",e),onClick:_})}):null]}),(0,E.jsx)("div",{className:ht,children:(0,E.jsx)(Z.f,{size:"sm",version:Z.u.secondary,onClick:M,isPlaying:S,ariaPlayLabel:l.ag.get("tracklist.a11y.play",e,n),ariaPauseLabel:l.ag.get("tracklist.a11y.pause",e,n),locked:c,disabled:!d&&!c})})]}),V=(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("hr",{className:ct,"aria-hidden":!0}),(0,E.jsx)(it.w,{id:`chapter-${f}`,title:W,body:G,footer:X,onDoubleClick:e=>{T({targetUri:a,intent:"play",type:"double-click"}),M(e)},className:rt})]});return z?(0,E.jsx)(me._,{menu:(0,E.jsx)(k.r,{uri:a,showUri:s,isLocked:c}),onShow:L,children:(0,E.jsx)("div",{className:dt,children:V})}):(0,E.jsx)("div",{className:dt,children:V})})),bt=({bookUri:e,bookName:t,sampleUri:a,isFinishedUnlockingJourney:o,usePlayContextItem:s,spec:n,consumptionCapExplanation:r})=>{const l=function(e,t){const a=(0,Be.z)();return(0,i.useCallback)((async(i,o)=>a.getBookContents(e,{offset:i,limit:o,doRefreshSubscription:t})),[t,a,e])}(e,o),c=(0,i.useRef)(!1),d=(0,i.useRef)(0),u=(0,p.W6)(Xe.el,{loadingValue:!1}),[g,m]=(0,i.useState)([]),h=(0,i.useCallback)((e=>e?.uri===a),[a]),x=(0,i.useCallback)((e=>(e=>null!==e)(e)&&!h(e)),[h]),y=(0,i.useCallback)((()=>{l&&(c.current||null===d.current||(c.current=!0,l(d.current,50).then((e=>{c.current=!1,d.current=e.nextOffset,e.items.length>0&&m((t=>t.concat(e.items.filter(x))))}))))}),[l,x]);return(0,i.useEffect)((()=>{d.current=0,m([])}),[e]),(0,E.jsx)("ul",{children:(0,E.jsx)(Ae.C,{onReachBottom:y,triggerOnInitialLoad:!0,children:g.map(((a,i)=>{const{name:o,duration:l,uri:c,playability:{playable:d},playedState:{playPositionMilliseconds:g,state:m},isExplicit:p,is19PlusOnly:h}=a;return u?(0,E.jsx)(kt,{name:o,duration:l,uri:c,bookUri:e,bookName:t,usePlayContextItem:s,isLocked:Te(a),isPlayable:d,resumePositionMs:g,isFullyPlayed:m===Fe.sY.Completed,isExplicit:p,is19PlusOnly:h,spec:n,index:i,consumptionCapExplanation:r},c):(0,E.jsx)(tt,{name:o,duration:l,uri:c,bookUri:e,bookName:t,usePlayContextItem:s,isLocked:Te(a),isPlayable:d,resumePositionMs:g,isFullyPlayed:m===Fe.sY.Completed,isExplicit:p,is19PlusOnly:h,spec:n,index:i,consumptionCapExplanation:r},c)}))})})};var jt=a(73355),ft=a(22669),vt=a(7048),Pt=a(65391),Ct=a(69129);const St="QEd1L2SSRW1ol_sQQN6m",wt="ENuWK8u3C9kmadnqkErf",It="i0gSVhns0PjhiUKm4OG1",Nt="jKVb6K0dga3SfW1dp2Pg",Et="MOpV0_YizQER2NksxLju",Dt="vrR8bh9DvivyDfUrh1vD",Ut="_toO3CqMPAPTbny7Rh8R",Rt="Iudw61HRePwOAJpbDRvA",At="GWaz1n1SADn9enzKdi_Z",Bt=i.memo((function({coverArt:e,toggleModal:t,uri:a,isBook:i}){const o=(0,Pt.X)(e,{desiredSize:320}),{spec:s,logger:n}=(0,ie.fU)(ft.createDesktopPodcastRatingEventFactory,{data:{identifier:i?r.Wg.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK:r.Wg.RATINGS_AND_REVIEWS_RATINGS,uri:a}});return(0,E.jsx)(Ct.Z,{contentLabel:"podcast-rating-modal",isOpen:!0,onRequestClose:t,children:(0,E.jsxs)("div",{className:St,children:[(0,E.jsxs)("div",{className:It,children:[(0,E.jsx)(m.D,{as:"h1",variant:"canon",className:Ut,children:l.ag.get("web-player.audiobooks.rating.rateAudiobook")}),(0,E.jsxs)("button",{className:Nt,onClick:()=>{const e=s.closeButtonFactory().hitUiNavigateBack();n.logInteraction(e),t()},children:[(0,E.jsx)(jt.k,{role:"presentation"}),(0,E.jsx)("span",{className:"hidden-visually",children:l.ag.get("web-player.audiobooks.rating.closeModal")})]})]}),(0,E.jsxs)("div",{className:Et,children:[(0,E.jsx)(vt.Ee,{loading:"eager",src:o?.url,className:wt}),(0,E.jsxs)("div",{className:Dt,children:[(0,E.jsx)(m.D,{as:"p",variant:"cello",className:Rt,children:l.ag.get("web-player.audiobooks.rating.wantToRate")}),(0,E.jsx)(m.D,{as:"p",className:At,children:l.ag.get("web-player.audiobooks.rating.goToApp")}),(0,E.jsx)(ye.D,{colorSet:"invertedLight",onClick:()=>{const e=s.okButtonFactory().hitUiNavigateBack();n.logInteraction(e),t()},children:l.ag.get("web-player.audiobooks.rating.ok")})]})]})]})})})),Ft="mmCZ5VczybT9VqKB5wFU",Tt="At_ihDspJfh1yw3Cn2cq",Mt="u3LLJx1KnMchfNCzi6k5",Ot="Yqz1Nv6wj1n3HmXL_qji",Lt="qRqn3JrWLPbGW9k2a63n",_t="HAah1_lK_dHgyyE71I8Z",zt="eiC4nh70nb5UHZBYMgNA",Wt="hl2eRCaYcZ1Jm1bgNYlU",Gt="eYtmwXEvi1UdCevg8WoK",Xt="QOp2aYTYmZHZ6DFFHuYE",Vt=i.memo((function({metadata:e}){const{uri:t,coverArt:a,name:n,htmlDescriptionPlain:d,authorName:u,sample:C,narrators:S,rating:w,isExplicit:I,duration:N,copyrights:R,publishDate:A,price:B,isLocked:F,consumptionCapExplanation:T,signifierText:M}=e,{search:O}=(0,s.TH)(),L=!!new URLSearchParams(O).get("isUnlockingAudiobook"),_=!(!(0,ee.D)(L)||L),z=(0,be.g)(),W=(0,j.Z)(a[0]?.url),G=(0,o.I0)(),[X,V]=(0,i.useState)(!1),H=(0,b.o)(),q=(0,p.W6)(Xe.vW,{loadingValue:!1}),{spec:K,logger:Y}=(0,ie.fU)(h.createDesktopAudiobookEventFactory,{data:{uri:t,identifier:r.Wg.PODCAST_SHOW_AUDIOBOOK}}),{spec:Z,logger:oe}=(0,ie.fU)(h.createDesktopAudiobookEventFactory,{data:{uri:t,identifier:r.Wg.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK}}),{spec:ne,logger:re}=(0,ie.fU)(x.createDesktopLockedAudiobookEventFactory,{data:{uri:t,identifier:r.Wg.PODCAST_SHOW_AUDIOBOOK}}),le=(0,i.useMemo)((()=>K.actionBarFactory()),[K]),ce=(0,i.useMemo)((()=>Z.aboutSectionFactory()),[Z]),de=(0,i.useMemo)((()=>K.chapterListFactory()),[K]);(0,i.useEffect)((()=>{H({type:"view",intent:"audiobook"})}),[H]),(0,i.useEffect)((()=>{F&&re.logImpression(ne.impression())}),[ne,re,F]);const{isPlaying:ue,togglePlay:ge,usePlayContextItem:me,isActive:pe,triggerPlay:he}=(0,te.n)({uri:t},{featureIdentifier:"audiobook"}),{togglePlay:xe,isPlaying:ye,isActive:ke}=(0,te.n)({uri:C?.uri??""},{featureIdentifier:"audiobook"}),je=ue&&!ye,fe=pe&&!ke,ve=(0,i.useCallback)((async()=>{const e=K.actionBarFactory().playButtonFactory();if(T&&!z&&q)return Y.logInteraction(e.hitShowPaywall({paywalledItem:t})),void G((0,We.S3)(T));if(!F||z)if(z)ge();else{const a=(0,Ge.aK)({isPlaying:je,isActive:fe,spec:e,logger:Y,uri:t});fe?ge({loggingParams:a}):he({loggingParams:a})}}),[K,T,z,q,F,Y,t,G,ge,je,fe,he]),Pe=(0,i.useCallback)((()=>{C?.uri&&(H({targetUri:C.uri,intent:ye?"play":"pause",type:"click"}),xe())}),[ye,H,xe,C?.uri]),Ce=(0,i.useCallback)((()=>{const e=ce.ratingButtonFactory().hitUiReveal();oe.logInteraction(e),V((e=>!e))}),[ce,oe]),{ref:Se,breakpoint:Ie}=(0,Q.Db)({[Q.Uo.MEDIUM]:600,[Q.Uo.LARGE]:1024}),Ne=null!=T,Ee=F&&B;return(0,E.jsxs)("section",{ref:Se,className:Ft,children:[(0,E.jsx)(c.$,{children:(0,ae.Od)({showOrAudiobookName:n,type:"Audiobook"})}),(0,E.jsx)(De,{name:n,authorName:u,uri:t,coverArt:a,backgroundColor:W,togglePlay:ve,isPlaying:je,isLocked:F,price:B,isConsumptionCapped:Ne,logger:Y,spec:K.actionBarFactory()}),(0,E.jsx)(we,{name:n,backgroundColor:W,uri:t,togglePlay:ve,isPlaying:je,isLocked:F,isExplicit:I,duration:N,publishDate:A,price:B,isConsumptionCapped:Ne,spec:le}),(0,E.jsxs)("div",{className:g()(Tt,"contentSpacing",{[Mt]:Ie===Q.Uo.LARGE}),children:[(0,E.jsxs)("div",{className:Ot,children:[(0,E.jsxs)("div",{className:Wt,children:[(0,E.jsxs)("div",{className:Gt,children:[I&&(0,E.jsx)(P.N,{fullText:!0}),(0,E.jsxs)("div",{children:[A&&(0,E.jsx)(m.D,{variant:"mesto",className:Xt,children:l.ag.formatDate(A)}),(0,E.jsx)(m.D,{variant:"mesto",children:(0,E.jsx)(U.nL,{durationMs:N})})]})]}),M&&(0,E.jsx)(m.D,{variant:"ballad",as:"p",semanticColor:"textBrightAccent",children:M}),!M&&Ee&&(0,E.jsx)(Re,{price:B})]}),(0,E.jsx)(se,{htmlDescription:d,narrators:S,spec:ce})]}),(0,E.jsxs)("div",{className:Lt,children:[C&&(0,E.jsx)(J,{label:l.ag.get("audiobook.page.sample"),images:C.coverArt||[],title:C.name,duration:C.duration.milliseconds,moreButton:F?null:(0,E.jsx)(f.y,{menu:(0,E.jsx)(k.r,{uri:C.uri,showUri:t,isLocked:F}),children:(0,E.jsx)(y.MoreButton,{})}),onClick:Pe,isPlaying:ye,isActive:ke,size:$.LARGE,contentRating:C.contentRating?.label,isPlayable:C.isPlayable}),(0,E.jsx)("div",{className:_t,children:(0,E.jsx)(D,{rating:w,onClick:Ce})})]}),(0,E.jsxs)("div",{className:zt,children:[(0,E.jsx)(bt,{bookUri:t,bookName:n,sampleUri:C?.uri,isFinishedUnlockingJourney:_,usePlayContextItem:me,spec:de,consumptionCapExplanation:T??void 0},`${t}-${F}`),(0,E.jsx)(v.k,{copyrights:R})]})]}),X&&(0,E.jsx)(Bt,{toggleModal:()=>V(!1),coverArt:a,uri:t,isBook:!0})]})}));var Ht=a(24949),qt=a(72556),Kt=a(96645),Yt=a(59757),Zt=a(55862),$t=a(98367);const Jt=({uri:e,name:t,backgroundColor:a,spec:o})=>{const s=(0,ie.$P)(),n=(0,b.o)(),r=!(0,Se.k)(),[c,d]=(0,le.Z)(e),u=(0,i.useCallback)((()=>{n({targetUri:e,intent:c?"unsave":"save",type:"click"});const t=o.followButtonFactory();s.logInteraction(c?t.hitUnfollow({itemToBeUnfollowed:e}):t.hitFollow({itemToBeFollowed:e})),d(!c)}),[n,e,c,o,s,d]),g=(0,i.useCallback)((()=>{s.logInteraction(o.contextButtonFactory().hitUiReveal())}),[s,o]);return(0,E.jsx)(ne.o,{backgroundColor:a,children:(0,E.jsxs)(ne.F,{children:[(0,E.jsx)(Ce.r,{children:(0,E.jsx)($t.e,{isFollowing:c,onClick:u,disabled:r})},"follow-button"),(0,E.jsx)(f.y,{menu:(0,E.jsx)(Zt.M,{uri:e}),onShow:g,children:(0,E.jsx)(y.MoreButton,{label:l.ag.get("more.label.context",t)})})]})})},Qt=(0,i.lazy)((()=>a.e(386).then(a.bind(a,40386))));function ea(e){return(0,p.W6)(Xe.$f)?(0,E.jsx)(i.Suspense,{fallback:!0,children:(0,E.jsx)(Qt,{...e})}):null}var ta=a(1858),aa=a(95046),ia=a(54904),oa=a(4699),sa=a(84389),na=a(25728),ra=a(36462),la=a(91560),ca=a(76285);const da=(0,i.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),ua=i.memo((function({uri:e,children:t}){return(0,E.jsx)(ca.r,{uri:e,defaultState:[],sortContext:da,localStorageKey:"showFilterParams-v2",children:t})}));var ga=a(79950);const ma={field:ga.ay.PUBLISH_DATE,order:ga.i5.DESC},pa={field:ga.ay.PUBLISH_DATE,order:ga.i5.ASC},ha={episodic:ma,sequential:pa,recent:ma};function xa(){return new Map([[ma,{key:"newest-to-oldest",value:l.ag.get("shows.sort.newest-to-oldest")}],[pa,{key:"oldest-to-newest",value:l.ag.get("shows.sort.oldest-to-newest")}]])}function ya(e){return ha[e]}const ka=(0,i.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowSortProvider")},sortState:ya("recent")}),ba=e=>{const t=xa();return Array.from(t.keys()).some((({field:t})=>t===e?.field))},ja=i.memo((function({uri:e,children:t,defaultSortParam:a}){return(0,E.jsx)(ca.r,{uri:e,defaultState:a,sortContext:ka,localStorageKey:"showSortParam",validator:ba,children:t})})),fa="cJJXVm4gQW6AdfCQRhpX",va="hTRqaN61SDG95erQGMmx",Pa={totalCount:0,nextOffset:0,items:[]},Ca=i.memo((function({showMetadata:e,usePlayContextItem:t}){const{sortState:a}=(0,i.useContext)(ka),{sortState:o}=(0,i.useContext)(da),s=(0,na.ZM)(e.uri,a,o),[n,r]=(0,i.useState)(Pa),l=(0,i.useRef)(!1),c=(0,i.useRef)(0),d=(0,i.useCallback)(((e=!1)=>{if(!s)return;const t=c.current;null!==t&&(l.current||(l.current=!0,s(t,50).then((a=>{r((i=>{const o=e?[]:[...i.items];return o.splice(t,a.items.length,...a.items),c.current=a.nextOffset,{...a,items:o}})),l.current=!1}))))}),[s]);return(0,i.useEffect)((()=>{r(Pa)}),[e.uri]),(0,i.useEffect)((()=>{c.current=0,d(!0)}),[d]),(0,E.jsx)(la.ZP,{value:"track-list",children:(0,E.jsx)(Ae.C,{onReachBottom:d,triggerOnInitialLoad:!0,children:n.items.map(((a,i)=>a&&(0,E.jsxs)("div",{className:va,children:[(0,E.jsx)("hr",{className:fa,"aria-hidden":!0}),(0,E.jsx)(ra.V,{index:i,episode:a,showMetadata:e,usePlayContextItem:t},`${a.uri}/${i}`)]},`${i}${a.uri}`)))})})}));var Sa=a(90633);const wa={field:ga.YG.ISPLAYED,operator:ga.NK.EQUALS,value:!1},Ia={field:ga.YG.STARTEDPLAYING,operator:ga.NK.GREATER_THAN,value:0};const Na="all-episodes",Ea=({onFilter:e})=>{const{sortState:t,setSortState:a}=(0,i.useContext)(da),o=new Map([[wa,{key:"is-played",value:l.ag.get("shows.filter.unplayed")}],[Ia,{key:"started-playing",value:l.ag.get("shows.filter.in-progress")}]]),s=Array.from(o.values());s.unshift({key:Na,value:l.ag.get("mwp.podcast.all.episodes")});const n=Array.from(o.keys()),r=(0,i.useCallback)((t=>{if(t===Na)a([]);else{const e=n.find((e=>o.get(e)?.key===t));e&&a([e])}e()}),[e,a,n,o]);if(!o.size||!n)return null;let c=s[0];const d=Array.from(o.entries()).filter((e=>t?.some((t=>t.field===e[0].field&&t.operator===e[0].operator))));return d.length>0&&(c=d[0][1]),(0,E.jsx)(Sa.A,{options:s,onSelect:e=>r(e),selected:c,variant:"balladBold",semanticColor:"textBase",heading:l.ag.get("drop_down.filter_by")})},Da=({onSort:e})=>{const{sortState:t,setSortState:a}=(0,i.useContext)(ka),o=xa(),s=Array.from(o.values()),n=Array.from(o.keys()),r=(0,i.useCallback)((t=>{const i=n.find((e=>o.get(e)?.key===t));i&&a(i),e()}),[n,e,o,a]);if(!o.size||!t)return null;const c=Array.from(o.keys()).find((e=>e.field===t.field&&e.order===t.order));if(!c)return null;const d=o.get(c);return d?(0,E.jsx)(Sa.A,{options:s,onSelect:e=>r(e),selected:d,heading:l.ag.get("drop_down.sort_by")}):null},Ua="aQMtxnKeiJqZ9XCcDuZ7",Ra="TYB4Y2xQujO7cifhHush",Aa="sSXKiPRvp2AHmwfHoCCS",Ba="YJlizbhw6DBPHT9OYbdj",Fa="klz_XuZpllvTMzpJF1gw",Ta="TfjbWiK8hca4HHEBnonP",Ma="kR0M2WSYVUj4cohADSFM",Oa="ghfuv80I8uW_ymG_jfx9",La="jtfSxoRam9rzTtdXIjzc",_a="fejGrhq7pxGC99cUdyVw",za="T0OjvsNXAJJGd23eBG2m",Wa="Ppm5YkDdE5ktTPwZC1Dw",Ga=({spec:e})=>{const t=(0,ie.$P)(),{canSort:a,canFilter:o}=(0,na.zZ)().capabilities,s=(0,i.useCallback)((()=>{t.logInteraction(e.episodeListFactory().filterButtonFactory().hitFilter())}),[t,e]),n=(0,i.useCallback)((()=>{t.logInteraction(e.episodeListFactory().sortButtonFactory().hitSort())}),[t,e]);return(0,E.jsxs)("div",{className:Ma,children:[o&&(0,E.jsx)("div",{className:La,children:(0,E.jsx)(Ea,{onFilter:s})}),!o&&(0,E.jsx)(m.D,{as:"h3",variant:"canon",semanticColor:"textBase",className:_a,children:l.ag.get("mwp.podcast.all.episodes")}),a&&(0,E.jsx)("div",{className:Oa,children:(0,E.jsx)(Da,{onSort:n})})]})},Xa=e=>{switch(e){case Fe.it.TRAILER:return l.ag.get("podcasts.next-episode.trailer");case Fe.it.UP_NEXT:return l.ag.get("podcasts.next-episode.up-next");case Fe.it.CONTINUE_LISTENING:return l.ag.get("podcasts.next-episode.continue-listening");case Fe.it.FIRST_PUBLISHED:return l.ag.get("podcasts.next-episode.first-published");case Fe.it.LATEST_PUBLISHED:return l.ag.get("podcasts.next-episode.latest-published");default:return}},Va=({breakpoint:e,metadata:t,showId:a,spec:o})=>{const{uri:s,trailer:n,topics:r,description:c,htmlDescription:d}=t,u=(0,ie.$P)(),h=(0,i.useMemo)((()=>o.episodeListFactory()),[o]),x=(0,p.W6)(Xe.Vz),k=(0,b.o)(),j=(0,p.W6)(Xe.Cz),P=(0,be.g)(),{sortState:C}=(0,i.useContext)(ka),{sortState:S}=(0,i.useContext)(da),w=(0,na.zZ)(),{usePlayContextItem:I}=(0,te.n)({uri:s,metadata:{[sa.sb.SORTING_CRITERIA]:w.getPlayerSort(C),[sa.sb.FILTERING_PREDICATE]:w.getPlayerFilter(S)}},{featureIdentifier:"show"}),{isActive:N,isPlaying:D,togglePlay:U}=I({uri:n?.uri||""}),R=(0,i.useCallback)((e=>{k({intent:"expand-description",type:"click"});const t=o.aboutSectionFactory().seeMoreButtonFactory(),a=e?t.hitUiReveal():t.hitUiHide();u.logInteraction(a)}),[u,k,o]),A=(0,i.useCallback)(((e,t)=>{const a=o.aboutSectionFactory().topicFactory(t).hitUiNavigate({destination:t.uri});u.logInteraction(a)}),[u,o]),B=n?{name:n.name,uri:n.uri,audio:{items:n.audio.items.map((e=>({url:e.url})))}}:null,F=(0,ra.e)(t),T=(0,ia.s)(B,F),M=(0,i.useCallback)((()=>{n?.uri&&(P?T():(k({targetUri:n.uri,intent:D?"play":"pause",type:"click"}),U()))}),[T,P,D,k,U,n?.uri]),{ref:O,breakpoint:L}=(0,Q.Db)({[Q.Uo.MEDIUM]:0,[Q.Uo.LARGE]:600}),_=r.length>0,z=c||j&&d,W=z||_;return(0,E.jsxs)("div",{className:g()(Ra,"contentSpacing",{[Aa]:e===Q.Uo.LARGE}),children:[(0,E.jsxs)("div",{className:Ba,children:[W&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(m.D,{as:"h3",variant:"canon",semanticColor:"textBase",className:_a,children:l.ag.get("artist.about")}),z&&(0,E.jsx)(oe.o,{maxLines:4,content:(c||"").trim(),onExpanded:R,htmlContent:j&&d?d:void 0}),_&&(0,E.jsx)(aa.v,{topics:r,onClick:A})]}),(0,E.jsx)(ea,{showId:a,uri:s}),n&&!x&&(0,E.jsx)(oa._,{menu:(0,E.jsx)(ta.k,{uri:n.uri,showUri:s,sharingInfo:n.sharingInfo}),children:(0,E.jsx)(J,{label:l.ag.get("track-trailer"),className:za,images:n.coverArt||[],title:n.name,duration:n.duration.milliseconds,moreButton:(0,E.jsx)(f.y,{menu:(0,E.jsx)(ta.k,{uri:n.uri,sharingInfo:n.sharingInfo,showUri:s}),children:(0,E.jsx)(y.MoreButton,{})}),onClick:M,isPlaying:D,isActive:N,size:$.LARGE,contentRating:n.contentRating?.label})})]}),(0,E.jsx)(Q.ZU.Provider,{value:L,children:(0,E.jsxs)("div",{className:Ta,"data-testid":"show-all-episode-list",ref:O,children:[x&&t.nextBestEpisode&&(0,E.jsx)(ra.V,{showMetadata:t,episode:t.nextBestEpisode.data,usePlayContextItem:I,status:Xa(t.nextBestEpisode.type),variant:"next-best-episode"}),(0,E.jsx)(Ga,{spec:o}),(0,E.jsx)(ie.Nh,{spec:h,children:(0,E.jsx)(Ca,{showMetadata:t,usePlayContextItem:I})})]})}),(0,E.jsx)(v.k,{copyrights:[]})]})},Ha=i.memo(Va);var qa=a(86901);const Ka=({reason:e})=>{const t=(0,p.W6)(Xe.AL),a=function(e){switch(e){case"OTP":return l.ag.get("podcasts.subscriber-indicator.otp");case"SUBSCRIPTION":return l.ag.get("podcasts.subscriber-indicator.subscription");default:return""}}(e);return t&&a?(0,E.jsx)(m.D,{className:Wa,children:a}):null};const Ya=({metadata:e,backgroundColor:t})=>{const{uri:a,coverArt:i,name:o,podcastType:s,publisherName:n,gatedContentAccessReason:r}=e,{isXSOnly:c,isSMOnly:d}=(0,qa.e)(),u=c||d;return(0,E.jsxs)(Ie.gF,{backgroundColor:t,children:[(0,E.jsx)(Ne.W,{children:(0,E.jsx)(Ee.i,{text:o,dragUri:a,dragLabel:o})}),(0,E.jsx)("div",{className:Fa,children:(0,E.jsx)(oa._,{menu:(0,E.jsx)(Zt.M,{uri:a}),children:(0,E.jsx)(Ie.Oe,{loading:"eager",name:o,images:i,placeholderType:"show",shape:Ie.Kc.ROUNDED_CORNERS})})}),(0,E.jsxs)(Ie.sP,{children:[(0,E.jsxs)(m.D,{variant:"mestoBold",children:["SHOW"===s?l.ag.get("type.show"):l.ag.get("type.podcast"),r&&(0,E.jsx)(Ka,{reason:r})]}),(0,E.jsx)(oa._,{menu:(0,E.jsx)(Zt.M,{uri:a}),children:(0,E.jsx)(Ie.xd,{dragUri:a,dragLabel:o,children:(0,E.jsx)("span",{"data-testid":"show-title",children:o})})}),(0,E.jsx)(m.D,{variant:u?"cello":"canon",children:n})]})]})};var Za=a(84937),$a=a(13350);const Ja=({metadata:e,showId:t})=>{const{coverArt:a,name:r,uri:l}=e,{spec:d}=(0,ie.fU)(n.createDesktopPodcastEventFactory,{data:{uri:l}}),u=(0,i.useMemo)((()=>d.actionBarFactory()),[d]),g=(0,j.Z)(a[0]?.url||null),{ref:m,breakpoint:p}=(0,Q.Db)({[Q.Uo.MEDIUM]:600,[Q.Uo.LARGE]:1024}),h=(0,o.v9)(Za.v),x=(0,Yt.l)(h,t),y=(0,s.TH)(),k=(0,Ht.vI)(Kt.k.VideoPodcastShowTitleTag,y),b=x||k;return(0,E.jsxs)("section",{ref:m,className:Ua,children:[(0,E.jsx)(c.$,{children:(0,ae.Od)({showOrAudiobookName:r,type:"Podcast",isVideoPodcastShowTitleTagEnabled:b})}),(0,E.jsx)(Ya,{metadata:e,backgroundColor:g}),(0,E.jsx)(Jt,{uri:l,name:r,backgroundColor:g,spec:u}),(0,E.jsx)(Ha,{breakpoint:p,metadata:e,showId:t,spec:d})]})},Qa=(0,i.memo)((function(){const{showId:e=""}=(0,s.UO)(),t=`spotify:show:${e}`,{data:a,error:o}=(0,qt.l)(t);return!a||o?(0,E.jsx)(d.h,{hasError:!!o,errorMessage:l.ag.get("error.not_found.title.page")}):(0,Fe.l6)(a)?(0,E.jsx)(i.Suspense,{fallback:null,children:(0,E.jsx)($a.C,{pageId:r.Wg.PODCAST_SHOW_AUDIOBOOK,uri:t,children:(0,E.jsx)(Vt,{metadata:a})})}):(0,E.jsx)(i.Suspense,{fallback:null,children:(0,E.jsx)($a.C,{pageId:r.Wg.PODCAST,uri:t,children:(0,E.jsx)(ua,{uri:a.uri,children:(0,E.jsx)(ja,{uri:a.uri,defaultSortParam:ya(a.consumptionOrder),children:(0,E.jsx)(Ja,{showId:e,metadata:a})})})})})}))},61649:(e,t,a)=>{a.d(t,{k:()=>n});var i=a(64641);const o="rTMkDBDp47Eo12ZEQv4U";var s=a(4637);const n=({copyrights:e,courtesyLine:t})=>{const a=(e||[]).map(((e,t)=>{const a=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let o;return o="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,(0,s.jsx)(i.D,{as:"p",variant:"finale",dir:"auto",children:`${o} ${a}`},t)}));return t&&a.unshift((0,s.jsx)(i.D,{as:"p",variant:"finale",dir:"auto",children:t},a.length)),(0,s.jsx)("div",{className:o,children:a})}},24949:(e,t,a)=>{a.d(t,{vI:()=>i});const i=(e,t)=>{const a=t?new URLSearchParams(t.search):void 0;return"1"===a?.get(e)}},96645:(e,t,a)=>{a.d(t,{k:()=>i});let i=function(e){return e.I18nSEO="i18nSEO",e.RTPTrackCredits="rtpv2p2",e.BlendParty="bp",e.BlendPartyV2="bpv2",e.VideoPodcastShowTitleTag="vidpodshow",e.I18nAdditionalPages="i18nap",e.IlrTrackCanonicalTop="ilr-track-canonical-top",e.IlrTrackCanonicalBottom="ilr-track-canonical-bottom",e.IlrTrackOrganicTop="ilr-track-organic-top",e.IlrTrackOrganicBottom="ilr-track-organic-bottom",e}({})}}]);
//# sourceMappingURL=xpui-routes-show.js.map