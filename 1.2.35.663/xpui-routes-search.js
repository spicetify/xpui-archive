"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7125],{92917:(e,t,s)=>{s.d(t,{u:()=>m});var r=s(97500),a=s.n(r),n=s(98678),i=s(54452),o=s(9869),c=s(31853),l=s(3561),u=s(37125),d=s(97249),p=s(13274);const m=({uri:e,src:t,playAriaLabel:s,onClick:r,isPlaying:m,isActive:h,isLocked:y,isEpisode:x,isVideo:f,spec:g})=>{const j=(0,l.W)(),b=(0,o.s)(),R=(0,n.YQ)((t=>{let s;if(j({type:"click",intent:m?"pause":"play"}),g){const t=g.playbackButtonFactory();let r;r=h&&m?t.hitPause({itemToBePaused:e}):h&&!m?t.hitResume({itemToBeResumed:e}):t.hitPlay({itemToBePlayed:e}),s=b.logInteraction(r)}r(t,s)}),i.dG,{leading:!0,trailing:!1});return(0,p.jsxs)("div",{className:d.A.rowImageWithPlay,children:[(0,p.jsx)(c.e,{src:t,isEpisode:x,isVideo:f}),(0,p.jsx)(u.x,{className:a()(d.A.rowPlayPauseButton,d.A.rowImagePlayPauseButton),iconClassName:d.A.rowPlayPauseIcon,onClick:R,isPlaying:m,isLocked:y,playAriaLabel:s})]})}},392:(e,t,s)=>{s.d(t,{r:()=>f});var r=s(79474),a=s(49555),n=s(98891),i=s(68652),o=s(61444),c=s(17122),l=s(22929),u=s(40006);const d="jXeqeqkxEBVeFjA2YydA",p="Dm6yxFDg036looSguh2E",m="bQthUEx0_U98DJkT1saO",h="Op2n2H4o1iY0Xo2wAUH9";var y=s(13274);const x=a.gray30,f=({title:e,imageUrl:t,viewId:s,pageId:a,color:f=x,href:g,index:j,ubiId:b})=>{const R=s&&`/genre/${s}`||g||"#",{spec:C,logger:v}=(0,l.r)(i.createDesktopCategoryCardEventFactory,{data:{position:j,identifier:b}}),A=(0,r.useCallback)((()=>{const e=(0,o.o_)(R)?.toURI();e&&v.logInteraction(C.hitUiNavigate({destination:e}))}),[v,C,R]);return(0,y.jsx)(u.Link,{to:R,pageId:a,className:d,onClick:A,children:(0,y.jsxs)("div",{className:p,style:{backgroundColor:f},children:[t?(0,y.jsx)(c._,{loading:"lazy",src:t,className:h}):null,(0,y.jsx)(n.E,{variant:"titleSmall",className:m,children:e})]})})}},49056:(e,t,s)=>{s.d(t,{K:()=>a});var r=s(61444);function a(e){const t=(0,r.o_)(e,{parseUnknown:!0}),[s,a]=t?.args??[];if(a&&"page"===s)return`/genre/${a}`}},45088:(e,t,s)=>{s.d(t,{PG:()=>a,f8:()=>i,oC:()=>r,s8:()=>n});const r=o(120),a=o(30),n=o(60),i=o(15);function o(e){return 60*e*1e3}},11530:(e,t,s)=>{s.d(t,{RS:()=>a,f0:()=>i,o8:()=>n});var r=s(40360);function a(e){return{url:e.url,width:e.width,height:e.height}}function n(e){if("Episode"===e.__typename){const t=e.podcastV2.data;return"Podcast"!==t.__typename?[]:t.coverArt?.sources.map(a)??[]}return[]}function i(e){switch(e.__typename){case"Artist":return e.visuals.avatarImage?.sources.map(a)??[];case"Album":case"Audiobook":case"Podcast":case"Episode":case"Chapter":return e.coverArt?.sources.map(a)??[];case"Track":return e.albumOfTrack?.coverArt?.sources.map(a)??[];case"Playlist":return e.images.items[0]?.sources.map(a)??[];case"User":return e.avatar?.sources.map(a)??[];case"Merch":return e.image?.sources.map(a)??[];case"ArtistConcerts":{const t=e.mainArtist.data;return"Artist"!==t.__typename?[]:t.visuals.avatarImage?.sources.map(a)??[]}case"BrowseSectionContainer":return e.data?.cardRepresentation?.artwork?.sources.map(a)??[];case"BrowseClientFeature":return e.artwork?.sources.map(a)??e.iconOverlay?.sources.map(a)??[];case"GenericError":case"NotFound":case"RestrictedContent":case"BrowseSpacesHub":case"BrowseExternalHref":return[];default:return(0,r.k)(e),[]}}},93347:(e,t,s)=>{s.r(t),s.d(t,{default:()=>la});var r=s(79474),a=s(9037),n=s(83648),i=s(3074),o=s.n(i),c=s(61115),l=s(49326),u=s(22466),d=s(92980),p=s(918),m=s(67683),h=s(40360),y=s(11530),x=s(49056),f=s(392),g=s(13274);function j(e){const t=(0,y.f0)(e);if(t.length>0)return t[0].url}function b(e,t){switch(e.content.__typename){case"BrowseXlinkResponseWrapper":case"BrowseSectionContainerWrapper":return function(e,t,s){switch(e.__typename){case"BrowseClientFeature":return(0,g.jsx)(f.r,{title:e.title?.transformedLabel??"",pageId:"search",href:e.featureUri,color:e.backgroundColor?.hex,imageUrl:j(e),ubiId:e.featureUri,index:t},e.featureUri);case"BrowseSectionContainer":return e.data?.cardRepresentation?(0,g.jsx)(f.r,{title:e.data.cardRepresentation.title?.transformedLabel??"",pageId:"search",href:(0,x.K)(s),color:e.data.cardRepresentation.backgroundColor?.hex,imageUrl:j(e),ubiId:s,index:t},s):null;case"BrowseSpacesHub":case"GenericError":case"NotFound":case"BrowseExternalHref":return null;default:return(0,h.k)(e),null}}(e.content.data,t,e.uri);case"AlbumResponseWrapper":case"ArtistResponseWrapper":case"EpisodeOrChapterResponseWrapper":case"PlaylistResponseWrapper":case"PodcastOrAudiobookResponseWrapper":case"TrackResponseWrapper":case"UserResponseWrapper":case"ConcertResponseWrapper":case"MerchResponseWrapper":case"ArtistConcertsResponseWrapper":case"NoContent":case"UnknownType":return null;default:return(0,h.k)(e.content),null}}var R=s(32733),C=s(45088),v=s(57108),A=s(2255);const k=new v.l("browseAll","query","cd6fcd0ce9d1849477645646601a6d444597013355467e24066dad2c1dc9b740",null),I=()=>{const{data:e}=((e,t)=>(0,A.I)(k,e,t))({pagePagination:{offset:0,limit:10},sectionPagination:{offset:0,limit:99}},{gcTime:C.oC,staleTime:C.PG});return"BrowseSectionContainer"!==e?.browseStart?.__typename?[]:e.browseStart.sections?.items??[]},w="M7LKuAFiIKaigK0fVguF",E=({browseAllSpec:e})=>{const t=I();return(0,g.jsx)("div",{className:w,children:t.map(((t,s)=>function(e,t,s){if(!e.data?.__typename)return null;switch(e.data.__typename){case"BrowseGridSectionData":return(0,g.jsx)(m.r,{spec:t,children:(0,g.jsx)(R.p,{title:e.data?.title?.transformedLabel??"",index:s,id:e.uri,showAll:!0,children:e.sectionItems.items.map(((e,t)=>b(e,t)))})},e.uri);case"BrowseSingleItemSectionData":case"BrowseGenericSectionData":case"BrowseRelatedSectionData":case"BrowseUnsupportedSectionData":return null;default:return(0,h.k)(e.data),null}}(t,e,s)))})};var S=s(22929),P=s(32051),N=s(30620),_=s(61077);const T=()=>{const{searchHistory:e,clearSearchHistory:t}=(0,_.k)();return 0===e.length?null:(0,g.jsx)(R.p,{index:0,id:"recent-searches",total:e.length,seeAllUri:"spotify:app:recent-searches",title:u.Ru.get("search.title.recent-searches"),children:e.map(((e,s)=>(0,g.jsx)(N.pZ,{index:s,value:"search-history",children:(0,g.jsx)(P.X,{entity:e,index:s,clearSearchHistory:t})},e.uri)))})},U="CCi1L2OQvgdZvxkRHeKE",q=()=>{const{spec:e,UBIFragment:t}=(0,S.r)(p.createDesktopFindEventFactory,{data:{uri:"search:find"}}),{recentSearchesSpec:s,browseAllSpec:a}=(0,r.useMemo)((()=>({recentSearchesSpec:e.recentSearchesFactory(),topGenresSpec:e.topGenresFactory(),browseAllSpec:e.browseAllFactory()})),[e]);return(0,g.jsxs)("div",{className:U,children:[(0,g.jsx)(t,{spec:s,children:(0,g.jsx)(T,{})}),(0,g.jsx)(E,{browseAllSpec:a})]})};var F=s(97500),L=s.n(F),O=s(50067),V=s(87157),B=s(52193),D=s(40006);const H=(0,r.createContext)(null),M=H.Provider;function W(){const e=(0,r.useContext)(H);if(null===e)throw new Error("Trying to use 'SearchContext' without 'SearchProvider'!");return e}var $=s(81125);const G="fVB_YDdnaDlztX7CcWTA",Z="e179_Eg8r7Ub6yjjxctr",K="VIeVCUUETJyYPCDpsBif",J="ZWI7JsjzJaR_G8Hy4W6J",Q=({to:e,title:t,selected:s,onClick:r})=>(0,g.jsx)(D.default,{replace:!0,to:e,tabIndex:-1,onClick:r,className:J,children:(0,g.jsx)(O.v,{selected:s,selectedColorSet:"invertedLight",tabIndex:-1,children:t})}),X=({searchCategories:e,selectedCategory:t,displayChips:s})=>{const{query:r}=W(),{spec:a,logger:n}=(0,S.r)(V.createDesktopSearchChipsEventFactory,{});if(!r||!s)return null;const i=encodeURIComponent(r);return(0,g.jsx)("div",{className:G,children:(0,g.jsx)("div",{className:L()(Z,"contentSpacing"),children:(0,g.jsx)("div",{className:K,children:(0,g.jsxs)(B.F,{children:[e.length>0&&(0,g.jsx)(Q,{to:`spotify:app:search:${i}`,title:u.Ru.get("search.title.all"),selected:void 0===t,onClick:()=>{n.logInteraction(a.chipFactory({identifier:"all",position:0}).hitUiNavigate({destination:`spotify:app:search:${i}`}))}},"all"),e.map(((e,s)=>{const r=$.j7[e]?.()??"";return r||console.warn("Received empty title for category: ",e),(0,g.jsx)(Q,{to:`spotify:app:search:${i}:${e}`,title:r,selected:t===e,onClick:()=>{n.logInteraction(a.chipFactory({identifier:e,position:s+1}).hitUiNavigate({destination:`spotify:app:search:${i}:${e}`}))}},e)}))]})})})})};s(36805),s(4563),s(79606),s(98211),s(24164),s(79499),s(49271);var Y=s(97774),z=s(60341),ee=s(82755),te=s(99049),se=s(42311),re=s(66588);const ae={[te.pb.Podcasts]:["podcasts","podcastAndEpisodes"],[te.pb.Episodes]:["episodes","podcastAndEpisodes"],[te.pb.TopResults]:["topResults","topResults"],[te.pb.Artists]:["artists","artists"],[te.pb.Albums]:["albums","albums"],[te.pb.Playlists]:["playlists","playlists"],[te.pb.Tracks]:["tracks","tracks"],[te.pb.Audiobooks]:["audiobooks","audiobooks"],[te.pb.Genres]:["genres","genres"],[te.pb.Users]:["users","users"]};var ne=s(56607),ie=s(66853),oe=s(3191),ce=s(15893),le=s(77167),ue=s(67333);const de={albums:l.$h.SEARCH_ALBUMS,artists:l.$h.SEARCH_ARTISTS,episodes:l.$h.SEARCH_EPISODES,genres:l.$h.SEARCH_GENRES,playlists:l.$h.SEARCH_PLAYLISTS,podcasts:l.$h.SEARCH_SHOWS,audiobooks:l.$h.SEARCH_AUDIOBOOKS,tracks:l.$h.SEARCH_SONGS,users:l.$h.SEARCH_PROFILES,podcastAndEpisodes:l.$h.SEARCH_PODCASTS_AND_EPISODES,topResults:l.$h.SEARCH};function pe({children:e}){const{query:t="",category:s=""}=(0,n.g)();return(0,g.jsx)(ue.e,{pageId:de[s],entityUri:`spotify:app:search:${t}:${s}`,children:e})}function me({children:e}){const{query:t}=(0,n.g)();return(0,g.jsx)(ue.e,{pageId:l.$h.SEARCH,entityUri:`spotify:app:search:${t}`,children:e})}var he=s(6496),ye=s(65892),xe=s(61444),fe=s(62479),ge=s(60096),je=s(98891),be=s(80637),Re=s(27113),Ce=s(2075);const ve="hngqMWKjlLOEcuxpoHz9",Ae="WjLSNZPxuT0Zuw42kxSM",ke="zFOvsuNQpwehjH2VoiLL",Ie="zeGt0Z2HCYRvd6ziu_t9",we=({forChip:e})=>{const{query:t,serpId:s}=W(),r=!(0,ne.n)(),a=`/search/${t}`,n=(0,xe.Ru)(t).toURI(),{spec:i,logger:o}=(0,S.r)(Re.createDesktopSearchEmptyResultsEventFactory,{data:{uri:n,reason:s}}),c=(0,Ce.t)(i);return(0,g.jsxs)("div",{className:ve,"aria-live":"polite",ref:c,children:[(0,g.jsx)(je.E,{as:"h1",variant:"titleSmall",className:Ae,children:e?u.Ru.get("search.empty-results-title-for-chip",t,e):u.Ru.get("search.empty-results-title",t)}),(0,g.jsx)("p",{className:ke,children:r?u.Ru.get("web-player.search-modal.offline"):u.Ru.get("search.empty-results-text")}),e&&(0,g.jsx)(ge.N_,{to:a,children:(0,g.jsx)(be.$,{colorSet:"invertedLight",className:Ie,onClick:()=>{o.logInteraction(i.seeAllButtonFactory().hitUiNavigate({destination:a}))},children:u.Ru.get("search.see-all")})})]})};var Ee=s(27276);const Se={results:null,isError:!1,isFetchMoreError:!1},Pe=(e,t)=>{const s=(0,Ee.a)(),a=(0,r.useRef)(null),n=(0,r.useRef)(0),[i,o]=(0,r.useState)(Se),c=(0,r.useCallback)((async(r=!1)=>{if(!s())return;r&&(n.current=0,a.current=null);let i=e;if(null!==a.current){if(n.current>=a.current)return;n.current+i>a.current&&(i=a.current-n.current)}try{const e=await t(n.current,i);n.current+=i,a.current=e.totalCount||0,s()&&o((t=>({isError:!1,isFetchMoreError:!1,results:(r||null===t.results?[]:t.results).concat(e.items)})))}catch(e){s()&&o((e=>{const t=null===e.results||r;return{results:r?[]:e.results,isError:t,isFetchMoreError:!t}}))}}),[e,t,s]);return(0,r.useEffect)((()=>{c(!0)}),[c]),{results:i.results,isError:i.isError,fetchData:c,totalCountRef:a}};var Ne=s(76573),_e=s(10468),Te=s(68862),Ue=s(10963),qe=s(40088),Fe=s(9869),Le=s(66458);const Oe="H2PDjUgJNBIH5eWg59M0",Ve="vRlEuZATPhZt2l04RVIw",Be="Adlh7XTc3j3pXM3jGgr8",De=({index:e,item:t})=>{const{episode:s,show:r}=t,{usePlayContextItem:a}=(0,qe.P)({uri:t.episode.uri},{featureIdentifier:"search",referrerIdentifier:"search"});return(0,g.jsxs)("div",{className:Be,children:[(0,g.jsx)(Le.q,{index:e,episode:{...s,requestId:t.requestId},showMetadata:r,usePlayContextItem:a}),(0,g.jsx)("hr",{className:Ve,"aria-hidden":!0})]})},He=({showTitle:e=!0,displayEmptyPageOnEmptyResults:t=!0,displayError:s=!0,enableInfiniteScroll:r=!1,fetchData:a,totalCountRef:n,items:i,isError:o})=>{const{query:c,serpId:l}=W(),u=(0,xe.Ru)(c).toURI(),{ref:d,breakpoint:p}=(0,Ue.x)({[_e.E.MEDIUM]:0,[_e.E.LARGE]:600}),m=(0,Fe.s)(),h=`spotify:app:search:${encodeURIComponent(c)}:${Vt}`,{spec:y,UBIFragment:x}=(0,S.r)(ye.w,{data:{uri:u,reason:l}});return o?s?(0,g.jsx)(he.o,{}):null:0===n.current?t?(0,g.jsx)(x,{spec:y.emptyResultsFactory(),children:(0,g.jsx)(we,{forChip:$.j7.episodes()})}):null:(0,g.jsxs)(Te.o.Provider,{value:p,children:[i&&e&&(0,g.jsx)(fe.U,{title:$.j7.episodes(),seeAllUri:h,onClickTitle:()=>{y&&m.logInteraction(y.episodesListFactory().episodesListHeaderFactory().titleFactory().hitUiNavigate({destination:h}))},onClickSeeAll:()=>{y&&m.logInteraction(y.episodesListFactory().episodesListHeaderFactory().seeAllLinkFactory().hitUiNavigate({destination:h}))},hasMoreElements:!r&&i.length<(n.current||0)}),(0,g.jsx)("div",{ref:d,className:Oe,children:i&&(0,g.jsx)(Ne._,{triggerOnInitialLoad:!1,onReachBottom:()=>{r&&a()},children:i})})]})},Me=e=>{const{query:t,api:s}=W(),{results:a,isError:n,fetchData:i,totalCountRef:o}=Pe(30,(0,r.useCallback)(((e,r)=>s.getFullEpisodes(t,e,r)),[s,t]));return(0,g.jsx)(He,{...e,fetchData:i,totalCountRef:o,items:a?.map(((e,t)=>(0,g.jsx)(De,{item:e,index:t},t))),isError:n})};var We=s(75106);const $e=e=>{const{title:t,category:s,query:r,results:a,onAddToHistory:n,position:i,showSeeAll:o}=e;if(!a)return null;const{items:c,totalCount:l}=a;return c&&0!==c.length?(0,g.jsx)(R.p,{index:i,id:s,total:l||0,title:t,testId:`${s}-search-entity`,seeAllUri:`spotify:app:search:${encodeURIComponent(r)}:${s}`,showSeeAll:o,children:c.map(((e,t)=>(0,g.jsx)(N.pZ,{value:s,index:t,children:(0,g.jsx)(We.Q,{onClick:()=>n(e),entity:e,index:t})},e.uri)))}):null},Ge="pE9ccpPiPFWfTWfDdKT_",Ze=({results:e})=>{const{query:t,serpId:s,onAddToHistory:r}=W(),a=(0,xe.Ru)(t).toURI(),{spec:n,UBIFragment:i}=(0,S.r)(ye.w,{data:{uri:a,reason:s}});return 0===e?.podcasts.totalCount&&0===e?.episodes.totalCount?(0,g.jsx)(i,{spec:n.emptyResultsFactory(),children:(0,g.jsx)(we,{forChip:$.j7.podcastAndEpisodes()})}):(0,g.jsx)(i,{spec:n,children:(0,g.jsxs)("div",{className:Ge,children:[0!==e?.podcasts.totalCount&&(0,g.jsx)("div",{children:(0,g.jsx)($e,{position:0,category:"podcasts",title:$.j7.podcastAndEpisodes(),query:t,results:e?.podcasts,onAddToHistory:r})}),0!==e?.episodes.totalCount&&(0,g.jsx)("div",{children:(0,g.jsx)(Me,{displayEmptyPageOnEmptyResults:!1,displayError:!1})})]})})};var Ke=s(70207);const Je="bCoyoXohuLs0f6urF2PD",Qe="EF2m35WFubo6yUwP04MQ",Xe=({displayChips:e,category:t})=>{const{query:s,api:a,serpId:n,onAddToHistory:i}=W(),o=(0,c.NC)(ie.Jl4)&&"audiobooks"===t,{results:l,isError:u,fetchData:d,totalCountRef:p}=Pe(30,(0,r.useCallback)(((e,r)=>a.getSearchCategoryResults(s,t,!0,o,e,r)),[a,t,o,s])),m=(0,r.useCallback)(((e,t)=>(0,g.jsx)(N.pZ,{value:"card",index:t,children:(0,g.jsx)(We.Q,{entity:e,onClick:()=>i(e),testId:`search-category-card-${t}`,index:t})},`${e.uri}-${t}`)),[i]),h=(0,xe.Ru)(s).toURI(),{spec:y,UBIFragment:x}=(0,S.r)(Ke.b,{data:{uri:h,identifier:t,reason:n}}),f=(0,r.useMemo)((()=>y.cardsFactory()),[y]),j=(0,r.useMemo)((()=>y.emptyResultsFactory()),[y]);return u?(0,g.jsx)(he.o,{}):0===p.current?(0,g.jsx)(x,{spec:j,children:(0,g.jsx)(we,{forChip:$.j7[t]()})}):(0,g.jsx)(x,{spec:f,children:(0,g.jsx)("div",{className:L()(Je,{[Qe]:e}),children:l&&(0,g.jsx)(Ne._,{onReachBottom:d,triggerOnInitialLoad:!1,children:(0,g.jsx)(oe.E,{render:()=>l.map(((e,t)=>m(e,t)))})})})})};var Ye=s(73805),ze=s(48383),et=s(78776),tt=s(70431),st=s(65903),rt=s(20370),at=s(40020),nt=s(94726),it=s(36943),ot=s(1879),ct=s(72078),lt=s(50859),ut=s(85438),dt=s(81980),pt=s(56404),mt=s(48521),ht=s(28304),yt=s(6544),xt=s(6165),ft=s(12157),gt=s(63378),jt=s(98046),bt=s(31853),Rt=s(12010),Ct=s(23556),vt=s(32345),At=s(40393),kt=s(30994),It=s(13709),wt=s(45129),Et=s(75773),St=s(25046),Pt=s(1250),Nt=s(61988),_t=s(97249);const Tt=r.memo((function({uri:e,name:t,duration:s,artists:r,album:a,isExplicit:n,is19PlusOnly:i,isPlayable:o,index:c,imgUrl:l,requestId:d,isLyricsMatch:p,hasAssociatedVideo:m}){const{isActive:h,isPlaying:y,triggerPlay:x,togglePlay:f}=(0,qe.P)({uri:e},{featureIdentifier:"search",referrerIdentifier:"search"}),{spec:j}=(0,S.r)(st.i,{data:{position:c,reason:d??"",uri:e}}),b=(0,ct.T)(e),R=(0,pt.g)(e,o),{badges:C,hasBadges:v}=(0,lt.b)({downloadAvailability:b,isExplicit:n,isMOGEFRestricted:i,hasAssociatedVideo:m}),A=r?.map((e=>e.name)).join(u.Ru.getSeparator())||"",k=(0,dt.c)();return(0,g.jsx)(N.pZ,{value:"row",index:c,children:(0,g.jsx)(rt.h,{menu:(0,g.jsx)(mt.P,{uri:e,albumUri:a?.uri,artists:r,contextUri:e}),children:(0,g.jsxs)(Nt.w,{uri:e,contextUri:e,onTriggerPlay:(e,t)=>{x({loggingParams:t})},isActive:h,index:c,ariaRowIndex:c+1,isPlayable:R,ageRestricted:i,dragMetadata:{name:t,createdBy:A},spec:j,children:[(0,g.jsx)(It.y,{ariaColIndex:0,children:(0,g.jsx)(Ct.$,{uri:e,playAriaLabel:u.Ru.get("tracklist.a11y.play",t,A),onClick:(e,t)=>{f({loggingParams:t})},isPlaying:y,isActive:h,spec:j,children:(0,g.jsx)(At.a,{children:c+1})})}),(0,g.jsxs)(wt.U,{ariaColIndex:1,children:[(0,g.jsx)(bt.e,{src:l}),(0,g.jsxs)(Rt.l,{children:[(0,g.jsx)(ht.R,{enabled:k,uri:e,className:_t.A.rowTitle,children:(0,g.jsx)(Pt.p,{titleText:t,children:t})}),v&&(0,g.jsxs)(gt.P,{children:[C.download&&(0,g.jsx)(nt._,{}),C.explicit&&(0,g.jsx)(it.g,{}),C.nineteen&&(0,g.jsx)(ot.q,{className:_t.A.nineteen,size:16}),C.hasAssociatedVideo&&(0,g.jsx)(yt.l,{})]}),(0,g.jsxs)(St.p,{children:[(0,g.jsx)(ft.l,{artists:r,spec:j}),p&&(0,g.jsx)(at.G,{})]})]})]}),(0,g.jsx)(Et.o,{ariaColIndex:2,children:(0,g.jsx)(xt.g,{uri:a?.uri||"",name:a?.name||"",creatorUri:r?.[0]?.uri,spec:j,children:a?.name})}),(0,g.jsxs)(kt.l,{ariaColIndex:3,children:[(0,g.jsx)(ut.d,{uri:e,spec:j}),(0,g.jsx)(jt.P,{duration:s.milliseconds}),(0,g.jsx)(vt.Y,{menu:(0,g.jsx)(mt.P,{uri:e,albumUri:a?.uri,artists:r,contextUri:e}),label:u.Ru.get("more.label.track",t,A),spec:j})]})]})})})}),((e,t)=>e.uri===t.uri));var Ut=s(52198),qt=s(2884),Ft=s(7697);const Lt="BSIos9yETsaI3yKEqX2P",Ot=({pageSize:e=100})=>{if(e>100)throw new Error("PathFinder does not support page sizes > 100");const t=(0,Ft.A)(),{query:s,api:a,serpId:n}=W(),{results:i,isError:o,fetchData:c,totalCountRef:l}=Pe(e,(0,r.useCallback)(((e,t)=>a.getSearchCategoryResults(s,"tracks",!1,!1,e,t)),[a,s])),d=(0,r.useCallback)(((e,t)=>{const s=(0,tt.g)(e.album?.images,{desiredSize:40});return(0,g.jsx)(Tt,{index:t,uri:(0,et.a)(e),duration:e.duration,name:e.name,album:e.album||void 0,artists:e.artists,isPlayable:e.isPlayable,isExplicit:e.isExplicit,is19PlusOnly:e.is19PlusOnly,imgUrl:s?.url||"",requestId:e.requestId,isLyricsMatch:e.isLyricsMatch,hasAssociatedVideo:e.hasAssociatedVideo},t+e.uri)}),[]),p=(0,r.useMemo)((()=>[qt.$.INDEX,qt.$.TITLE_AND_ARTIST,qt.$.ALBUM,qt.$.DURATION]),[]),m=(0,r.useCallback)((e=>({uri:e.uri})),[]),h=(0,xe.Ru)(s).toURI(),{spec:y,UBIFragment:x}=(0,S.r)(Ye.t,{data:{uri:h,reason:n}}),f=(0,r.useMemo)((()=>y.tracksFactory()),[y]),j=u.Ru.get("search.showing-category-query-songs",s);if(o)return(0,g.jsx)(he.o,{});if(0===l.current)return(0,g.jsx)(x,{spec:y.emptyResultsFactory(),children:(0,g.jsx)(we,{forChip:$.j7.podcastAndEpisodes()})});const b=t?48:ze.uC+48;return(0,g.jsx)(x,{spec:f,children:(0,g.jsx)(N.pZ,{value:"search-results-tracklist",children:(0,g.jsx)("div",{className:Lt,children:i&&(0,g.jsx)(Ne._,{triggerOnInitialLoad:!1,onReachBottom:c,children:(0,g.jsx)(Ut.S4,{ariaLabel:j,hasHeaderRow:!0,columns:p,renderRow:d,resolveItem:m,nrTracks:i.length,headerTop:b,tracks:i,columnPersistenceKey:"search-results-tracklist"},s)})})})})},Vt="episodes",Bt=({results:e,displayChips:t})=>{const{category:s}=W();return s?"podcastAndEpisodes"===s?(0,g.jsx)(Ze,{results:e}):"tracks"===s?(0,g.jsx)(Ot,{}):s===Vt?(0,g.jsx)(Me,{enableInfiniteScroll:!0,showTitle:!1}):(0,g.jsx)(Xe,{displayChips:t,category:s}):(0,g.jsx)(he.o,{})};var Dt=s(95135),Ht=s(90313),Mt=s(54019),Wt=s(25156),$t=s(19319),Gt=s(62328),Zt=s(72734),Kt=s(33959),Jt=s(22061),Qt=s(24887),Xt=s(49865);const Yt="jx1aNzyVYtZXL4IoQBPu",zt="LUFFqrJ0LibaWeKlygOn",es="jxHVSSmC3dlNxM44xhZc",ts="Drdf4TIgw9aCcq7O5kEu",ss="sgTnoOPKkK69S34ZQsqY",rs=e=>{const{checkConcertInCollectionFn:t=Qt.aw,unsaveConcertFn:s=Qt.Jr,saveConcertFn:n=Qt.m9,enqueueSnackbarFn:i=Gt.M8}=e.deps??{},o=(0,xe.o_)(e.uri),[c,l]=(0,r.useState)(),d=(0,a.d4)(Xt.F6),{isLoading:p,data:m}=(0,$t.I)({queryKey:["concertInCollection",{concertUri:e.uri,username:d}],queryFn:async()=>{const s=await t(ce.n.getInstance(),d,e.uri);return s.body?.found[0]??!1},retry:!1,enabled:!!d});if((0,r.useEffect)((()=>{l(m)}),[m]),!o)return null;const h=c?Zt.k:Kt.P,y=c?"textPositive":void 0;return(0,g.jsx)(ge.N_,{to:`/${o.toURLPath()}`,onClick:e.onClick,className:ts,children:(0,g.jsxs)("div",{className:Yt,children:[(0,g.jsxs)("div",{className:zt,children:[(0,g.jsxs)("div",{className:es,children:[(0,g.jsx)(je.E,{as:"div",variant:"marginal",children:e.date.month}),(0,g.jsx)(je.E,{as:"div",variant:"bodySmallBold",children:e.date.day})]}),(0,g.jsxs)("div",{className:ss,children:[(0,g.jsx)(je.E,{children:e.title}),(0,g.jsx)(je.E,{semanticColor:"textSubdued",variant:"bodySmall",children:e.subtitle})]})]}),void 0!==c&&(0,g.jsx)(Jt.H,{semanticColor:y,iconOnly:h,"aria-label":u.Ru.get("concerts_interested_tooltip"),onClick:e=>{e.preventDefault(),e.stopPropagation(),p||(c?(l(!1),i(u.Ru.get("concerts_removed-from-your-saved-events")),s(ce.n.getInstance(),o.id)):(l(!0),i(u.Ru.get("concerts_added-to-your-saved-events")),n(ce.n.getInstance(),o.id)))}})]})})};var as=s(77503);const ns="st3DcpRJr1U7jW1lcMrX",is="JrTn_oiV2y5AZyFYofv7",os="EBVuRwwMkh4qeqOTIj2j",cs="jvydxsAWcJTAmPWoevdN",ls=e=>{const t=(0,xe.o_)(e.uri);return t?(0,g.jsx)(ge.N_,{to:`/artist/${t.id}/concerts`,onClick:e.onClick,className:cs,children:(0,g.jsxs)("div",{className:ns,children:[(0,g.jsx)("div",{className:is,children:(0,g.jsx)(as.T,{className:os})}),e.children]})}):null},us="GnFcfI0qJZYx5zkOugKJ",ds="B_ow1wbs2_lZdMWmHVXM",ps="hW0elHXQkN4JexepEAC3",ms="lsu4FCOwUyWDlaoN11sN",hs="VjhgkqpvaOlhxjckke0x",ys="buzy9vwjx4Yp7Fh7vcYF",xs=({uri:e,date:t,title:s,subtitle:r,spec:a})=>{const n=new Date(t),i=u.Ru.formatDate(n,{weekday:"short"}),o=u.Ru.formatDate(n,{hour:"numeric",minute:"numeric"}),c=u.Ru.formatDate(n,{day:"numeric"}),l=u.Ru.formatDate(n,{month:"short"});return(0,g.jsx)(rs,{uri:e,title:s,subtitle:u.Ru.get("search.concert.event",i,o,r),date:{day:c,month:l},spec:a})},fs=({artistUri:e})=>{const{spec:t}=(0,S.r)(Wt._,{data:{uri:e??""}}),s=(0,Fe.s)(),a=(0,Ce.t)(t),n=(0,r.useMemo)((()=>t.onTourShelfFactory({uri:e??""})),[e,t]);return(0,g.jsx)("div",{ref:a,children:(0,g.jsx)(ls,{uri:e??"",onClick:()=>{s.logInteraction(n.hitUiNavigate({destination:`${e}:concerts`}))},children:u.Ru.get("search.concerts.see-all")})})},gs=({artistUri:e,concert:t})=>(0,g.jsxs)("section",{className:L()(hs),children:[(0,g.jsx)("div",{className:us,children:(0,g.jsx)("div",{className:ds,children:(0,g.jsx)("div",{className:ps,children:(0,g.jsx)(je.E,{as:"h2",variant:"titleSmall",className:ms,children:u.Ru.get("search.title.concerts")})})})}),(0,g.jsx)("div",{className:ys,children:t?(0,g.jsx)(xs,{...t}):(0,g.jsx)(fs,{artistUri:e})})]});var js=s(55559),bs=s(92917);const Rs=r.memo((function({uri:e,name:t,duration:s,album:r,artists:a,index:n,imgUrl:i,isPlayable:o,isExplicit:c,is19PlusOnly:l,requestId:d,isLyricsMatch:p,hasAssociatedVideo:m}){const{isActive:h,isPlaying:y,triggerPlay:x,togglePlay:f}=(0,qe.P)({uri:e},{featureIdentifier:"search",referrerIdentifier:"search"}),{spec:j}=(0,S.r)(st.i,{data:{position:n,reason:d??"",uri:e}}),b=(0,ct.T)(e),R=(0,pt.g)(e,o),{badges:C,hasBadges:v}=(0,lt.b)({downloadAvailability:b,isExplicit:c,isMOGEFRestricted:l,hasAssociatedVideo:m}),A=(a||[]).map((e=>e.name)).join(u.Ru.getSeparator()),k=(0,dt.c)();return(0,g.jsx)(N.pZ,{value:"row",index:n,children:(0,g.jsx)(rt.h,{menu:(0,g.jsx)(mt.P,{uri:e,artists:a,contextUri:e,albumUri:r?.uri}),children:(0,g.jsxs)(Nt.w,{uri:e,contextUri:e,index:n,ariaRowIndex:n,onTriggerPlay:(e,t)=>{x({loggingParams:t})},isActive:h,isPlayable:R,ageRestricted:l,dragMetadata:{name:t,createdBy:A},spec:j,children:[(0,g.jsxs)(wt.U,{ariaColIndex:0,children:[(0,g.jsx)(bs.u,{uri:e,src:i,onClick:(e,t)=>{f({loggingParams:t})},isLocked:!1,isPlaying:y,isActive:h,playAriaLabel:u.Ru.get("tracklist.a11y.play",t,A),spec:j}),(0,g.jsxs)(Rt.l,{children:[(0,g.jsx)(ht.R,{enabled:k,uri:e,className:_t.A.rowTitle,children:(0,g.jsx)(Pt.p,{titleText:t,children:t})}),v&&(0,g.jsxs)(gt.P,{children:[C.download&&(0,g.jsx)(nt._,{}),C.explicit&&(0,g.jsx)(it.g,{}),C.nineteen&&(0,g.jsx)(ot.q,{className:_t.A.nineteen,size:16}),C.hasAssociatedVideo&&(0,g.jsx)(yt.l,{})]}),(0,g.jsxs)(St.p,{children:[(0,g.jsx)(ft.l,{artists:a,spec:j}),p&&(0,g.jsx)(at.G,{})]})]})]}),(0,g.jsxs)(kt.l,{ariaColIndex:1,children:[(0,g.jsx)(ut.d,{uri:e,spec:j}),(0,g.jsx)(jt.P,{duration:s.milliseconds}),(0,g.jsx)(vt.Y,{menu:(0,g.jsx)(mt.P,{uri:e,artists:a,contextUri:e,albumUri:r?.uri}),label:u.Ru.get("more.label.track",t,A),spec:j})]})]})})})}),((e,t)=>e.uri===t.uri&&e.index===t.index)),Cs=r.memo((function({tracks:e,query:t}){const s=(0,c.NC)(ie.LX5),a=(0,r.useCallback)(((e,t)=>{const r=(0,tt.g)(e.album?.images,{desiredSize:40});return(0,g.jsx)(Rs,{uri:(0,et.a)(e),duration:e.duration,name:e.name,album:e.album||void 0,artists:e.artists,isPlayable:e.isPlayable,isExplicit:e.isExplicit,is19PlusOnly:e.is19PlusOnly,index:t,imgUrl:r?.url||"",requestId:e.requestId,isLyricsMatch:e.isLyricsMatch,hasAssociatedVideo:e.hasAssociatedVideo&&s},e.uri)}),[s]),n=(0,r.useMemo)((()=>[qt.$.TITLE_AND_ARTIST,qt.$.DURATION]),[]),i=(0,r.useCallback)((e=>({uri:e.uri})),[]);return e&&(0,g.jsx)(N.pZ,{value:"search-results-tracklist",children:(0,g.jsx)(Ut.S4,{ariaLabel:u.Ru.get("search.a11y.songs-search-results"),renderRow:a,rowPlaceholder:js.qq,nrTracks:Math.min(e.length,4),tracks:e,resolveItem:i,columns:n},t)})}),((e,t)=>e.tracks===t.tracks));var vs=s(87238);const As="rP1oFnzzvss0GV6VPgGG",ks="XQakH0M0GDc6g6JKeyds",Is="yGcWcNiO6uXCw8TsaZGG",ws="wcLbUjCu5V18bwS2tqcg",Es="PW9eULMYYH14XQgoJ0ui",Ss="VL6wjp4Br_D3FEWrUGGR",Ps="QVIrLvegL13F9cEdMqfT",Ns="Lj3brgOJmjcq6MQ22XKq",_s=({tracks:e,query:t,className:s,showSeeAll:a=!0,spec:n})=>{const i=(0,Fe.s)(),o=(0,r.useCallback)((()=>(0,g.jsx)("div",{className:Ns,children:(0,g.jsx)(r.Suspense,{fallback:null,children:(0,g.jsx)(Cs,{tracks:e.items,query:t})})})),[t,e]),c=`spotify:app:search:${encodeURIComponent(t)}:tracks`,l=(0,r.useCallback)((()=>{const e=n.headerFactory().titleFactory().hitUiNavigate({destination:c});i.logInteraction(e)}),[i,n,c]),d=(0,r.useCallback)((()=>{const e=n.headerFactory().seeAllFactory().hitUiNavigate({destination:c});i.logInteraction(e)}),[i,n,c]);return e.items.length?(0,g.jsxs)("section",{className:L()(Ps,s),"aria-label":u.Ru.get("search.title.tracks"),"data-testid":"search-tracks-result",children:[(0,g.jsx)("div",{className:As,children:e.items.length>3?(0,g.jsxs)("div",{className:L()(ks,Is,ws),children:[(0,g.jsx)("div",{className:Es,children:(0,g.jsx)(je.E,{as:"h2",variant:"titleSmall",children:a?(0,g.jsx)(D.Link,{to:c,className:Ss,onClick:l,children:u.Ru.get("search.title.tracks")}):(0,g.jsx)("span",{className:Ss,children:u.Ru.get("search.title.tracks")})})}),a&&(0,g.jsx)(vs.SeeAll,{link:c,onClick:d})]}):(0,g.jsx)(je.E,{as:"h2",variant:"titleSmall",className:Ss,children:u.Ru.get("search.title.tracks")})}),(0,g.jsx)(m.r,{spec:n,children:(0,g.jsx)(oe.E,{render:o})})]}):null},Ts=({topRecommendations:e,query:t,className:s,onAddToHistory:r,position:a,showSeeAll:n})=>{const i=e.totalCount||0;return(0,g.jsx)(R.p,{index:a,id:"top-recommendations",className:s,total:i,title:u.Ru.get("artist-page.featuring",e.artistName),seeAllUri:`spotify:app:search:${encodeURIComponent(t)}:topRecommendations`,showSeeAll:n,children:e.items.map(((e,t)=>(0,g.jsx)(N.pZ,{index:t,value:"top-recommendations",children:(0,g.jsx)(We.Q,{onClick:()=>r(e),entity:e,index:t})},e.uri)))})};var Us=s(46116);const qs="iGyMsGo7FgYQQThBj2y9",Fs="eITFAR9yPwhjL_2gxB09",Ls="nGARy02O1AklvHT7OBLA",Os="EFHPppToKFxfm6SRhL6K",Vs="EbZrO5qZMclA_AaI3NV8",Bs="rjgEnbv42_EUDbaiZnA2",Ds="FTRmZyHUkeVY_X3RawUc",Hs="Tx_CKMgRE8CpW5vLdpAe",Ms=({topResults:e,onAddToHistory:t})=>{const[s]=e.items;return s&&(0,g.jsx)(Us.$,{total:1,className:qs,title:u.Ru.get("search.title.top-result"),withEncoreCards:!1,children:[(0,g.jsx)("div",{"aria-live":"polite","data-testid":"top-result-card",className:Fs,children:(0,g.jsx)(N.pZ,{value:"top-result-card",children:(0,g.jsx)(We.Q,{isHero:!0,index:0,onClick:()=>t(s),entity:s})})},"top-result-item")]})},Ws=({results:e})=>{const{query:t,onAddToHistory:s,serpId:a}=W(),n=(0,xe.Ru)(t).toURI(),{spec:i,UBIFragment:o}=(0,S.r)(Mt.P,{data:{uri:n,reason:a}}),c=e.topResults.items.length>0,l=e.tracks.items.length>0,u=e.topRecommendations.items.length>0,[d]=e.topResults.items??[],p=(m=d,m?.type===se.c.ARTIST&&d.hasConcerts);var m;const h=(0,r.useMemo)((()=>({topResult:i.topResultFactory(),trackList:i.trackListFactory(),shelves:i.shelvesFactory()})),[i]);return(0,g.jsx)(oe.E,{className:Ls,rowGap:Ht.WG,colGap:Ht.CJ,testId:"search-results",render:({columnCount:r})=>{let a,n;return c?a=r>3?Vs:Bs:u&&(r>5&&l?(a=Os,n=Ds):(a=Bs,n=Hs)),(0,g.jsxs)(N.pZ,{value:"search-results",children:[c&&(0,g.jsx)(o,{spec:h.topResult,children:(0,g.jsx)(Ms,{topResults:e.topResults,onAddToHistory:s})}),(0,g.jsxs)("section",{className:a,children:[p&&(0,g.jsx)(gs,{artistUri:d.uri}),l&&(0,g.jsx)(_s,{spec:h.trackList,query:t,tracks:p?{totalCount:3,items:e.tracks.items.slice(0,3)}:e.tracks,onAddToHistory:s,showSeeAll:!1})]}),u&&(0,g.jsx)(o,{spec:h.shelves,children:(0,g.jsx)(Ts,{position:0,query:t,className:n,topRecommendations:e.topRecommendations,onAddToHistory:s,showSeeAll:!1})}),$.ud.map(((r,a)=>(0,g.jsx)(o,{spec:h.shelves,children:(0,g.jsx)($e,{position:a+1,category:r,title:$.j7[r](),query:t,results:e[r],onAddToHistory:s,showSeeAll:!1})},`search-shelf-${r}`)))]})}})},$s=({results:e,hasResults:t})=>{const{query:s,serpId:r}=W(),a=(0,xe.Ru)(s).toURI(),n=!(0,ne.n)(),{spec:i,UBIFragment:o}=(0,S.r)(Mt.P,{data:{uri:a,reason:r}});return n?(0,g.jsx)(we,{}):e?e&&!t?(0,g.jsx)(o,{spec:i.emptyResultsFactory(),children:(0,g.jsx)(we,{})}):(0,g.jsx)(Ws,{results:e}):null};var Gs=s(3334),Zs=s(63963),Ks=s(14137),Js=s(19224),Qs=s(27707);const Xs=(e,t)=>{const s="object"==typeof e?.requestIds?e?.requestIds:void 0,r=s?.[t],a="object"==typeof r?r:void 0;return"string"==typeof a?.["search-api"]?a?.["search-api"]:void 0},Ys=e=>Xs(e,"/searchV2"),zs=e=>Xs(e,"/searchV2/topResults"),er=new v.l("searchFullEpisodes","query","22e377f7b7c40e7ee0aa57dcb6d27120e524bb7dc14271101abed22aded60f8e",null);var tr=s(53459),sr=s(55859),rr=s(74321),ar=s(19195),nr=s(68998),ir=s(12256),or=s(98961);function cr(e){return e.map((e=>e.url?{url:e.url,width:Number(e.width)||56,height:Number(e.height)||56}:e))}const lr={type:se.c.SHOW,uri:"",name:"",publisher:"",images:[],mediaType:or.Q.UNKNOWN};function ur(e,t){return{items:dr(e?.items||[],t),totalCount:e?.totalCount||0}}function dr(e,t){return e.map((e=>pr(e,t))).filter(sr.P)}function pr(e,t){if("Episode"!==e.data?.__typename)return null;const s=e.data,r=s.podcastV2.data;let a=lr;return"Podcast"===r.__typename&&(a={type:se.c.SHOW,uri:r.uri,name:r.name,publisher:r.publisher?.name||"",mediaType:(0,ir.w)(r.mediaType),images:cr(r.coverArt?.sources||[])}),{type:se.c.EPISODE,name:s.name,images:cr(s.coverArt?.sources||[]),uri:s.uri,duration:{milliseconds:s.duration.totalMilliseconds},isExplicit:s.contentRating?.label===te.x7.Explicit,release:(0,ar.mp)(s.releaseDate),description:s.description||"",timeLeft:{milliseconds:s.playedState.state===te._w.Completed?0:s.duration.totalMilliseconds-s.playedState.playPositionMilliseconds},is19PlusOnly:s.contentRating?.label===te.x7.NineteenPlus,show:a,requestId:t,color:(0,rr.m)(s.coverArt?.extractedColors),mediaType:s.mediaTypes??[],podcastSubscription:(0,nr.Wx)(s.restrictions,s.playability)}}const mr={...lr,description:"",htmlDescription:"",coverArt:[],trailer:null,topics:[],podcastType:"UNKNOWN",showTypes:[],publisherName:"",consumptionOrder:"recent",nextBestEpisode:void 0,gatedContentAccessReason:void 0,isLocked:!1};function hr(e,t){return e.map((e=>function(e,t){if("Episode"!==e.data?.__typename)return null;let s=mr;"Podcast"===e.data.podcastV2.data.__typename&&(s=(0,tr._v)(e.data.podcastV2.data));return{requestId:t,episode:(0,tr.S)(e.data),show:s}}(e,t))).filter(sr.P)}async function yr(e,t){const s=await e(er,t),r=s?.data?.searchV2?.episodes;return r?function(e,t){return{items:hr(e?.items||[],t),totalCount:e?.totalCount||0}}(r,Ys(s?.extensions)):null}const xr=new v.l("searchDesktop","query","339dfbacfc823a4b720b2c42dda51cc5b302966652b823958a6bdddbe914fa41",null);function fr(e,t){if("PreRelease"!==e.data?.__typename)return null;const s=e.data.preReleaseContent;if(!s)return null;const r=(0,ar.mp)(e.data.releaseDate),a=s.artists.items.map((e=>"Artist"===e.data.__typename?{type:se.c.ARTIST,name:e.data.profile.name,uri:e.data.uri}:null)).filter(sr.P);return{type:se.c.PRE_RELEASE_ALBUM,name:s.name||"",uri:e.data.uri,images:cr(s.coverArt?.sources||[]),release:r,releaseTimezone:e.data.timezone,artists:a,color:(0,rr.m)(s.coverArt?.extractedColors),requestId:t}}function gr(e,t){return{items:(e?.items||[]).map((e=>{const{__typename:s}=e;switch(s){case"AlbumResponseWrapper":return jr(e,t);case"PreReleaseResponseWrapper":return fr(e,t);case"UnknownTypeWrapper":return null;default:return(0,h.k)(s),null}})).filter(sr.P),totalCount:e?.totalCount||0}}function jr(e,t){if("Album"!==e.data.__typename)return null;const s=e.data;return{type:se.c.ALBUM,name:s.name,uri:s.uri,images:cr(s.coverArt?.sources||[]),artists:s.artists.items.map((e=>({type:se.c.ARTIST,name:e.profile.name,uri:e.uri}))),year:s.date?.year,requestId:t,color:(0,rr.m)(e.data.coverArt?.extractedColors)}}const br=new v.l("searchAlbums","query","4ddf4d062c3c268954bb113ca2a24c6440e8c832170185388a087ca8608c727c",null);function Rr(e,t){return{items:Cr(e?.items||[],t),totalCount:e?.totalCount||0}}function Cr(e,t){return e.map((e=>vr(e,t))).filter(sr.P)}function vr(e,t){if("Artist"!==e.data?.__typename)return null;const s=e.data;return{type:se.c.ARTIST,name:s.profile.name,images:cr(s.visuals?.avatarImage?.sources||[]),uri:s.uri,verified:s.profile.verified||!1,requestId:t,hasConcerts:s.hasConcerts??!1,color:(0,rr.m)(s.visuals.avatarImage?.extractedColors)}}const Ar=new v.l("searchArtists","query","79a2bd8dbfa6772d9063df2b59bc04120f2805214a3a8bf07a335fc39150f837",null);function kr(e,t){return{items:Ir(e?.items||[],t),totalCount:e?.totalCount}}function Ir(e,t){return e.map((e=>wr(e,t))).filter(sr.P)}function wr(e,t){if("Audiobook"!==e.data?.__typename)return null;const s=e.data;let r=null;return s.isPreRelease&&s.preReleaseEndDateTime?r=new Date(s.preReleaseEndDateTime?.isoString):s.publishDate&&(r=new Date(s.publishDate.isoString)),{type:se.c.AUDIOBOOK,uri:s.uri,name:s.name,images:cr(s.coverArt?.sources||[]),authorName:s.authors?.[0]?.name??"",topics:s.topics.items||[],publishDate:r,requestId:t,color:(0,rr.m)(s.coverArt?.extractedColors),signifierText:s.accessInfo?.signifier?.text??void 0,isPreRelease:!!s.isPreRelease}}const Er=new v.l("searchAudiobooks","query","82ec16373818a73b4d7323c076e4f5d550ec3b0e5e2650d4715ca011dfa775fe",null);const Sr=new v.l("searchEpisodes","query","6c94e7db591c68ff6244234e1b2378b3eb6a1f5c1999b711a7bd12b9708f6322",null);function Pr(e,t){return{items:Nr(e?.items||[],t),totalCount:e?.totalCount||0}}function Nr(e,t){return e.map((e=>_r(e,t))).filter(sr.P)}function _r(e,t){if("Genre"!==e.data?.__typename)return null;const s=e.data,r=(0,xe.o_)(s.uri);return{type:se.c.GENRE,name:s.name,uri:r?s.uri:`spotify:genre:${s.uri}`,images:cr(s.image?.sources||[]),requestId:t,color:(0,rr.m)(s.image?.extractedColors)}}const Tr=new v.l("searchGenres","query","9e1c0e056c46239dd1956ea915b988913c87c04ce3dadccdb537774490266f46",null);const Ur={type:se.c.USER,uri:"",displayName:"",username:"",images:[]};function qr(e,t){return{items:Fr(e?.items||[],t),totalCount:e?.totalCount||0}}function Fr(e,t){return e.map((e=>Lr(e,t))).filter(sr.P)}function Lr(e,t){if("Playlist"!==e.data?.__typename)return null;const s=e.data;let r=Ur;if("User"===s.ownerV2?.data.__typename){const e=s.ownerV2?.data;r={type:se.c.USER,uri:e.uri||"",displayName:e.name||"",username:e.username||"",images:cr(e.avatar?.sources||[])}}return{type:se.c.PLAYLIST,uri:s.uri,name:s.name,images:cr(s.images?.items.flatMap((e=>e.sources))||[]),owner:r,requestId:t,formatListData:{type:s.format??"",attributes:(a=s.attributes??[],a.reduce(((e,t)=>(e[t.key]=t.value,e)),{}))},color:(0,rr.m)(s.images.items[0]?.extractedColors)};var a}const Or=new v.l("searchPlaylists","query","fc3a690182167dbad20ac7a03f842b97be4e9737710600874cb903f30112ad58",null);function Vr(e,t){return{items:Br(e?.items||[],t),totalCount:e?.totalCount||0}}function Br(e,t){return e.map((e=>Dr(e,t))).filter(sr.P)}function Dr(e,t){if("Podcast"!==e.data?.__typename)return null;const s=e.data;return{type:se.c.SHOW,uri:s.uri,name:s.name,images:cr(s.coverArt?.sources||[]),publisher:s.publisher?.name||"",topics:s.topics.items||[],requestId:t,color:(0,rr.m)(s.coverArt?.extractedColors)}}const Hr=new v.l("searchPodcasts","query","cbd33edc7a612454640d753caff6fb1074a7868843612d257dcef5e71e837dd9",null);var Mr=s(24014);function Wr(e,t){return{items:$r(e,t),totalCount:e?.totalCount||0}}function $r(e,t){return e?.items.map((({item:e,matchedFields:s})=>Gr(e,s,t))).filter(sr.P)||[]}function Gr(e,t,s){if("Track"!==e.data?.__typename)return null;const r=e.data,a=r.albumOfTrack,n=!!r.associations&&r.associations.associatedVideos.totalCount>0;return{type:se.c.TRACK,uri:r.uri,name:r.name,isPlayable:r.playability.playable,album:{type:se.c.ALBUM,uri:a?.uri||"",name:a?.name||"",images:cr(a?.coverArt?.sources||[])},artists:r.artists.items.map((e=>({type:se.c.ARTIST,name:e.profile.name,uri:e.uri}))),duration:{milliseconds:r.duration.totalMilliseconds},hasAssociatedVideo:n,isExplicit:"EXPLICIT"===r.contentRating?.label,is19PlusOnly:"NINETEEN_PLUS"===r.contentRating?.label,requestId:s,isLyricsMatch:!!t?.includes(te.tC.Lyrics),color:(0,rr.m)(a?.coverArt?.extractedColors)}}const Zr=new v.l("searchTracks","query","875aaad13da3b8cebc0951584343999525b242d3a6a45caf33423bbf6f027af3",null);function Kr(e,t){return{items:Jr(e?.items||[],t),totalCount:e?.totalCount||0}}function Jr(e,t){return e.map((e=>Qr(e,t))).filter(sr.P)}function Qr(e,t){if("User"!==e.data?.__typename)return null;const s=e.data;return{type:se.c.USER,uri:s.uri,name:s.displayName||s.username,images:cr(s.avatar?.sources??[]),requestId:t,color:(0,rr.m)(s.avatar?.extractedColors)}}const Xr=new v.l("searchUsers","query","d3f7547835dc86a4fdf3997e0f79314e7580eaf4aaf2f4cb1e71e189c5dfcb1f",null);function Yr(e,t){const s=e?.itemsV2??[],r=s.map((({item:e,matchedFields:s})=>{const{__typename:r}=e;switch(r){case"AlbumResponseWrapper":return jr(e,t);case"ArtistResponseWrapper":return vr(e,t);case"AudiobookResponseWrapper":return wr(e,t);case"EpisodeResponseWrapper":return pr(e,t);case"GenreResponseWrapper":return _r(e,t);case"PlaylistResponseWrapper":return Lr(e,t);case"PodcastResponseWrapper":return Dr(e,t);case"TrackResponseWrapper":return Gr(e,s,t);case"UserResponseWrapper":return Qr(e,t);case"PreReleaseResponseWrapper":return fr(e,t);case"UnknownTypeWrapper":return null;default:return(0,h.k)(r),null}})).filter(sr.P);return{totalCount:s.length,items:r}}function zr(e,t){const s=e?.featured||[];return{artistName:s.length?ea(e):"",items:s?.map((e=>Lr(e,t))).filter(sr.P)||[],totalCount:s.length||0}}function ea(e){const t=(0,Mr.no)(e,"itemsV2",[]);try{const e=(0,Mr.Jt)(t.map((({item:e})=>e)).filter(Boolean),"0.data");return e?.profile?.name||""}catch{return""}}const ta=new v.l("searchTopResultsOnly","query","17b0165c6bfa477d67f22bf6dfc31139e6ef4412d63f7f9ff32871cc906e266c",null);const sa={items:[],totalCount:0},ra={albums:{items:[],totalCount:0},artists:{items:[],totalCount:0},episodes:{items:[],totalCount:0},genres:{items:[],totalCount:0},playlists:{items:[],totalCount:0},podcasts:{items:[],totalCount:0},audiobooks:{items:[],totalCount:0},topResults:{items:[]},tracks:{items:[],totalCount:0},users:{items:[],totalCount:0},topRecommendations:{artistName:"",items:[],totalCount:0},chipOrder:{items:[]}},aa={albums:async function(e,t){const s=await e(br,t),r=s?.data?.searchV2?.albumsV2;return r?gr(r,Ys(s?.extensions)):null},artists:async function(e,t){const s=await e(Ar,t),r=s?.data?.searchV2?.artists;return r?Rr(r,Ys(s?.extensions)):null},episodes:async function(e,t){const s=await e(Sr,t),r=s?.data?.searchV2?.episodes;return r?ur(r,Ys(s?.extensions)):null},genres:async function(e,t){const s=await e(Tr,t),r=s?.data?.searchV2?.genres;return r?Pr(r,Ys(s?.extensions)):null},playlists:async function(e,t){const s=await e(Or,t),r=s?.data?.searchV2?.playlists;return r?qr(r,Ys(s?.extensions)):null},podcasts:async function(e,t){const s=await e(Hr,t),r=s?.data?.searchV2?.podcasts;return r?Vr(r,Ys(s?.extensions)):null},audiobooks:async function(e,t){const s=await e(Er,t),r=s?.data?.searchV2?.audiobooks;return r?kr(r,Ys(s?.extensions)):null},tracks:async function(e,t){const s=await e(Zr,t),r=s?.data?.searchV2?.tracksV2;return r?Wr(r,Ys(s?.extensions)):null},users:async function(e,t){const s=await e(Xr,t),r=s?.data?.searchV2?.users;return r?Kr(r,Ys(s?.extensions)):null},topResults:async function(e,t){const s=await e(ta,t),r=s?.data?.searchV2?.topResultsV2;return r?Yr(r,zs(s?.extensions)):null},podcastAndEpisodes:yr};class na{constructor(e){this._request=e}async getSearchResults(e,t=!0,s=0,r=10,a=5,n=!1,i=!1){const o={searchTerm:e,offset:s,limit:r,numberOfTopResults:a,includeAudiobooks:t,includeArtistHasConcertsField:n,includePreReleases:i},c=await this._request(xr,o),l=c?.data?.searchV2;if(!l)return ra;const u=Ys(c?.extensions),d=zs(c?.extensions);return{albums:gr(l.albumsV2,u),artists:Rr(l.artists,u),episodes:ur(l.episodes,u),genres:Pr(l.genres,u),playlists:qr(l.playlists,u),podcasts:Vr(l.podcasts,u),audiobooks:kr(l.audiobooks??null,u),tracks:Wr(l.tracksV2,u),users:Kr(l.users,u),topResults:Yr(l.topResultsV2,d),topRecommendations:zr(l.topResultsV2,d),chipOrder:l.chipOrder}}async getSearchCategoryResults(e,t,s=!1,r=!1,a=0,n=25,i=20){const o={searchTerm:e,offset:a,limit:n,numberOfTopResults:i,includeAudiobooks:s,includePreReleases:r},c=aa[t];return await c(this._request,o)||sa}async getFullEpisodes(e,t=0,s=25){const r={searchTerm:e,offset:t,limit:s};return await yr(this._request,r)||sa}}var ia=s(98235);const oa="khkfPsJuVBQyL_5cLT7y",ca=({results:e,hasResults:t})=>{const s=(0,Ft.A)(),{isBrowser:i}=(0,a.d4)((e=>e.platform)),o=(0,a.d4)(Qs.JJ),u=(0,Ks.V)(),p=(0,d.vh)(),{version:m}=(0,d.mv)(),{category:h}=W(),y=((e,t,s)=>{const r=e?.chipOrder?.items??[];return Array.from(r.reduce(((r,a)=>{if(!a.typeName)return r;if(!s&&a.typeName===te.pb.TopResults)return r;const[n,i]=ae[a.typeName];return i&&n&&(t===i||e?.[n]?.items?.length)?(r.add(i),r):r}),new Set([])))})(e,h,!1),x="podcasts"!==h&&"episodes"!==h,f=(e=>{if(!e)return!1;const[t]=e.topResults.items;return Boolean(t&&t.type===se.c.TRACK)})(e),j=(0,c.NC)(ie.ijb);return(0,r.useEffect)((()=>{i||e&&t&&(({eventSender:e,country:t,isAnonymous:s,context:r,variant:a})=>{const n={category:"internal-search-test",action:"search-results-page-visit",variant:a,label:"desktop-app",context:r,os:(0,re.f)(),country:t,spt:(0,ee.v8)("sp_t")};s?e.send((0,z.r)(n)):e.send((0,Y._)(n))})({eventSender:p,country:o,isAnonymous:u,context:JSON.stringify({top_result_is_track:f,version:m}),variant:j})}),[o,p,t,u,i,e,f,j,m]),(0,g.jsxs)(N.pZ,{value:"search-page",children:[!s&&(0,g.jsx)(Zs.g,{children:(0,g.jsx)(Dt.o,{isSearchChipsEnabled:!0})}),(0,g.jsx)(X,{searchCategories:y,selectedCategory:h,displayChips:x}),(0,g.jsx)("div",{className:"contentSpacing",id:"searchPage",children:(0,g.jsx)(oe.E,{className:oa,render:()=>(0,g.jsxs)(n.BV,{children:[(0,g.jsx)(n.qh,{path:"/",element:(0,g.jsx)(ue.e,{pageId:l.$h.FIND,entityUri:"spotify:app:search",children:(0,g.jsx)(q,{})})}),(0,g.jsx)(n.qh,{path:":query",element:(0,g.jsx)(me,{children:(0,g.jsx)($s,{results:e,hasResults:t})})}),(0,g.jsx)(n.qh,{path:":query/:category",element:(0,g.jsx)(pe,{children:(0,g.jsx)(Bt,{results:e,displayChips:x})})})]})})})]})};const la=r.memo((function(){const e=(0,c.NC)(ie.KvH),t=(0,c.NC)(ie.Jl4),s=!(0,ne.n)(),[{category:a,query:n},i]=(0,ia.o)();(0,Js.m)("search");const[l,d]=(0,r.useState)({results:null,queryForResults:n??""}),p=l.results,m=function(e){return null!==e&&void 0!==Object.keys(e).find((t=>"chipOrder"!==t&&e[t].items.length>0))}(p),h=(0,r.useMemo)((()=>new na((0,le.lY)(ce.n.getInstance()))),[]),{searchHistory:y,setSearchHistory:x}=(0,_.k)(),f=(0,r.useCallback)((e=>{x([e,...y])}),[y,x]),j=(0,r.useCallback)((async e=>{e===l.queryForResults&&m||i(e,a,!1)}),[l.queryForResults,a,m,i]);(0,r.useEffect)((()=>{(async()=>{if(!n)return;if(s)return void d({results:null,queryForResults:n});const r=await h.getSearchResults(n,!0,0,10,5,e,t);d({results:r,queryForResults:n})})()}),[h,t,e,s,n]),(0,r.useEffect)((()=>{n||d({results:null,queryForResults:""})}),[n]);const b=(0,r.useMemo)((()=>o().create().toString()),[a,l.queryForResults]),R=(0,r.useMemo)((()=>({api:h,category:a,query:l.queryForResults,onAddToHistory:f,onSearchRequest:j,serpId:b})),[h,a,f,j,l.queryForResults,b]);return(0,g.jsxs)(M,{value:R,children:[(0,g.jsx)(Gs.Q,{children:u.Ru.get("search.page-title")}),(0,g.jsx)(ca,{results:p,hasResults:m})]})}))},78776:(e,t,s)=>{s.d(t,{a:()=>r});const r=e=>e?.linked_from?.uri||e.uri}}]);
//# sourceMappingURL=xpui-routes-search.js.map